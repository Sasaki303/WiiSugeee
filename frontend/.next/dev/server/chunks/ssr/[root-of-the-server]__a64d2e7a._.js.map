{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/idbAssets.ts"],"sourcesContent":["const DB_NAME = \"wiislide\";\nconst DB_VERSION = 1;\nconst STORE_NAME = \"assets\";\n\nfunction openDb(): Promise<IDBDatabase> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst req = indexedDB.open(DB_NAME, DB_VERSION);\n\t\treq.onupgradeneeded = () => {\n\t\t\tconst db = req.result;\n\t\t\tif (!db.objectStoreNames.contains(STORE_NAME)) {\n\t\t\t\tdb.createObjectStore(STORE_NAME);\n\t\t\t}\n\t\t};\n\t\treq.onsuccess = () => resolve(req.result);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function putAssetBlob(assetId: string, blob: Blob): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).put(blob, assetId);\n\t});\n}\n\nexport async function getAssetBlob(assetId: string): Promise<Blob | null> {\n\tconst db = await openDb();\n\treturn await new Promise<Blob | null>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readonly\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\tconst req = tx.objectStore(STORE_NAME).get(assetId);\n\t\treq.onsuccess = () => resolve((req.result as Blob | undefined) ?? null);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function clearAllAssetBlobs(): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).clear();\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB,SAAS;IACR,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,MAAM,UAAU,IAAI,CAAC,SAAS;QACpC,IAAI,eAAe,GAAG;YACrB,MAAM,KAAK,IAAI,MAAM;YACrB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC9C,GAAG,iBAAiB,CAAC;YACtB;QACD;QACA,IAAI,SAAS,GAAG,IAAM,QAAQ,IAAI,MAAM;QACxC,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe,aAAa,OAAe,EAAE,IAAU;IAC7D,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC,MAAM;IACtC;AACD;AAEO,eAAe,aAAa,OAAe;IACjD,MAAM,KAAK,MAAM;IACjB,OAAO,MAAM,IAAI,QAAqB,CAAC,SAAS;QAC/C,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;QACT;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,MAAM,MAAM,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC;QAC3C,IAAI,SAAS,GAAG,IAAM,QAAQ,AAAC,IAAI,MAAM,IAAyB;QAClE,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe;IACrB,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,KAAK;IACjC;AACD"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/presentation.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\n\nexport type ProjectAsset = {\n\tid: string;\n\tkind: \"pdf\" | \"video\" | \"image\";\n\tfileName: string;\n\tstoredFileName: string;\n};\n\nexport type AssetRef =\n\t| {\n\t\t\tkind: \"pdf\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tpage: number;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"video\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"image\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  };\n\nexport type SlideNodeData = {\n\tlabel: string;\n\tasset?: AssetRef;\n\tbindings?: ButtonBindings;\n};\n\nexport type SerializedFlow = {\n\tversion: 1;\n\tassets?: ProjectAsset[];\n\tviewport?: { x: number; y: number; zoom: number };\n\tprojectBindings?: ButtonBindings;\n\tnodes: Array<{\n\t\tid: string;\n\t\ttype?: string;\n\t\tposition: { x: number; y: number };\n\t\tdata: SlideNodeData;\n\t}>;\n\tedges: Array<{\n\t\tid: string;\n\t\tsource: string;\n\t\ttarget: string;\n\t\tlabel?: string;\n\t}>;\n};\n\nconst STORAGE_KEY = \"wiisugeee.editor.flow.v1\";\nconst LAST_SAVED_HASH_KEY = \"wiisugeee.editor.lastSavedHash.v1\";\n\nexport function serializeFlow(flow: SerializedFlow): string {\n\treturn JSON.stringify(flow, null, 2);\n}\n\nexport function tryParseFlowJson(text: string): SerializedFlow | null {\n\ttry {\n\t\tconst parsed = JSON.parse(text) as unknown;\n\t\tif (!parsed || typeof parsed !== \"object\") return null;\n\t\tconst maybe = parsed as Partial<SerializedFlow>;\n\t\tif (maybe.version !== 1) return null;\n\t\tif (!Array.isArray(maybe.nodes) || !Array.isArray(maybe.edges)) return null;\n\t\treturn maybe as SerializedFlow;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function saveToLocalStorage(flow: SerializedFlow): void {\n\ttry {\n\t\tlocalStorage.setItem(STORAGE_KEY, serializeFlow(flow));\n\t} catch {}\n}\n\nexport function loadFromLocalStorage(): SerializedFlow | null {\n\ttry {\n\t\tconst text = localStorage.getItem(STORAGE_KEY);\n\t\tif (!text) return null;\n\t\treturn tryParseFlowJson(text);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getLastSavedHash(): string | null {\n\ttry {\n\t\treturn localStorage.getItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function setLastSavedHash(hash: string): void {\n\ttry {\n\t\tlocalStorage.setItem(LAST_SAVED_HASH_KEY, hash);\n\t} catch {}\n}\n\nexport function clearEditorStorage(): void {\n\ttry {\n\t\tlocalStorage.removeItem(STORAGE_KEY);\n\t\tlocalStorage.removeItem(LAST_SAVED_HASH_KEY);\n\t} catch {}\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAuDA,MAAM,cAAc;AACpB,MAAM,sBAAsB;AAErB,SAAS,cAAc,IAAoB;IACjD,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU,OAAO;QAClD,MAAM,QAAQ;QACd,IAAI,MAAM,OAAO,KAAK,GAAG,OAAO;QAChC,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,GAAG,OAAO;QACvE,OAAO;IACR,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,mBAAmB,IAAoB;IACtD,IAAI;QACH,aAAa,OAAO,CAAC,aAAa,cAAc;IACjD,EAAE,OAAM,CAAC;AACV;AAEO,SAAS;IACf,IAAI;QACH,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,iBAAiB;IACzB,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS;IACf,IAAI;QACH,OAAO,aAAa,OAAO,CAAC;IAC7B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,aAAa,OAAO,CAAC,qBAAqB;IAC3C,EAAE,OAAM,CAAC;AACV;AAEO,SAAS;IACf,IAAI;QACH,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IACzB,EAAE,OAAM,CAAC;AACV"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/buttonBindings.ts"],"sourcesContent":["import type { WiiState } from \"@/hooks/useWiiController\";\r\n\r\nexport type WiiButton = keyof WiiState[\"buttons\"];\r\n\r\nexport type BindingAction =\r\n\t| { type: \"none\"; subtype?: string }\r\n\t| { type: \"next\" }\r\n\t| { type: \"prev\" }\r\n\t| { type: \"branch\"; kind: \"A\" | \"B\" | \"HOME\" }\r\n\t| { type: \"branchIndex\"; index: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 }\r\n\t| { type: \"reaction\"; kind: \"clap\" | \"laugh\" }\r\n\t| { type: \"paint\" }\r\n\t| { type: \"eraser\" }\r\n\t| { type: \"sound\"; kind: \"shot\" | \"oh\" | \"uxo\"; outputDevice?: \"pc\" | \"wii\" }\r\n\t| { type: \"remove\" }\r\n\t| { type: \"irSens\" };\r\n\r\nexport type ButtonBindings = Partial<Record<WiiButton, BindingAction>>;\r\n\r\nexport type SoundOutputDevice = \"pc\" | \"wii\";\r\n\r\nexport interface SoundSettings {\r\n\toutputDevice: SoundOutputDevice;\r\n}\r\n\r\nexport const DEFAULT_SOUND_SETTINGS: SoundSettings = {\r\n\toutputDevice: \"pc\",\r\n};\r\n\r\nexport const DEFAULT_BINDINGS: ButtonBindings = {\r\n\tRight: { type: \"next\" },\r\n\tLeft: { type: \"prev\" },\r\n\tPlus: { type: \"branch\", kind: \"A\" },\r\n\tMinus: { type: \"branch\", kind: \"B\" },\r\n\tHome: { type: \"branch\", kind: \"HOME\" },\r\n\tOne: { type: \"reaction\", kind: \"clap\" },\r\n\tTwo: { type: \"reaction\", kind: \"laugh\" },\r\n};\r\n\r\nexport function formatAction(a: BindingAction): string {\r\n\tswitch (a.type) {\r\n\t\tcase \"none\":\r\n\t\t\treturn \"Êú™Ââ≤ÂΩì\";\r\n\t\tcase \"next\":\r\n\t\t\treturn \"Ê¨°„Å∏\";\r\n\t\tcase \"prev\":\r\n\t\t\treturn \"Êàª„Çã\";\r\n\t\tcase \"branch\":\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"A\":\r\n\t\t\t\t\treturn \"A„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"B\":\r\n\t\t\t\t\treturn \"B„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"HOME\":\r\n\t\t\t\t\treturn \"HOME„Å∏Êàª„Çã\";\r\n\t\t\t}\r\n\t\tcase \"branchIndex\":\r\n\t\t\treturn `ÂàÜÂ≤ê ${a.index}`;\r\n\t\tcase \"reaction\":\r\n\t\t\treturn a.kind === \"clap\" ? \"ÊãçÊâã\" : \"Á¨ë„ÅÑ\";\r\n\t\tcase \"paint\":\r\n\t\t\treturn \"PAINTüé®\";\r\n\t\tcase \"eraser\":\r\n\t\t\treturn \"ERASER\";\r\n\t\tcase \"sound\": {\r\n\t\t\tconst device = a.outputDevice === \"wii\" ? \"[Wii]\" : \"[PC]\";\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"shot\":\r\n\t\t\t\t\treturn `SHOTüîä${device}`;\r\n\t\t\t\tcase \"oh\":\r\n\t\t\t\t\treturn `Oh...üîä${device}`;\r\n\t\t\t\tcase \"uxo\":\r\n\t\t\t\t\treturn `Uxo~üîä${device}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase \"remove\":\r\n\t\t\treturn \"REMOVE\";\r\n\t\tcase \"irSens\":\r\n\t\t\treturn \"IRSensÂàáÊõø\";\r\n\t}\r\n}\r\n\r\nexport function mergeBindings(bindings?: ButtonBindings): ButtonBindings {\r\n\treturn {\r\n\t\t...DEFAULT_BINDINGS,\r\n\t\t...(bindings ?? {}),\r\n\t};\r\n}\r\n\r\nexport function encodeAction(a: BindingAction): string {\r\n\treturn JSON.stringify(a);\r\n}\r\n\r\nexport function decodeAction(s: string): BindingAction {\r\n\treturn JSON.parse(s) as BindingAction;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAyBO,MAAM,yBAAwC;IACpD,cAAc;AACf;AAEO,MAAM,mBAAmC;IAC/C,OAAO;QAAE,MAAM;IAAO;IACtB,MAAM;QAAE,MAAM;IAAO;IACrB,MAAM;QAAE,MAAM;QAAU,MAAM;IAAI;IAClC,OAAO;QAAE,MAAM;QAAU,MAAM;IAAI;IACnC,MAAM;QAAE,MAAM;QAAU,MAAM;IAAO;IACrC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAO;IACtC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAQ;AACxC;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAQ,EAAE,IAAI;QACb,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAQ,EAAE,IAAI;gBACb,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;YACT;QACD,KAAK;YACJ,OAAO,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE;QACvB,KAAK;YACJ,OAAO,EAAE,IAAI,KAAK,SAAS,OAAO;QACnC,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YAAS;gBACb,MAAM,SAAS,EAAE,YAAY,KAAK,QAAQ,UAAU;gBACpD,OAAQ,EAAE,IAAI;oBACb,KAAK;wBACJ,OAAO,CAAC,MAAM,EAAE,QAAQ;oBACzB,KAAK;wBACJ,OAAO,CAAC,OAAO,EAAE,QAAQ;oBAC1B,KAAK;wBACJ,OAAO,CAAC,MAAM,EAAE,QAAQ;gBAC1B;YACD;QACA,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;IACT;AACD;AAEO,SAAS,cAAc,QAAyB;IACtD,OAAO;QACN,GAAG,gBAAgB;QACnB,GAAI,YAAY,CAAC,CAAC;IACnB;AACD;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAO,KAAK,SAAS,CAAC;AACvB;AAEO,SAAS,aAAa,CAAS;IACrC,OAAO,KAAK,KAAK,CAAC;AACnB"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectBindingsStorage.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\r\n\r\nfunction key(projectId: string) {\r\n    return `wiiSugeee:projectBindings:${projectId}`;\r\n}\r\n\r\nexport function loadProjectBindings(projectId: string): ButtonBindings | undefined {\r\n    try {\r\n        const raw = localStorage.getItem(key(projectId));\r\n        if (!raw) return undefined;\r\n        return JSON.parse(raw) as ButtonBindings;\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport function saveProjectBindings(projectId: string, bindings: ButtonBindings) {\r\n    try {\r\n        localStorage.setItem(key(projectId), JSON.stringify(bindings));\r\n    } catch {}\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,IAAI,SAAiB;IAC1B,OAAO,CAAC,0BAA0B,EAAE,WAAW;AACnD;AAEO,SAAS,oBAAoB,SAAiB;IACjD,IAAI;QACA,MAAM,MAAM,aAAa,OAAO,CAAC,IAAI;QACrC,IAAI,CAAC,KAAK,OAAO;QACjB,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEO,SAAS,oBAAoB,SAAiB,EAAE,QAAwB;IAC3E,IAAI;QACA,aAAa,OAAO,CAAC,IAAI,YAAY,KAAK,SAAS,CAAC;IACxD,EAAE,OAAM,CAAC;AACb"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/currentProjectStore.ts"],"sourcesContent":["import type { SerializedFlow } from \"@/lib/presentation\";\r\nimport type { ButtonBindings, SoundSettings } from \"@/lib/buttonBindings\";\r\nimport { DEFAULT_SOUND_SETTINGS } from \"@/lib/buttonBindings\";\r\nimport { loadProjectBindings, saveProjectBindings } from \"@/lib/projectBindingsStorage\";\r\n\r\ntype Listener = () => void;\r\n\r\nlet currentFlow: SerializedFlow | null = null;\r\nlet currentProjectId = \"default\";\r\nconst listeners = new Set<Listener>();\r\n\r\nexport function setCurrentProjectId(projectId: string) {\r\n\tcurrentProjectId = projectId || \"default\";\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nexport function getCurrentProjectId() {\r\n\treturn currentProjectId;\r\n}\r\n\r\nexport function getCurrentFlow(): SerializedFlow | null {\r\n\treturn currentFlow;\r\n}\r\n\r\nexport function setCurrentFlow(flow: SerializedFlow | null) {\r\n\tif (flow) {\r\n\t\tconst stored = typeof window !== \"undefined\" ? loadProjectBindings(currentProjectId) : undefined;\r\n\t\tcurrentFlow = stored ? { ...flow, projectBindings: stored } : flow;\r\n\t} else {\r\n\t\tcurrentFlow = null;\r\n\t}\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nexport function subscribeCurrentFlow(listener: Listener) {\r\n\tlisteners.add(listener);\r\n\treturn () => listeners.delete(listener);\r\n}\r\n\r\nexport function getProjectBindings(): ButtonBindings | undefined {\r\n\tif (currentFlow?.projectBindings) {\r\n\t\treturn currentFlow.projectBindings;\r\n\t}\r\n\tif (typeof window === \"undefined\") return undefined;\r\n\treturn loadProjectBindings(currentProjectId);\r\n}\r\n\r\nexport function setProjectBindings(bindings: ButtonBindings) {\r\n\tif (currentFlow) {\r\n\t\tcurrentFlow = { ...currentFlow, projectBindings: bindings };\r\n\t}\r\n\r\n\tif (typeof window !== \"undefined\") {\r\n\t\tsaveProjectBindings(currentProjectId, bindings);\r\n\t}\r\n\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nconst SOUND_SETTINGS_KEY_PREFIX = \"wiiSugeee_soundSettings_\";\r\n\r\nexport function getSoundSettings(): SoundSettings {\r\n\tif (typeof window === \"undefined\") {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n\r\n\tconst key = SOUND_SETTINGS_KEY_PREFIX + currentProjectId;\r\n\tconst stored = localStorage.getItem(key);\r\n\r\n\tif (!stored) {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n\r\n\ttry {\r\n\t\treturn JSON.parse(stored) as SoundSettings;\r\n\t} catch {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n}\r\n\r\nexport function setSoundSettings(settings: SoundSettings) {\r\n\tif (typeof window === \"undefined\") return;\r\n\r\n\tconst key = SOUND_SETTINGS_KEY_PREFIX + currentProjectId;\r\n\tlocalStorage.setItem(key, JSON.stringify(settings));\r\n\r\n\tfor (const l of listeners) l();\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAEA;AACA;;;AAIA,IAAI,cAAqC;AACzC,IAAI,mBAAmB;AACvB,MAAM,YAAY,IAAI;AAEf,SAAS,oBAAoB,SAAiB;IACpD,mBAAmB,aAAa;IAChC,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEO,SAAS;IACf,OAAO;AACR;AAEO,SAAS;IACf,OAAO;AACR;AAEO,SAAS,eAAe,IAA2B;IACzD,IAAI,MAAM;QACT,MAAM,SAAS,sCAAgC,0BAAwC;QACvF,cAAc,sCAAS,0BAAuC;IAC/D,OAAO;QACN,cAAc;IACf;IACA,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEO,SAAS,qBAAqB,QAAkB;IACtD,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAC/B;AAEO,SAAS;IACf,IAAI,aAAa,iBAAiB;QACjC,OAAO,YAAY,eAAe;IACnC;IACA,wCAAmC,OAAO;;;AAE3C;AAEO,SAAS,mBAAmB,QAAwB;IAC1D,IAAI,aAAa;QAChB,cAAc;YAAE,GAAG,WAAW;YAAE,iBAAiB;QAAS;IAC3D;IAEA;;IAIA,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEA,MAAM,4BAA4B;AAE3B,SAAS;IACf,wCAAmC;QAClC,OAAO;YAAE,GAAG,0LAAsB;QAAC;IACpC;;;IAEA,MAAM;IACN,MAAM;AAWP;AAEO,SAAS,iBAAiB,QAAuB;IACvD,wCAAmC;;;IAEnC,MAAM;IAGD,MAAM;AACZ"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectArchive.ts"],"sourcesContent":["import JSZip from \"jszip\";\nimport { getAssetBlob, putAssetBlob } from \"@/lib/idbAssets\";\nimport { saveToLocalStorage, tryParseFlowJson, type SerializedFlow } from \"@/lib/presentation\";\nimport { getProjectBindings, getCurrentProjectId } from \"@/lib/currentProjectStore\";\nimport { saveProjectBindings } from \"@/lib/projectBindingsStorage\";\n\nasync function showSaveFilePickerCompat(): Promise<FileSystemFileHandle | null> {\n\tconst w = window as unknown as {\n\t\tshowSaveFilePicker?: (options?: {\n\t\t\tsuggestedName?: string;\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle>;\n\t};\n\tif (!w.showSaveFilePicker) return null;\n\ttry {\n\t\treturn await w.showSaveFilePicker({\n\t\t\tsuggestedName: \"wiislide.zip\",\n\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\tstartIn: \"desktop\",\n\t\t});\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nasync function showOpenFilePickerCompat(): Promise<File | null> {\n\tconst w = window as unknown as {\n\t\tshowOpenFilePicker?: (options?: {\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tmultiple?: boolean;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle[]>;\n\t};\n\tif (w.showOpenFilePicker) {\n\t\ttry {\n\t\t\tconst [handle] = await w.showOpenFilePicker({\n\t\t\t\tmultiple: false,\n\t\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\t\tstartIn: \"desktop\",\n\t\t\t});\n\t\t\tif (!handle) return null;\n\t\t\treturn await handle.getFile();\n\t\t} catch {}\n\t}\n\n\treturn await new Promise<File | null>((resolve) => {\n\t\tconst input = document.createElement(\"input\");\n\t\tinput.type = \"file\";\n\t\tinput.accept = \".zip,application/zip\";\n\t\tinput.onchange = () => resolve(input.files?.[0] ?? null);\n\t\tinput.click();\n\t});\n}\n\nfunction downloadBlob(blob: Blob, filename: string) {\n\tconst url = URL.createObjectURL(blob);\n\tconst a = document.createElement(\"a\");\n\ta.href = url;\n\ta.download = filename;\n\ta.click();\n\tURL.revokeObjectURL(url);\n}\n\nexport async function saveProjectAsZip(flow: SerializedFlow): Promise<void> {\n\tconst latestBindings = getProjectBindings();\n\tconst flowWithBindings: SerializedFlow = latestBindings\n\t\t? { ...flow, projectBindings: latestBindings }\n\t\t: flow;\n\n\tconst zip = new JSZip();\n\tzip.file(\"project.json\", JSON.stringify(flowWithBindings, null, 2));\n\n\tconst assets = flowWithBindings.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst blob = await getAssetBlob(asset.id);\n\t\tif (!blob) throw new Error(`„Ç¢„Çª„ÉÉ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì: ${asset.fileName}`);\n\t\tzip.file(`assets/${asset.storedFileName}`, blob);\n\t}\n\n\tconst zipBlob = await zip.generateAsync({ type: \"blob\" });\n\tconst handle = await showSaveFilePickerCompat();\n\tif (!handle) {\n\t\tdownloadBlob(zipBlob, \"wiislide.zip\");\n\t\treturn;\n\t}\n\tconst writable = await handle.createWritable();\n\tawait writable.write(zipBlob);\n\tawait writable.close();\n}\n\nexport async function loadProjectFromZipFile(file: File): Promise<SerializedFlow> {\n\tconst zip = await JSZip.loadAsync(file);\n\tconst projectText = await zip.file(\"project.json\")?.async(\"string\");\n\tif (!projectText) throw new Error(\"project.json „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì\");\n\n\tconst parsed = tryParseFlowJson(projectText);\n\tif (!parsed) throw new Error(\"project.json „ÅÆÂΩ¢Âºè„Åå‰∏çÊ≠£„Åß„Åô\");\n\n\tconst assets = parsed.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst entry = zip.file(`assets/${asset.storedFileName}`);\n\t\tif (!entry) throw new Error(`assets/${asset.storedFileName} „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`);\n\t\tconst blob = await entry.async(\"blob\");\n\t\tawait putAssetBlob(asset.id, blob);\n\t}\n\n\tif (parsed.projectBindings) {\n\t\tconst projectId = getCurrentProjectId();\n\t\tsaveProjectBindings(projectId, parsed.projectBindings);\n\t}\n\n\tsaveToLocalStorage(parsed);\n\treturn parsed;\n}\n\nexport async function loadProjectFromZip(): Promise<SerializedFlow> {\n\tconst file = await showOpenFilePickerCompat();\n\tif (!file) throw new Error(\"„Éï„Ç°„Ç§„É´„ÅåÈÅ∏Êäû„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü\");\n\treturn await loadProjectFromZipFile(file);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 551, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/hooks/useWiiController.ts"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nexport type WiiButtons = {\r\n\tA: boolean;\r\n\tB: boolean;\r\n\tOne: boolean;\r\n\tTwo: boolean;\r\n\tPlus: boolean;\r\n\tMinus: boolean;\r\n\tHome: boolean;\r\n\tUp: boolean;\r\n\tDown: boolean;\r\n\tRight: boolean;\r\n\tLeft: boolean;\r\n};\r\n\r\nexport type WiiState = {\r\n\tbuttons: WiiButtons;\r\n\taccel: { x: number; y: number; z: number };\r\n\tir: { x: number; y: number }[];\r\n\tcursor?: { x: number; y: number } | null;\r\n};\r\n\r\ntype WiiServerMessage =\r\n\t| { type: \"status\"; connected: boolean; irCursorEnabled?: boolean }\r\n\t| { type: \"irCursorStatus\"; enabled: boolean }\r\n\t| { type: \"wiiDisconnected\"; at?: number }\r\n\t| WiiState;\r\n\r\nconst EMPTY_BUTTONS: WiiButtons = {\r\n\tA: false, B: false, One: false, Two: false,\r\n\tPlus: false, Minus: false, Home: false,\r\n\tUp: false, Down: false, Right: false, Left: false,\r\n};\r\n\r\nconst KEY_TO_BUTTON: Record<string, keyof WiiButtons> = {\r\n\ti: \"Up\", j: \"Left\", k: \"Down\", l: \"Right\",\r\n\t\";\": \"Plus\", \"-\": \"Minus\",\r\n\th: \"Home\", o: \"A\", p: \"B\",\r\n\tn: \"One\", m: \"Two\",\r\n};\r\n\r\nfunction keyToButton(key: string): keyof WiiButtons | null {\r\n\tconst k = key.length === 1 ? key.toLowerCase() : key;\r\n\treturn KEY_TO_BUTTON[k] ?? null;\r\n}\r\n\r\nexport function useWiiController() {\r\n\tconst [wiiState, setWiiState] = useState<WiiState | null>(null);\r\n\tconst [wiiConnected, setWiiConnected] = useState(false);\r\n\tconst [wiiDisconnectedAt, setWiiDisconnectedAt] = useState<number | null>(null);\r\n\tconst [irCursorEnabled, setIrCursorEnabled] = useState(false);\r\n\tconst [pressed, setPressed] = useState<Partial<WiiButtons>>({});\r\n\r\n\tconst wasConnectedRef = useRef(false);\r\n\tconst wsRef = useRef<WebSocket | null>(null);\r\n\tconst pressedBufferRef = useRef<Partial<WiiButtons>>({});\r\n\tconst prevButtonsRef = useRef<WiiButtons | null>(null);\r\n\tconst latestWiiDataRef = useRef<WiiState | null>(null);\r\n\tconst pendingPressedRef = useRef<Partial<WiiButtons>>({});\r\n\tconst kbButtonsRef = useRef<WiiButtons>({ ...EMPTY_BUTTONS });\r\n\tconst kbPressedBufferRef = useRef<Partial<WiiButtons>>({});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst onKeyDown = (e: KeyboardEvent) => {\r\n\t\t\tif (e.repeat) return;\r\n\t\t\tconst btn = keyToButton(e.key);\r\n\t\t\tif (!btn) return;\r\n\t\t\tkbButtonsRef.current = { ...kbButtonsRef.current, [btn]: true };\r\n\t\t\tkbPressedBufferRef.current[btn] = true;\r\n\t\t};\r\n\r\n\t\tconst onKeyUp = (e: KeyboardEvent) => {\r\n\t\t\tconst btn = keyToButton(e.key);\r\n\t\t\tif (!btn) return;\r\n\t\t\tkbButtonsRef.current = { ...kbButtonsRef.current, [btn]: false };\r\n\t\t};\r\n\r\n\t\twindow.addEventListener(\"keydown\", onKeyDown);\r\n\t\twindow.addEventListener(\"keyup\", onKeyUp);\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"keydown\", onKeyDown);\r\n\t\t\twindow.removeEventListener(\"keyup\", onKeyUp);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst ws = new WebSocket(\"ws://localhost:8080\");\r\n\t\twsRef.current = ws;\r\n\r\n\t\tws.onopen = () => console.log(\"Connected to Wii Server\");\r\n\r\n\t\tws.onmessage = (event) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst msg = JSON.parse(event.data) as WiiServerMessage;\r\n\r\n\t\t\t\tif (msg && typeof msg === \"object\" && \"type\" in msg) {\r\n\t\t\t\t\tconst typedMsg = msg as { type: string; connected?: boolean; enabled?: boolean; irCursorEnabled?: boolean; at?: number };\r\n\r\n\t\t\t\t\tif (typedMsg.type === \"status\") {\r\n\t\t\t\t\t\tconst connected = !!typedMsg.connected;\r\n\t\t\t\t\t\tsetWiiConnected(connected);\r\n\t\t\t\t\t\twasConnectedRef.current = connected;\r\n\t\t\t\t\t\tif (typeof typedMsg.irCursorEnabled === \"boolean\") {\r\n\t\t\t\t\t\t\tsetIrCursorEnabled(typedMsg.irCursorEnabled);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typedMsg.type === \"irCursorStatus\") {\r\n\t\t\t\t\t\tsetIrCursorEnabled(!!typedMsg.enabled);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typedMsg.type === \"wiiDisconnected\") {\r\n\t\t\t\t\t\tsetWiiConnected(false);\r\n\t\t\t\t\t\twasConnectedRef.current = false;\r\n\t\t\t\t\t\tsetWiiDisconnectedAt(typeof typedMsg.at === \"number\" ? typedMsg.at : Date.now());\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst data = msg as WiiState;\r\n\t\t\t\tsetWiiConnected(true);\r\n\t\t\t\twasConnectedRef.current = true;\r\n\r\n\t\t\t\tif (prevButtonsRef.current) {\r\n\t\t\t\t\t(Object.keys(data.buttons) as Array<keyof WiiButtons>).forEach((key) => {\r\n\t\t\t\t\t\tif (data.buttons[key] && !prevButtonsRef.current![key]) {\r\n\t\t\t\t\t\t\tpressedBufferRef.current[key] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tprevButtonsRef.current = data.buttons;\r\n\t\t\t\tlatestWiiDataRef.current = data;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"Parse error:\", e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst handleDisconnect = () => {\r\n\t\t\tconst wasConnected = wasConnectedRef.current;\r\n\t\t\tsetWiiConnected(false);\r\n\t\t\twasConnectedRef.current = false;\r\n\t\t\tif (wasConnected) {\r\n\t\t\t\tsetWiiDisconnectedAt(Date.now());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tws.onerror = handleDisconnect;\r\n\t\tws.onclose = handleDisconnect;\r\n\r\n\t\treturn () => {\r\n\t\t\ttry { ws.close(); } catch {}\r\n\t\t\twsRef.current = null;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet raf = 0;\r\n\r\n\t\tconst flushState = (wiiDataOrNull: WiiState | null) => {\r\n\t\t\tconst wiiButtons = wiiDataOrNull?.buttons ?? null;\r\n\t\t\tconst kbButtons = kbButtonsRef.current;\r\n\r\n\t\t\tconst mergedButtons: WiiButtons = {\r\n\t\t\t\tA: (wiiButtons?.A ?? false) || kbButtons.A,\r\n\t\t\t\tB: (wiiButtons?.B ?? false) || kbButtons.B,\r\n\t\t\t\tOne: (wiiButtons?.One ?? false) || kbButtons.One,\r\n\t\t\t\tTwo: (wiiButtons?.Two ?? false) || kbButtons.Two,\r\n\t\t\t\tPlus: (wiiButtons?.Plus ?? false) || kbButtons.Plus,\r\n\t\t\t\tMinus: (wiiButtons?.Minus ?? false) || kbButtons.Minus,\r\n\t\t\t\tHome: (wiiButtons?.Home ?? false) || kbButtons.Home,\r\n\t\t\t\tUp: (wiiButtons?.Up ?? false) || kbButtons.Up,\r\n\t\t\t\tDown: (wiiButtons?.Down ?? false) || kbButtons.Down,\r\n\t\t\t\tRight: (wiiButtons?.Right ?? false) || kbButtons.Right,\r\n\t\t\t\tLeft: (wiiButtons?.Left ?? false) || kbButtons.Left,\r\n\t\t\t};\r\n\r\n\t\t\tfor (const key of Object.keys(pressedBufferRef.current)) {\r\n\t\t\t\tpendingPressedRef.current[key as keyof WiiButtons] = true;\r\n\t\t\t}\r\n\t\t\tfor (const key of Object.keys(kbPressedBufferRef.current)) {\r\n\t\t\t\tpendingPressedRef.current[key as keyof WiiButtons] = true;\r\n\t\t\t}\r\n\t\t\tpressedBufferRef.current = {};\r\n\t\t\tkbPressedBufferRef.current = {};\r\n\r\n\t\t\tconst mergedPressed: Partial<WiiButtons> = { ...pendingPressedRef.current };\r\n\t\t\tpendingPressedRef.current = {};\r\n\r\n\t\t\tconst mergedState: WiiState = {\r\n\t\t\t\tbuttons: mergedButtons,\r\n\t\t\t\taccel: wiiDataOrNull?.accel ?? { x: 0, y: 0, z: 0 },\r\n\t\t\t\tir: wiiDataOrNull?.ir ?? [],\r\n\t\t\t\tcursor: wiiDataOrNull?.cursor ?? null,\r\n\t\t\t};\r\n\r\n\t\t\tsetWiiState(mergedState);\r\n\t\t\tsetPressed(mergedPressed);\r\n\t\t};\r\n\r\n\t\tconst loop = () => {\r\n\t\t\tflushState(latestWiiDataRef.current);\r\n\t\t\traf = window.requestAnimationFrame(loop);\r\n\t\t};\r\n\r\n\t\traf = window.requestAnimationFrame(loop);\r\n\t\treturn () => window.cancelAnimationFrame(raf);\r\n\t}, []);\r\n\r\n\tconst playWiiSound = (soundType: \"shot\" | \"oh\" | \"uxo\") => {\r\n\t\tif (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) return;\r\n\t\ttry {\r\n\t\t\twsRef.current.send(JSON.stringify({ type: \"playSound\", soundType }));\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"Failed to send playSound message:\", e);\r\n\t\t}\r\n\t};\r\n\r\n\tconst setIrCursorEnabledFn = (enabled: boolean) => {\r\n\t\tsetIrCursorEnabled(enabled);\r\n\t\tif (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\r\n\t\t\ttry {\r\n\t\t\t\twsRef.current.send(JSON.stringify({ type: \"setIrCursor\", enabled }));\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"Failed to send setIrCursor message:\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\twiiState,\r\n\t\tpressed,\r\n\t\twiiConnected,\r\n\t\twiiDisconnectedAt,\r\n\t\tirCursorEnabled,\r\n\t\tsetIrCursorEnabled: setIrCursorEnabledFn,\r\n\t\tplayWiiSound,\r\n\t};\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 780, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { loadProjectFromZip } from \"@/lib/projectArchive\";\nimport { useWiiController } from \"@/hooks/useWiiController\";\n\nexport default function Home() {\n    const router = useRouter();\n    const { wiiConnected } = useWiiController();\n    const [isDark, setIsDark] = useState(true);\n\n\tuseEffect(() => {\n        const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n        setIsDark(mediaQuery.matches);\n\n        const handleChange = (e: MediaQueryListEvent) => {\n            setIsDark(e.matches);\n        };\n\n        mediaQuery.addEventListener(\"change\", handleChange);\n        return () => mediaQuery.removeEventListener(\"change\", handleChange);\n    }, []);\n\n    const onLoadProject = useCallback(async () => {\n\t\ttry {\n\t\t\tawait loadProjectFromZip();\n\t\t\trouter.push(\"/editor\");\n\t\t} catch (e) {\n\t\t\talert(`Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${e instanceof Error ? e.message : String(e)}`);\n\t\t}\n\t}, [router]);\n\n\tconst menuItems = [\n\t\t{ label: \"„Ç®„Éá„Ç£„Çø„ÇíÈñã„Åè\", href: \"/editor\", icon: \"‚úèÔ∏è\" },\n\t\t{ label: \"Áô∫Ë°®„É¢„Éº„Éâ„ÇíÈñã„Åè\", href: \"/present\", icon: \"üìΩÔ∏è\" },\n\t\t{ label: \"„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆË™≠„ÅøËæº„Åø\", action: onLoadProject, icon: \"üìÇ\" },\n\t\t{ label: \"„É†„Éº„Éì„Éº„ÇíË¶ã„Çã\", href: \"/movie\", icon: \"üé¨\" },\n\t];\n\n\tconst colors = {\n        bg: isDark ? \"#000000\" : \"#FFFFFF\",\n        text: isDark ? \"#FFFFFF\" : \"#000000\",\n        button: isDark ? \"#333333\" : \"#FFFFFF\",\n        border: isDark ? \"#FFFFFF\" : \"#000000\",\n        buttonBorder: \"#87CEEB\",\n        buttonHoverBg: \"#87CEEB\",\n        buttonHoverText: isDark ? \"#000000\" : \"#000000\",\n        disconnectedText: isDark ? \"#cacacaff\" : \"#454545ff\",\n        wiiRemoteImage: isDark ? \"/phKuro 3.png\" : \"/phShiro 3.png\",\n        lineBorder: \"#87CEEB\",\n        headerFooterBg: isDark ? \"#333333\" : \"#F5F5F5\",\n\t};\n\n\tconst buttonBaseStyle: React.CSSProperties = {\n        border: `3px solid ${colors.buttonBorder}`,\n        backgroundColor: colors.button,\n        borderRadius: \"80px\",\n        padding: \"70px 50px\",\n        fontSize: \"25px\",\n        fontWeight: \"bold\",\n        cursor: \"pointer\",\n        textDecoration: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        transition: \"all 0.2s ease\",\n        fontFamily: \"var(--font-geist-sans)\",\n        height: \"120px\",\n        width: \"420px\",\n        boxShadow: \"0 0 10px rgba(135, 206, 235, 0.5), 0 0 20px rgba(135, 206, 235, 0.5)\",\n    };\n\n    const smallButtonStyle: React.CSSProperties = {\n        ...buttonBaseStyle,\n        padding: \"12px 24px\",\n        fontSize: \"18px\",\n        height: \"60px\",\n        width: \"150px\",\n    };\n\n    return (\n        <main style={{\n            minHeight: \"100vh\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            fontFamily: \"var(--font-geist-sans)\",\n            backgroundColor: colors.bg,\n            color: colors.text,\n\t\t}}>\n\t\t\t<header style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"flex-start\",\n                padding: \"20px 40px\",\n                borderBottom: `2px solid ${colors.lineBorder}`,\n                backgroundColor: colors.headerFooterBg,\n\t\t\t}}>\n\t\t\t\t<h1 style={{\n                    fontSize: \"48px\",\n                    fontWeight: \"700\",\n                    margin: \"0\",\n                    color: colors.text,\n                }}>\n                    <span style={{ fontFamily: \"ContinuumBold, sans-serif\" }}>Wii</span>\n                    <span style={{ fontFamily: \"ContinuumMedium, sans-serif\" }}>Can</span>\n                </h1>\n\n\t\t\t\t<div style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    alignItems: \"center\",\n                    gap: \"10px\",\n\t\t\t\t}}>\n\t\t\t\t\t<Link href=\"/how-to-use\"\n                        style={{\n                            ...smallButtonStyle,\n                            textDecoration: \"none\",\n                            color: colors.text,\n                        }}\n                        onMouseEnter={(e) => {\n                            (e.currentTarget as HTMLAnchorElement).style.backgroundColor = colors.buttonHoverBg;\n                            (e.currentTarget as HTMLAnchorElement).style.color = colors.buttonHoverText;\n                        }}\n                        onMouseLeave={(e) => {\n                            (e.currentTarget as HTMLAnchorElement).style.backgroundColor = colors.button;\n                            (e.currentTarget as HTMLAnchorElement).style.color = colors.text;\n                        }}\n                    >\n                        üìì‰Ωø„ÅÑÊñπ\n                    </Link>\n\n                </div>\n            </header>\n\n\t\t\t<main style={{\n                flex: 1,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                padding: \"40px\",\n\t\t\t}}>\n\t\t\t\t<div style={{\n                    display: \"grid\",\n                    gridTemplateColumns: \"1fr 1fr\",\n                    gap: \"30px\",\n                    maxWidth: \"800px\",\n                    width: \"100%\",\n                }}>\n                    {menuItems.map((item, index) => (\n                        <div key={index} style={{ display: \"flex\", justifyContent: \"center\" }}>\n                            {item.action ? (\n                                <button\n                                    onClick={item.action}\n                                    style={{\n                                        ...buttonBaseStyle,\n                                        color: colors.text,\n                                    }}\n                                    onMouseEnter={(e) => {\n                                        (e.currentTarget as HTMLButtonElement).style.backgroundColor = colors.buttonHoverBg;\n                                        (e.currentTarget as HTMLButtonElement).style.color = colors.buttonHoverText;\n                                    }}\n                                    onMouseLeave={(e) => {\n                                        (e.currentTarget as HTMLButtonElement).style.backgroundColor = colors.button;\n                                        (e.currentTarget as HTMLButtonElement).style.color = colors.text;\n                                    }}\n                                >\n                                    <span style={{ marginRight: \"8px\" }}>{item.icon}</span>\n                                    {item.label}\n                                </button>\n                            ) : (\n                                <Link href={item.href}\n                                    style={{\n                                        ...buttonBaseStyle,\n                                        color: colors.text,\n                                        textDecoration: \"none\",\n                                    }}\n                                    onMouseEnter={(e) => {\n                                        (e.currentTarget as HTMLAnchorElement).style.backgroundColor = colors.buttonHoverBg;\n                                        (e.currentTarget as HTMLAnchorElement).style.color = colors.buttonHoverText;\n                                    }}\n                                    onMouseLeave={(e) => {\n                                        (e.currentTarget as HTMLAnchorElement).style.backgroundColor = colors.button;\n                                        (e.currentTarget as HTMLAnchorElement).style.color = colors.text;\n                                    }}\n                                >\n                                    <span style={{ marginRight: \"8px\" }}>{item.icon}</span>\n                                    {item.label}\n                                </Link>\n                            )}\n                        </div>\n                    ))}\n                </div>\n            </main>\n\n\t\t\t<footer style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"space-between\",\n                padding: \"20px 40px\",\n                borderTop: `2px solid ${colors.lineBorder}`,\n                backgroundColor: colors.headerFooterBg,\n                maxHeight: \"80px\",\n                gap: \"10px\",\n\t\t\t}}>\n\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}>\n\t\t\t\t\t<img\n                        src={colors.wiiRemoteImage}\n                        alt=\"Wii Remote\"\n                        style={{\n                            width: \"90px\",\n                            height: \"200px\",\n                            opacity: wiiConnected ? 1 : 0.5,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{wiiConnected ? (\n                        <span style={{\n                            fontSize: \"20px\",\n                            fontWeight: \"bold\",\n                            color: colors.text,\n                        }}>\n                            1Püîã\n                        </span>\n                    ) : (\n                        <span style={{\n                            fontSize: \"16px\",\n                            color: colors.disconnectedText,\n                            opacity: 0.7,\n                        }}>\n                            Wii„É™„É¢„Ç≥„É≥Êú™Êé•Á∂ö‚Ä¶\n                        </span>\n                    )}\n                </div>\n\n\t\t\t\t<img\n                    src={isDark ? \"/stevenShiro.png\" : \"/stevenKuro.png\"}\n                    alt=\"Logo\"\n                    style={{\n                        width: \"100px\",\n                        height: \"26px\",\n                    }}\n                />\n            </footer>\n        </main>\n    );\n}"],"names":[],"mappings":"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"}}]
}