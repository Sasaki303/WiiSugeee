{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/idbAssets.ts"],"sourcesContent":["const DB_NAME = \"wiislide\";\nconst DB_VERSION = 1;\nconst STORE_NAME = \"assets\";\n\nfunction openDb(): Promise<IDBDatabase> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst req = indexedDB.open(DB_NAME, DB_VERSION);\n\t\treq.onupgradeneeded = () => {\n\t\t\tconst db = req.result;\n\t\t\tif (!db.objectStoreNames.contains(STORE_NAME)) {\n\t\t\t\tdb.createObjectStore(STORE_NAME);\n\t\t\t}\n\t\t};\n\t\treq.onsuccess = () => resolve(req.result);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function putAssetBlob(assetId: string, blob: Blob): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).put(blob, assetId);\n\t});\n}\n\nexport async function getAssetBlob(assetId: string): Promise<Blob | null> {\n\tconst db = await openDb();\n\treturn await new Promise<Blob | null>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readonly\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\tconst req = tx.objectStore(STORE_NAME).get(assetId);\n\t\treq.onsuccess = () => resolve((req.result as Blob | undefined) ?? null);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function clearAllAssetBlobs(): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).clear();\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB,SAAS;IACR,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,MAAM,UAAU,IAAI,CAAC,SAAS;QACpC,IAAI,eAAe,GAAG;YACrB,MAAM,KAAK,IAAI,MAAM;YACrB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC9C,GAAG,iBAAiB,CAAC;YACtB;QACD;QACA,IAAI,SAAS,GAAG,IAAM,QAAQ,IAAI,MAAM;QACxC,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe,aAAa,OAAe,EAAE,IAAU;IAC7D,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC,MAAM;IACtC;AACD;AAEO,eAAe,aAAa,OAAe;IACjD,MAAM,KAAK,MAAM;IACjB,OAAO,MAAM,IAAI,QAAqB,CAAC,SAAS;QAC/C,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;QACT;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,MAAM,MAAM,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC;QAC3C,IAAI,SAAS,GAAG,IAAM,QAAQ,AAAC,IAAI,MAAM,IAAyB;QAClE,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe;IACrB,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,KAAK;IACjC;AACD"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/presentation.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\n\nexport type ProjectAsset = {\n\tid: string;\n\tkind: \"pdf\" | \"video\" | \"image\";\n\tfileName: string;\n\tstoredFileName: string; // assets/ 配下のファイル名\n};\n\nexport type AssetRef =\n\t| {\n\t\t\tkind: \"pdf\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tpage: number;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"video\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"image\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  };\n\nexport type SlideNodeData = {\n\tlabel: string;\n\tasset?: AssetRef;\n\t/**\n\t * スライドごとの Wii ボタン割り当て。\n\t * 未設定の場合はデフォルト割り当てを適用する。\n\t */\n\tbindings?: ButtonBindings;\n};\n\nexport type SerializedFlow = {\n\tversion: 1;\n\tassets?: ProjectAsset[];\n\tviewport?: { x: number; y: number; zoom: number };\n\t/**\n\t * プロジェクト全体の Wii ボタン割り当て。\n\t * 未設定の場合はデフォルト割り当てを適用する。\n\t */\n\tprojectBindings?: ButtonBindings;\n\tnodes: Array<{\n\t\tid: string;\n\t\ttype?: string;\n\t\tposition: { x: number; y: number };\n\t\tdata: SlideNodeData;\n\t}>;\n\tedges: Array<{\n\t\tid: string;\n\t\tsource: string;\n\t\ttarget: string;\n\t\tlabel?: string;\n\t}>;\n};\n\nconst STORAGE_KEY = \"wiisugeee.editor.flow.v1\";\nconst LAST_SAVED_HASH_KEY = \"wiisugeee.editor.lastSavedHash.v1\";\n\nexport function serializeFlow(flow: SerializedFlow): string {\n\treturn JSON.stringify(flow, null, 2);\n}\n\nexport function tryParseFlowJson(text: string): SerializedFlow | null {\n\ttry {\n\t\tconst parsed = JSON.parse(text) as unknown;\n\t\tif (!parsed || typeof parsed !== \"object\") return null;\n\t\tconst maybe = parsed as Partial<SerializedFlow>;\n\t\tif (maybe.version !== 1) return null;\n\t\tif (!Array.isArray(maybe.nodes) || !Array.isArray(maybe.edges)) return null;\n\t\treturn maybe as SerializedFlow;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function saveToLocalStorage(flow: SerializedFlow): void {\n\ttry {\n\t\tlocalStorage.setItem(STORAGE_KEY, serializeFlow(flow));\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function loadFromLocalStorage(): SerializedFlow | null {\n\ttry {\n\t\tconst text = localStorage.getItem(STORAGE_KEY);\n\t\tif (!text) return null;\n\t\treturn tryParseFlowJson(text);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getLastSavedHash(): string | null {\n\ttry {\n\t\treturn localStorage.getItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function setLastSavedHash(hash: string): void {\n\ttry {\n\t\tlocalStorage.setItem(LAST_SAVED_HASH_KEY, hash);\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function clearEditorStorage(): void {\n\ttry {\n\t\tlocalStorage.removeItem(STORAGE_KEY);\n\t\tlocalStorage.removeItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\t// ignore\n\t}\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AA+DA,MAAM,cAAc;AACpB,MAAM,sBAAsB;AAErB,SAAS,cAAc,IAAoB;IACjD,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU,OAAO;QAClD,MAAM,QAAQ;QACd,IAAI,MAAM,OAAO,KAAK,GAAG,OAAO;QAChC,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,GAAG,OAAO;QACvE,OAAO;IACR,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,mBAAmB,IAAoB;IACtD,IAAI;QACH,aAAa,OAAO,CAAC,aAAa,cAAc;IACjD,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,iBAAiB;IACzB,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS;IACf,IAAI;QACH,OAAO,aAAa,OAAO,CAAC;IAC7B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,aAAa,OAAO,CAAC,qBAAqB;IAC3C,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IACzB,EAAE,OAAM;IACP,SAAS;IACV;AACD"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectBindingsStorage.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\r\n\r\nfunction key(projectId: string) {\r\n    return `wiiSugeee:projectBindings:${projectId}`;\r\n}\r\n\r\nexport function loadProjectBindings(projectId: string): ButtonBindings | undefined {\r\n    try {\r\n        const raw = localStorage.getItem(key(projectId));\r\n        if (!raw) return undefined;\r\n        return JSON.parse(raw) as ButtonBindings;\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport function saveProjectBindings(projectId: string, bindings: ButtonBindings) {\r\n    try {\r\n        localStorage.setItem(key(projectId), JSON.stringify(bindings));\r\n    } catch {\r\n        // ignore\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,IAAI,SAAiB;IAC1B,OAAO,CAAC,0BAA0B,EAAE,WAAW;AACnD;AAEO,SAAS,oBAAoB,SAAiB;IACjD,IAAI;QACA,MAAM,MAAM,aAAa,OAAO,CAAC,IAAI;QACrC,IAAI,CAAC,KAAK,OAAO;QACjB,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEO,SAAS,oBAAoB,SAAiB,EAAE,QAAwB;IAC3E,IAAI;QACA,aAAa,OAAO,CAAC,IAAI,YAAY,KAAK,SAAS,CAAC;IACxD,EAAE,OAAM;IACJ,SAAS;IACb;AACJ"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/currentProjectStore.ts"],"sourcesContent":["import type { SerializedFlow } from \"@/lib/presentation\";\r\nimport type { ButtonBindings } from \"@/lib/buttonBindings\";\r\nimport { loadProjectBindings, saveProjectBindings } from \"@/lib/projectBindingsStorage\";\r\n\r\ntype Listener = () => void;\r\n\r\nlet currentFlow: SerializedFlow | null = null;\r\nlet currentProjectId = \"default\"; // ★追加\r\nconst listeners = new Set<Listener>();\r\n\r\nexport function setCurrentProjectId(projectId: string) {\r\n    currentProjectId = projectId || \"default\";\r\n    for (const l of listeners) l();\r\n}\r\n\r\nexport function getCurrentProjectId() {\r\n    return currentProjectId;\r\n}\r\n\r\nexport function getCurrentFlow(): SerializedFlow | null {\r\n    return currentFlow;\r\n}\r\n\r\nexport function setCurrentFlow(flow: SerializedFlow | null) {\r\n    if (flow) {\r\n        const stored = typeof window !== \"undefined\" ? loadProjectBindings(currentProjectId) : undefined;\r\n        currentFlow = stored ? { ...flow, projectBindings: stored } : flow;\r\n    } else {\r\n        currentFlow = null;\r\n    }\r\n    for (const l of listeners) l();\r\n}\r\n\r\nexport function subscribeCurrentFlow(listener: Listener) {\r\n    listeners.add(listener);\r\n    return () => listeners.delete(listener);\r\n}\r\n\r\nexport function getProjectBindings(): ButtonBindings | undefined {\r\n    // ★修正: currentFlowに無くても localStorage から読めるようにする\r\n    if (currentFlow?.projectBindings) return currentFlow.projectBindings;\r\n    if (typeof window === \"undefined\") return undefined;\r\n    return loadProjectBindings(currentProjectId);\r\n}\r\n\r\nexport function setProjectBindings(bindings: ButtonBindings) {\r\n    // ★修正: currentFlowが無くても保存はできる\r\n    if (currentFlow) {\r\n        currentFlow = { ...currentFlow, projectBindings: bindings };\r\n    }\r\n\r\n    if (typeof window !== \"undefined\") {\r\n        saveProjectBindings(currentProjectId, bindings);\r\n    }\r\n\r\n    for (const l of listeners) l();\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;;AAIA,IAAI,cAAqC;AACzC,IAAI,mBAAmB,WAAW,MAAM;AACxC,MAAM,YAAY,IAAI;AAEf,SAAS,oBAAoB,SAAiB;IACjD,mBAAmB,aAAa;IAChC,KAAK,MAAM,KAAK,UAAW;AAC/B;AAEO,SAAS;IACZ,OAAO;AACX;AAEO,SAAS;IACZ,OAAO;AACX;AAEO,SAAS,eAAe,IAA2B;IACtD,IAAI,MAAM;QACN,MAAM,SAAS,uCAAgC,IAAA,kMAAmB,EAAC,oBAAoB;QACvF,cAAc,SAAS;YAAE,GAAG,IAAI;YAAE,iBAAiB;QAAO,IAAI;IAClE,OAAO;QACH,cAAc;IAClB;IACA,KAAK,MAAM,KAAK,UAAW;AAC/B;AAEO,SAAS,qBAAqB,QAAkB;IACnD,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAClC;AAEO,SAAS;IACZ,gDAAgD;IAChD,IAAI,aAAa,iBAAiB,OAAO,YAAY,eAAe;IACpE;;IACA,OAAO,IAAA,kMAAmB,EAAC;AAC/B;AAEO,SAAS,mBAAmB,QAAwB;IACvD,8BAA8B;IAC9B,IAAI,aAAa;QACb,cAAc;YAAE,GAAG,WAAW;YAAE,iBAAiB;QAAS;IAC9D;IAEA,wCAAmC;QAC/B,IAAA,kMAAmB,EAAC,kBAAkB;IAC1C;IAEA,KAAK,MAAM,KAAK,UAAW;AAC/B"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectArchive.ts"],"sourcesContent":["import JSZip from \"jszip\";\nimport { getAssetBlob, putAssetBlob } from \"@/lib/idbAssets\";\nimport { saveToLocalStorage, tryParseFlowJson, type SerializedFlow } from \"@/lib/presentation\";\nimport { getProjectBindings, getCurrentProjectId } from \"@/lib/currentProjectStore\";\nimport { saveProjectBindings } from \"@/lib/projectBindingsStorage\";\n\nasync function showSaveFilePickerCompat(): Promise<FileSystemFileHandle | null> {\n\tconst w = window as unknown as {\n\t\tshowSaveFilePicker?: (options?: {\n\t\t\tsuggestedName?: string;\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle>;\n\t};\n\tif (!w.showSaveFilePicker) return null;\n\ttry {\n\t\treturn await w.showSaveFilePicker({\n\t\t\tsuggestedName: \"wiislide.zip\",\n\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\tstartIn: \"desktop\",\n\t\t});\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nasync function showOpenFilePickerCompat(): Promise<File | null> {\n\tconst w = window as unknown as {\n\t\tshowOpenFilePicker?: (options?: {\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tmultiple?: boolean;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle[]>;\n\t};\n\tif (w.showOpenFilePicker) {\n\t\ttry {\n\t\t\tconst [handle] = await w.showOpenFilePicker({\n\t\t\t\tmultiple: false,\n\t\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\t\tstartIn: \"desktop\",\n\t\t\t});\n\t\t\tif (!handle) return null;\n\t\t\treturn await handle.getFile();\n\t\t} catch {\n\t\t\t// fallthrough\n\t\t}\n\t}\n\n\treturn await new Promise<File | null>((resolve) => {\n\t\tconst input = document.createElement(\"input\");\n\t\tinput.type = \"file\";\n\t\tinput.accept = \".zip,application/zip\";\n\t\tinput.onchange = () => resolve(input.files?.[0] ?? null);\n\t\tinput.click();\n\t});\n}\n\nfunction downloadBlob(blob: Blob, filename: string) {\n\tconst url = URL.createObjectURL(blob);\n\tconst a = document.createElement(\"a\");\n\ta.href = url;\n\ta.download = filename;\n\ta.click();\n\tURL.revokeObjectURL(url);\n}\n\nexport async function saveProjectAsZip(flow: SerializedFlow): Promise<void> {\n\t// ★追加: localStorageから最新のボタンバインド設定を取得してflowに含める\n\tconst latestBindings = getProjectBindings();\n\tconst flowWithBindings: SerializedFlow = latestBindings\n\t\t? { ...flow, projectBindings: latestBindings }\n\t\t: flow;\n\n\tconst zip = new JSZip();\n\tzip.file(\"project.json\", JSON.stringify(flowWithBindings, null, 2));\n\n\tconst assets = flowWithBindings.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst blob = await getAssetBlob(asset.id);\n\t\tif (!blob) throw new Error(`アセットが見つかりません: ${asset.fileName}`);\n\t\tzip.file(`assets/${asset.storedFileName}`, blob);\n\t}\n\n\tconst zipBlob = await zip.generateAsync({ type: \"blob\" });\n\tconst handle = await showSaveFilePickerCompat();\n\tif (!handle) {\n\t\tdownloadBlob(zipBlob, \"wiislide.zip\");\n\t\treturn;\n\t}\n\tconst writable = await handle.createWritable();\n\tawait writable.write(zipBlob);\n\tawait writable.close();\n}\n\nexport async function loadProjectFromZipFile(file: File): Promise<SerializedFlow> {\n\tconst zip = await JSZip.loadAsync(file);\n\tconst projectText = await zip.file(\"project.json\")?.async(\"string\");\n\tif (!projectText) throw new Error(\"project.json が見つかりません\");\n\n\tconst parsed = tryParseFlowJson(projectText);\n\tif (!parsed) throw new Error(\"project.json の形式が不正です\");\n\n\tconst assets = parsed.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst entry = zip.file(`assets/${asset.storedFileName}`);\n\t\tif (!entry) throw new Error(`assets/${asset.storedFileName} が見つかりません`);\n\t\tconst blob = await entry.async(\"blob\");\n\t\tawait putAssetBlob(asset.id, blob);\n\t}\n\n\t// ★追加: ボタンバインド情報をlocalStorageに保存\n\tif (parsed.projectBindings) {\n\t\tconst projectId = getCurrentProjectId();\n\t\tsaveProjectBindings(projectId, parsed.projectBindings);\n\t\tconsole.log(\"ボタンバインド設定を復元しました:\", projectId, parsed.projectBindings);\n\t}\n\n\tsaveToLocalStorage(parsed);\n\treturn parsed;\n}\n\nexport async function loadProjectFromZip(): Promise<SerializedFlow> {\n\tconst file = await showOpenFilePickerCompat();\n\tif (!file) throw new Error(\"ファイルが選択されませんでした\");\n\treturn await loadProjectFromZipFile(file);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { loadProjectFromZip } from \"@/lib/projectArchive\";\n\nexport default function Home() {\n\tconst router = useRouter();\n\n\tconst onLoadProject = useCallback(async () => {\n\t\ttry {\n\t\t\tawait loadProjectFromZip();\n\t\t\trouter.push(\"/editor\");\n\t\t} catch (e) {\n\t\t\talert(\n\t\t\t\t`読み込みに失敗しました: ${e instanceof Error ? e.message : String(e)}`,\n\t\t\t);\n\t\t}\n\t}, [router]);\n\n\treturn (\n\t\t<main style={{ padding: 16, fontFamily: \"var(--font-geist-sans)\" }}>\n\t\t\t<h1 style={{ fontSize: 20, fontWeight: 700, marginBottom: 12 }}>Wii Presenter</h1>\n\t\t\t<ul style={{ lineHeight: 1.8 }}>\n\t\t\t\t<li>\n\t\t\t\t\t<Link href=\"/editor\">エディタを開く</Link>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<Link href=\"/present\">発表モードを開く</Link>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<Link href=\"/settings\">設定を開く</Link>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<button onClick={onLoadProject}>wiislide.zip を読み込み</button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<p style={{ marginTop: 12, opacity: 0.75, fontSize: 12 }}>\n\t\t\t\t保存した <code>wiislide.zip</code> をそのまま選択して読み込みます（展開不要）。\n\t\t\t</p>\n\t\t</main>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACvB,MAAM,SAAS,IAAA,sLAAS;IAExB,MAAM,gBAAgB,IAAA,gNAAW;2CAAC;YACjC,IAAI;gBACH,MAAM,IAAA,yLAAkB;gBACxB,OAAO,IAAI,CAAC;YACb,EAAE,OAAO,GAAG;gBACX,MACC,CAAC,aAAa,EAAE,aAAa,QAAQ,EAAE,OAAO,GAAG,OAAO,IAAI;YAE9D;QACD;0CAAG;QAAC;KAAO;IAEX,qBACC,iOAAC;QAAK,OAAO;YAAE,SAAS;YAAI,YAAY;QAAyB;;0BAChE,iOAAC;gBAAG,OAAO;oBAAE,UAAU;oBAAI,YAAY;oBAAK,cAAc;gBAAG;0BAAG;;;;;;0BAChE,iOAAC;gBAAG,OAAO;oBAAE,YAAY;gBAAI;;kCAC5B,iOAAC;kCACA,cAAA,iOAAC,8MAAI;4BAAC,MAAK;sCAAU;;;;;;;;;;;kCAEtB,iOAAC;kCACA,cAAA,iOAAC,8MAAI;4BAAC,MAAK;sCAAW;;;;;;;;;;;kCAEvB,iOAAC;kCACA,cAAA,iOAAC,8MAAI;4BAAC,MAAK;sCAAY;;;;;;;;;;;kCAExB,iOAAC;kCACA,cAAA,iOAAC;4BAAO,SAAS;sCAAe;;;;;;;;;;;;;;;;;0BAGlC,iOAAC;gBAAE,OAAO;oBAAE,WAAW;oBAAI,SAAS;oBAAM,UAAU;gBAAG;;oBAAG;kCACpD,iOAAC;kCAAK;;;;;;oBAAmB;;;;;;;;;;;;;AAIlC;GApCwB;;QACR,sLAAS;;;KADD"}}]
}