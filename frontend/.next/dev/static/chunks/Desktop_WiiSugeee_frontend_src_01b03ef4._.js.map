{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/presentation.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\n\nexport type ProjectAsset = {\n\tid: string;\n\tkind: \"pdf\" | \"video\" | \"image\";\n\tfileName: string;\n\tstoredFileName: string; // assets/ ÈÖç‰∏ã„ÅÆ„Éï„Ç°„Ç§„É´Âêç\n};\n\nexport type AssetRef =\n\t| {\n\t\t\tkind: \"pdf\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tpage: number;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"video\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"image\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  };\n\nexport type SlideNodeData = {\n\tlabel: string;\n\tasset?: AssetRef;\n\t/**\n\t * „Çπ„É©„Ç§„Éâ„Åî„Å®„ÅÆ Wii „Éú„Çø„É≥Ââ≤„ÇäÂΩì„Å¶„ÄÇ\n\t * Êú™Ë®≠ÂÆö„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÂâ≤„ÇäÂΩì„Å¶„ÇíÈÅ©Áî®„Åô„Çã„ÄÇ\n\t */\n\tbindings?: ButtonBindings;\n};\n\nexport type SerializedFlow = {\n\tversion: 1;\n\tassets?: ProjectAsset[];\n\tviewport?: { x: number; y: number; zoom: number };\n\t/**\n\t * „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÖ®‰Ωì„ÅÆ Wii „Éú„Çø„É≥Ââ≤„ÇäÂΩì„Å¶„ÄÇ\n\t * Êú™Ë®≠ÂÆö„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÂâ≤„ÇäÂΩì„Å¶„ÇíÈÅ©Áî®„Åô„Çã„ÄÇ\n\t */\n\tprojectBindings?: ButtonBindings;\n\tnodes: Array<{\n\t\tid: string;\n\t\ttype?: string;\n\t\tposition: { x: number; y: number };\n\t\tdata: SlideNodeData;\n\t}>;\n\tedges: Array<{\n\t\tid: string;\n\t\tsource: string;\n\t\ttarget: string;\n\t\tlabel?: string;\n\t}>;\n};\n\nconst STORAGE_KEY = \"wiisugeee.editor.flow.v1\";\nconst LAST_SAVED_HASH_KEY = \"wiisugeee.editor.lastSavedHash.v1\";\n\nexport function serializeFlow(flow: SerializedFlow): string {\n\treturn JSON.stringify(flow, null, 2);\n}\n\nexport function tryParseFlowJson(text: string): SerializedFlow | null {\n\ttry {\n\t\tconst parsed = JSON.parse(text) as unknown;\n\t\tif (!parsed || typeof parsed !== \"object\") return null;\n\t\tconst maybe = parsed as Partial<SerializedFlow>;\n\t\tif (maybe.version !== 1) return null;\n\t\tif (!Array.isArray(maybe.nodes) || !Array.isArray(maybe.edges)) return null;\n\t\treturn maybe as SerializedFlow;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function saveToLocalStorage(flow: SerializedFlow): void {\n\ttry {\n\t\tlocalStorage.setItem(STORAGE_KEY, serializeFlow(flow));\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function loadFromLocalStorage(): SerializedFlow | null {\n\ttry {\n\t\tconst text = localStorage.getItem(STORAGE_KEY);\n\t\tif (!text) return null;\n\t\treturn tryParseFlowJson(text);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getLastSavedHash(): string | null {\n\ttry {\n\t\treturn localStorage.getItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function setLastSavedHash(hash: string): void {\n\ttry {\n\t\tlocalStorage.setItem(LAST_SAVED_HASH_KEY, hash);\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function clearEditorStorage(): void {\n\ttry {\n\t\tlocalStorage.removeItem(STORAGE_KEY);\n\t\tlocalStorage.removeItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\t// ignore\n\t}\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AA+DA,MAAM,cAAc;AACpB,MAAM,sBAAsB;AAErB,SAAS,cAAc,IAAoB;IACjD,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU,OAAO;QAClD,MAAM,QAAQ;QACd,IAAI,MAAM,OAAO,KAAK,GAAG,OAAO;QAChC,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,GAAG,OAAO;QACvE,OAAO;IACR,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,mBAAmB,IAAoB;IACtD,IAAI;QACH,aAAa,OAAO,CAAC,aAAa,cAAc;IACjD,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,iBAAiB;IACzB,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS;IACf,IAAI;QACH,OAAO,aAAa,OAAO,CAAC;IAC7B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,aAAa,OAAO,CAAC,qBAAqB;IAC3C,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IACzB,EAAE,OAAM;IACP,SAAS;IACV;AACD"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/idbAssets.ts"],"sourcesContent":["const DB_NAME = \"wiislide\";\nconst DB_VERSION = 1;\nconst STORE_NAME = \"assets\";\n\nfunction openDb(): Promise<IDBDatabase> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst req = indexedDB.open(DB_NAME, DB_VERSION);\n\t\treq.onupgradeneeded = () => {\n\t\t\tconst db = req.result;\n\t\t\tif (!db.objectStoreNames.contains(STORE_NAME)) {\n\t\t\t\tdb.createObjectStore(STORE_NAME);\n\t\t\t}\n\t\t};\n\t\treq.onsuccess = () => resolve(req.result);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function putAssetBlob(assetId: string, blob: Blob): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).put(blob, assetId);\n\t});\n}\n\nexport async function getAssetBlob(assetId: string): Promise<Blob | null> {\n\tconst db = await openDb();\n\treturn await new Promise<Blob | null>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readonly\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\tconst req = tx.objectStore(STORE_NAME).get(assetId);\n\t\treq.onsuccess = () => resolve((req.result as Blob | undefined) ?? null);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function clearAllAssetBlobs(): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).clear();\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB,SAAS;IACR,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,MAAM,UAAU,IAAI,CAAC,SAAS;QACpC,IAAI,eAAe,GAAG;YACrB,MAAM,KAAK,IAAI,MAAM;YACrB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC9C,GAAG,iBAAiB,CAAC;YACtB;QACD;QACA,IAAI,SAAS,GAAG,IAAM,QAAQ,IAAI,MAAM;QACxC,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe,aAAa,OAAe,EAAE,IAAU;IAC7D,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC,MAAM;IACtC;AACD;AAEO,eAAe,aAAa,OAAe;IACjD,MAAM,KAAK,MAAM;IACjB,OAAO,MAAM,IAAI,QAAqB,CAAC,SAAS;QAC/C,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;QACT;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,MAAM,MAAM,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC;QAC3C,IAAI,SAAS,GAAG,IAAM,QAAQ,AAAC,IAAI,MAAM,IAAyB;QAClE,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe;IACrB,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,KAAK;IACjC;AACD"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/hooks/useWiiController.ts"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nexport type WiiState = {\r\n\tbuttons: {\r\n\t\tA: boolean;\r\n\t\tB: boolean;\r\n\t\tOne: boolean;\r\n\t\tTwo: boolean;\r\n\t\tPlus: boolean;\r\n\t\tMinus: boolean;\r\n\t\tHome: boolean;\r\n\t\tUp: boolean;\r\n\t\tDown: boolean;\r\n\t\tRight: boolean;\r\n\t\tLeft: boolean;\r\n\t};\r\n\taccel: { x: number; y: number; z: number };\r\n\tir: { x: number; y: number }[];\r\n};\r\n\r\ntype WiiServerMessage =\r\n\t| { type: \"status\"; connected: boolean }\r\n\t| { type: \"wiiDisconnected\"; at?: number }\r\n\t| WiiState;\r\n\r\nconst EMPTY_BUTTONS: WiiState[\"buttons\"] = {\r\n\tA: false,\r\n\tB: false,\r\n\tOne: false,\r\n\tTwo: false,\r\n\tPlus: false,\r\n\tMinus: false,\r\n\tHome: false,\r\n\tUp: false,\r\n\tDown: false,\r\n\tRight: false,\r\n\tLeft: false,\r\n};\r\n\r\nfunction keyToButton(key: string): keyof WiiState[\"buttons\"] | null {\r\n\t// e.key „ÅØÁí∞Â¢ÉÂ∑Æ„ÅåÂá∫„Çã„ÅÆ„Åß„ÄÅÊñáÂ≠ó„ÅØÂ∞èÊñáÂ≠óÂåñ„Åó„Å¶Âà§ÂÆö\r\n\tconst k = key.length === 1 ? key.toLowerCase() : key;\r\n\r\n\tswitch (k) {\r\n\t\t// D-Pad (I J K L)\r\n\t\tcase \"i\":\r\n\t\t\treturn \"Up\";\r\n\t\tcase \"j\":\r\n\t\t\treturn \"Left\";\r\n\t\tcase \"k\":\r\n\t\t\treturn \"Down\";\r\n\t\tcase \"l\":\r\n\t\t\treturn \"Right\";\r\n\r\n\t\t// + ;  / - -\r\n\t\tcase \";\":\r\n\t\t\treturn \"Plus\";\r\n\t\tcase \"-\":\r\n\t\t\treturn \"Minus\";\r\n\r\n\t\t// Home / A / B\r\n\t\tcase \"h\":\r\n\t\t\treturn \"Home\";\r\n\t\tcase \"o\":\r\n\t\t\treturn \"A\";\r\n\t\tcase \"p\":\r\n\t\t\treturn \"B\";\r\n\r\n\t\t// 1 / 2Ôºà„É™„Ç¢„ÇØ„Ç∑„Éß„É≥„Å´„ÇÇ‰Ωø„ÅÜÔºâ\r\n\t\tcase \"n\":\r\n\t\t\treturn \"One\";\r\n\t\tcase \"m\":\r\n\t\t\treturn \"Two\";\r\n\r\n\t\tdefault:\r\n\t\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport function useWiiController() {\r\n\tconst [wiiState, setWiiState] = useState<WiiState | null>(null);\r\n\tconst [wiiConnected, setWiiConnected] = useState(false);\r\n\t// ‚òÖËøΩÂä†: backend„Åã„ÇâÊù•„ÅüÂàáÊñ≠„Ç§„Éô„É≥„Éà„ÅÆ„Çø„Ç§„É†„Çπ„Çø„É≥„ÉóÔºàÊõ¥Êñ∞„Åï„Çå„Çã„Åü„Å≥„Å´„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó„ÇíÈñã„ÅèÔºâ\r\n\tconst [wiiDisconnectedAt, setWiiDisconnectedAt] = useState<number | null>(null);\r\n\r\n\t// ‚òÖËøΩÂä†: „Äå‰∏ÄÂ∫¶„Åß„ÇÇÊ≠£Â∏∏„Å´Êé•Á∂ö„Åß„Åç„Å¶„ÅÑ„Åü„Åã„Äç„Çí‰øùÊåÅÔºàÊé•Á∂öÂ§±Êïó„ÅÆË™§ÁàÜÈò≤Ê≠¢Ôºâ\r\n\tconst wasConnectedRef = useRef(false);\r\n\r\n\t// „Äå„Åì„ÅÆ„Éï„É¨„Éº„É†„ÅßÊäº„Åï„Çå„Åü„ÄçÊÉÖÂ†±ÔºàWii + „Ç≠„Éº„Éú„Éº„ÉâÂêàÊàêÔºâ\r\n\tconst [pressed, setPressed] = useState<Partial<WiiState[\"buttons\"]>>({});\r\n\r\n\t// --- Wii „Åã„ÇâÊù•„ÇãÊäº‰∏ã„Éà„É™„Ç¨„ÉºÁî® ---\r\n\tconst pressedBufferRef = useRef<Partial<WiiState[\"buttons\"]>>({});\r\n\tconst prevButtonsRef = useRef<WiiState[\"buttons\"] | null>(null);\r\n\tconst lastUpdateRef = useRef<number>(0);\r\n\r\n\t// --- „Ç≠„Éº„Éú„Éº„Éâ„ÅÆÊäº‰∏ãÁä∂ÊÖãÔºà„Éõ„Éº„É´„ÉâÔºâ ---\r\n\tconst kbButtonsRef = useRef<WiiState[\"buttons\"]>({ ...EMPTY_BUTTONS });\r\n\t// „Ç≠„Éº„Éú„Éº„Éâ„ÅÆ„Äå„Åì„ÅÆ„Éï„É¨„Éº„É†„ÅßÊäº„Åï„Çå„Åü„Äç\r\n\tconst kbPressedBufferRef = useRef<Partial<WiiState[\"buttons\"]>>({});\r\n\r\n\t// „Ç≠„Éº„Éú„Éº„Éâ„Ç§„Éô„É≥„ÉàË≥ºË™≠\r\n\tuseEffect(() => {\r\n\t\tconst onKeyDown = (e: KeyboardEvent) => {\r\n\t\t\tif (e.repeat) return;\r\n\t\t\tconst btn = keyToButton(e.key);\r\n\t\t\tif (!btn) return;\r\n\r\n\t\t\t// ÂÖ•Âäõ„ÇíÂ•™„ÅÑ„Åü„ÅÑÂ†¥Âêà„Å†„Åë preventDefaultÔºàÂøÖË¶Å„Å™„ÇâÂ§ñ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºâ\r\n\t\t\t// e.preventDefault();\r\n\r\n\t\t\tkbButtonsRef.current = { ...kbButtonsRef.current, [btn]: true };\r\n\t\t\tkbPressedBufferRef.current[btn] = true;\r\n\t\t};\r\n\r\n\t\tconst onKeyUp = (e: KeyboardEvent) => {\r\n\t\t\tconst btn = keyToButton(e.key);\r\n\t\t\tif (!btn) return;\r\n\t\t\tkbButtonsRef.current = { ...kbButtonsRef.current, [btn]: false };\r\n\t\t};\r\n\r\n\t\twindow.addEventListener(\"keydown\", onKeyDown);\r\n\t\twindow.addEventListener(\"keyup\", onKeyUp);\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"keydown\", onKeyDown);\r\n\t\t\twindow.removeEventListener(\"keyup\", onKeyUp);\r\n\t\t};\r\n\t}, []);\r\n\r\n\t// WebSocket (Wii)\r\n\tuseEffect(() => {\r\n\t\tconst ws = new WebSocket(\"ws://localhost:8080\");\r\n\r\n\t\tws.onopen = () => {\r\n\t\t\tconsole.log(\"Connected to Wii Server\");\r\n\t\t};\r\n\r\n\t\tws.onmessage = (event) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst msg = JSON.parse(event.data) as WiiServerMessage;\r\n\r\n\t\t\t\tif (msg && typeof msg === \"object\" && \"type\" in msg) {\r\n\t\t\t\t\tconst t = (msg as any).type;\r\n\r\n\t\t\t\t\tif (t === \"status\") {\r\n\t\t\t\t\t\tconst connected = !!(msg as any).connected;\r\n\t\t\t\t\t\tsetWiiConnected(connected);\r\n\t\t\t\t\t\twasConnectedRef.current = connected; // ‚òÖËøΩÂä†\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (t === \"wiiDisconnected\") {\r\n\t\t\t\t\t\tsetWiiConnected(false);\r\n\t\t\t\t\t\twasConnectedRef.current = false; // ‚òÖËøΩÂä†\r\n\t\t\t\t\t\tsetWiiDisconnectedAt(typeof (msg as any).at === \"number\" ? (msg as any).at : Date.now());\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst data = msg as WiiState;\r\n\t\t\t\tconst now = performance.now();\r\n\r\n\t\t\t\tsetWiiConnected(true);\r\n\t\t\t\twasConnectedRef.current = true; // ‚òÖËøΩÂä†: „Éá„Éº„Çø„ÅåÊù•„Å¶„ÅÑ„Çã=Êé•Á∂ö„Åß„Åç„Å¶„ÅÑ„Çã\r\n\r\n\t\t\t\t// WiiÂÅ¥„ÅÆ„ÄåÊäº„Åï„Çå„ÅüÁû¨Èñì„ÄçÊ§úÁü•\r\n\t\t\t\tif (prevButtonsRef.current) {\r\n\t\t\t\t\t(Object.keys(data.buttons) as Array<keyof WiiState[\"buttons\"]>).forEach((key) => {\r\n\t\t\t\t\t\tif (data.buttons[key] && !prevButtonsRef.current![key]) {\r\n\t\t\t\t\t\t\tpressedBufferRef.current[key] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tprevButtonsRef.current = data.buttons;\r\n\r\n\t\t\t\t// Êõ¥Êñ∞È†ªÂ∫¶Âà∂ÈôêÔºà„Åü„Å†„ÅóÂ∏∏„Å´ÊúÄÊñ∞„Éá„Éº„Çø„ÇíÂèçÊò†Ôºâ\r\n\t\t\t\tconst shouldUpdate = now - lastUpdateRef.current > 33;\r\n\t\t\t\tflushState(data);\r\n\t\t\t\tif (shouldUpdate) {\r\n\t\t\t\t\tlastUpdateRef.current = now;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"Parse error:\", e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// ‚òÖ‰øÆÊ≠£: „ÄåÊé•Á∂ö‰∏≠„Å´Âàá„Çå„Åü„ÄçÂ†¥Âêà„Å†„Åë disconnect Êâ±„ÅÑ„Å´„Åô„ÇãÔºàÊé•Á∂öÂ§±Êïó„ÅÆË™§ÁàÜÈò≤Ê≠¢Ôºâ\r\n\t\tws.onerror = () => {\r\n\t\t\tconst wasConnected = wasConnectedRef.current;\r\n\t\t\tsetWiiConnected(false);\r\n\t\t\twasConnectedRef.current = false;\r\n\r\n\t\t\tif (wasConnected) {\r\n\t\t\t\tsetWiiDisconnectedAt(Date.now());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tws.onclose = () => {\r\n\t\t\tconst wasConnected = wasConnectedRef.current;\r\n\t\t\tsetWiiConnected(false);\r\n\t\t\twasConnectedRef.current = false;\r\n\r\n\t\t\tif (wasConnected) {\r\n\t\t\t\tsetWiiDisconnectedAt(Date.now());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn () => {\r\n\t\t\ttry {\r\n\t\t\t\tws.close();\r\n\t\t\t} catch {}\r\n\t\t};\r\n\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// Wii„Åã„ÇâÊù•„Å™„ÅÑÂ†¥Âêà„Åß„ÇÇ„ÄÅ„Ç≠„Éº„Éú„Éº„Éâ„ÅÆÂ§âÂåñ„Åß state/pressed „ÇíÊõ¥Êñ∞„Åô„Çã„Åü„ÇÅ„ÅÆ tick\r\n\tuseEffect(() => {\r\n\t\tlet raf = 0;\r\n\r\n\t\tconst loop = () => {\r\n\t\t\tflushState(null);\r\n\t\t\traf = window.requestAnimationFrame(loop);\r\n\t\t};\r\n\r\n\t\traf = window.requestAnimationFrame(loop);\r\n\t\treturn () => window.cancelAnimationFrame(raf);\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst flushState = (wiiDataOrNull: WiiState | null) => {\r\n\t\t// „ÇΩ„Éº„Çπ„ÅÆ buttons „ÇíÂêàÊàêÔºàWii„Åå„ÅÇ„Çå„Å∞ OR„ÄÅ„Å™„Åë„Çå„Å∞„Ç≠„Éº„Éú„Éº„Éâ„ÅÆ„ÅøÔºâ\r\n\t\tconst wiiButtons = wiiDataOrNull?.buttons ?? null;\r\n\t\tconst kbButtons = kbButtonsRef.current;\r\n\r\n\t\tconst mergedButtons: WiiState[\"buttons\"] = {\r\n\t\t\tA: (wiiButtons?.A ?? false) || kbButtons.A,\r\n\t\t\tB: (wiiButtons?.B ?? false) || kbButtons.B,\r\n\t\t\tOne: (wiiButtons?.One ?? false) || kbButtons.One,\r\n\t\t\tTwo: (wiiButtons?.Two ?? false) || kbButtons.Two,\r\n\t\t\tPlus: (wiiButtons?.Plus ?? false) || kbButtons.Plus,\r\n\t\t\tMinus: (wiiButtons?.Minus ?? false) || kbButtons.Minus,\r\n\t\t\tHome: (wiiButtons?.Home ?? false) || kbButtons.Home,\r\n\t\t\tUp: (wiiButtons?.Up ?? false) || kbButtons.Up,\r\n\t\t\tDown: (wiiButtons?.Down ?? false) || kbButtons.Down,\r\n\t\t\tRight: (wiiButtons?.Right ?? false) || kbButtons.Right,\r\n\t\t\tLeft: (wiiButtons?.Left ?? false) || kbButtons.Left,\r\n\t\t};\r\n\r\n\t\t// „Äå„Åì„ÅÆ„Éï„É¨„Éº„É†„ÅßÊäº„Åï„Çå„Åü„Äç„ÇÇÂêàÊàê„Åó„Å¶Âêê„Åè\r\n\t\tconst mergedPressed: Partial<WiiState[\"buttons\"]> = {\r\n\t\t\t...pressedBufferRef.current,\r\n\t\t\t...kbPressedBufferRef.current,\r\n\t\t};\r\n\t\tpressedBufferRef.current = {};\r\n\t\tkbPressedBufferRef.current = {};\r\n\r\n\t\t// accel/ir „ÅØ Wii „ÅåÁÑ°„Åë„Çå„Å∞„ÉÄ„Éü„Éº\r\n\t\tconst mergedState: WiiState = {\r\n\t\t\tbuttons: mergedButtons,\r\n\t\t\taccel: wiiDataOrNull?.accel ?? { x: 0, y: 0, z: 0 },\r\n\t\t\tir: wiiDataOrNull?.ir ?? [],\r\n\t\t};\r\n\r\n\t\tsetWiiState(mergedState);\r\n\t\tsetPressed(mergedPressed);\r\n\t};\r\n\r\n\treturn {\r\n\t\twiiState,\r\n\t\tpressed,\r\n\t\twiiConnected,\r\n\t\twiiDisconnectedAt,\r\n\t};\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/presenter/ReactionOverlay.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype ReactionType = \"clap\" | \"laugh\";\r\n\r\ntype Reaction = {\r\n    id: string;\r\n    type: ReactionType;\r\n    createdAt: number;\r\n    x: number; // 0..1 (È†òÂüüÂÜÖ„ÅÆÊ®™ÊñπÂêë)\r\n    size: number; // px\r\n    durationMs: number;\r\n    rotateDeg: number;\r\n};\r\n\r\nexport function ReactionOverlay(props: {\r\n    emitClap?: boolean;\r\n    emitLaugh?: boolean;\r\n}) {\r\n    const { emitClap, emitLaugh } = props;\r\n    const [items, setItems] = useState<Reaction[]>([]);\r\n\r\n    const add = (type: ReactionType) => {\r\n        const now = Date.now();\r\n        const r: Reaction = {\r\n            id: `${now}-${Math.random().toString(16).slice(2)}`,\r\n            type,\r\n            createdAt: now,\r\n            // Âè≥‰∏ã„ÅÆÁã≠„ÅÑÁØÑÂõ≤„ÅßÂ∞ë„Åó„Å†„ÅëÂ∑¶Âè≥„Å´Êï£„ÇãÔºà„Ç§„É≥„Çπ„Çø„ÅÆ„Éè„Éº„Éà„Å£„ÅΩ„ÅïÔºâ\r\n            x: 0.65 + Math.random() * 0.3,\r\n            size: 26 + Math.floor(Math.random() * 18),\r\n            durationMs: 1200 + Math.floor(Math.random() * 700),\r\n            rotateDeg: -10 + Math.random() * 20,\r\n        };\r\n        setItems((prev) => [...prev, r]);\r\n    };\r\n\r\n    // „Äå„Åù„ÅÆ„Éï„É¨„Éº„É†„Å†„Åë true„Äç„ÅåÊù•„ÇãÂâçÊèêÔºàpressed.* „Çí„Åù„ÅÆ„Åæ„ÅæÊ∏°„Åõ„Å∞OKÔºâ\r\n    useEffect(() => {\r\n        if (emitClap) add(\"clap\");\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [emitClap]);\r\n\r\n    useEffect(() => {\r\n        if (emitLaugh) add(\"laugh\");\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [emitLaugh]);\r\n\r\n    // ÊéÉÈô§\r\n    useEffect(() => {\r\n        const t = setInterval(() => {\r\n            const now = Date.now();\r\n            setItems((prev) => prev.filter((r) => now - r.createdAt < r.durationMs + 250));\r\n        }, 250);\r\n        return () => clearInterval(t);\r\n    }, []);\r\n\r\n    return (\r\n        <div\r\n            aria-hidden\r\n            style={{\r\n                position: \"absolute\",\r\n                right: 24,\r\n                bottom: 24,\r\n                width: 240,\r\n                height: 280,\r\n                pointerEvents: \"none\",\r\n                overflow: \"hidden\",\r\n                zIndex: 10001, // „Çπ„É©„Ç§„Éâ„Çà„ÇäÂâç„ÄÅÊàª„Çã„Éú„Çø„É≥„Å®ÂêåÁ≠â„Çà„ÇäÂ∞ë„Åó‰∏ä\r\n            }}\r\n        >\r\n            {items.map((r) => (\r\n                <ReactionItem key={r.id} r={r} />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ReactionItem({ r }: { r: Reaction }) {\r\n    const glyph = r.type === \"clap\" ? \"üëè\" : \"üòÜ\";\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                position: \"absolute\",\r\n                bottom: 0,\r\n                left: `${Math.round(r.x * 100)}%`,\r\n                fontSize: r.size,\r\n                transform: `translateX(-50%) rotate(${r.rotateDeg}deg)`,\r\n                willChange: \"transform, opacity\",\r\n                animation: `reaction-float ${r.durationMs}ms ease-out forwards`,\r\n                filter: \"drop-shadow(0 8px 12px rgba(0,0,0,0.35))\",\r\n                userSelect: \"none\",\r\n            }}\r\n        >\r\n            {glyph}\r\n            <style jsx>{`\r\n                @keyframes reaction-float {\r\n                    0% {\r\n                        opacity: 0;\r\n                        transform: translateX(-50%) translateY(14px) scale(0.9) rotate(${r.rotateDeg}deg);\r\n                    }\r\n                    12% {\r\n                        opacity: 0.95;\r\n                        transform: translateX(-50%) translateY(0px) scale(1) rotate(${r.rotateDeg}deg);\r\n                    }\r\n                    100% {\r\n                        opacity: 0;\r\n                        transform: translateX(-50%) translateY(-170px) scale(1.08) rotate(${r.rotateDeg}deg);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;;AAEA;;;AAFA;;;AAgBO,SAAS,gBAAgB,KAG/B;;IACG,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG;IAChC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6MAAQ,EAAa,EAAE;IAEjD,MAAM,MAAM,CAAC;QACT,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,IAAc;YAChB,IAAI,GAAG,IAAI,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAI;YACnD;YACA,WAAW;YACX,iCAAiC;YACjC,GAAG,OAAO,KAAK,MAAM,KAAK;YAC1B,MAAM,KAAK,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;YACtC,YAAY,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;YAC9C,WAAW,CAAC,KAAK,KAAK,MAAM,KAAK;QACrC;QACA,SAAS,CAAC,OAAS;mBAAI;gBAAM;aAAE;IACnC;IAEA,6CAA6C;IAC7C,IAAA,8MAAS;qCAAC;YACN,IAAI,UAAU,IAAI;QAClB,uDAAuD;QAC3D;oCAAG;QAAC;KAAS;IAEb,IAAA,8MAAS;qCAAC;YACN,IAAI,WAAW,IAAI;QACnB,uDAAuD;QAC3D;oCAAG;QAAC;KAAU;IAEd,KAAK;IACL,IAAA,8MAAS;qCAAC;YACN,MAAM,IAAI;+CAAY;oBAClB,MAAM,MAAM,KAAK,GAAG;oBACpB;uDAAS,CAAC,OAAS,KAAK,MAAM;+DAAC,CAAC,IAAM,MAAM,EAAE,SAAS,GAAG,EAAE,UAAU,GAAG;;;gBAC7E;8CAAG;YACH;6CAAO,IAAM,cAAc;;QAC/B;oCAAG,EAAE;IAEL,qBACI,iOAAC;QACG,aAAW;QACX,OAAO;YACH,UAAU;YACV,OAAO;YACP,QAAQ;YACR,OAAO;YACP,QAAQ;YACR,eAAe;YACf,UAAU;YACV,QAAQ;QACZ;kBAEC,MAAM,GAAG,CAAC,CAAC,kBACR,iOAAC;gBAAwB,GAAG;eAAT,EAAE,EAAE;;;;;;;;;;AAIvC;GA7DgB;KAAA;AA+DhB,SAAS,aAAa,EAAE,CAAC,EAAmB;IACxC,MAAM,QAAQ,EAAE,IAAI,KAAK,SAAS,OAAO;IAEzC,qBACI,iOAAC;QACG,OAAO;YACH,UAAU;YACV,QAAQ;YACR,MAAM,GAAG,KAAK,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC;YACjC,UAAU,EAAE,IAAI;YAChB,WAAW,CAAC,wBAAwB,EAAE,EAAE,SAAS,CAAC,IAAI,CAAC;YACvD,YAAY;YACZ,WAAW,CAAC,eAAe,EAAE,EAAE,UAAU,CAAC,oBAAoB,CAAC;YAC/D,QAAQ;YACR,YAAY;QAChB;;;;;oBAO6E,EAAE,SAAS;oBAId,EAAE,SAAS;oBAIL,EAAE,SAAS;;;;;YAb1F;;;;oBAK4E,EAAE,SAAS;oBAId,EAAE,SAAS;oBAIL,EAAE,SAAS;;8HARd,EAAE,SAAS,gFAId,EAAE,SAAS,mFAIL,EAAE,SAAS;;;;;;;;AAMvG;MApCS"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/buttonBindings.ts"],"sourcesContent":["import type { WiiState } from \"@/hooks/useWiiController\";\r\n\r\nexport type WiiButton = keyof WiiState[\"buttons\"];\r\n\r\nexport type BindingAction =\r\n\t| { type: \"none\" }\r\n\t| { type: \"next\" }\r\n\t| { type: \"prev\" }\r\n\t| { type: \"branch\"; kind: \"A\" | \"B\" | \"HOME\" }\r\n\t| { type: \"branchIndex\"; index: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 }\r\n\t| { type: \"reaction\"; kind: \"clap\" | \"laugh\" }\r\n\t| { type: \"paint\" }\r\n\t| { type: \"sound\"; kind: \"shot\" | \"oh\" | \"uxo\" }\r\n\t| { type: \"remove\" };\r\n\r\nexport type ButtonBindings = Partial<Record<WiiButton, BindingAction>>;\r\n\r\nexport const DEFAULT_BINDINGS: ButtonBindings = {\r\n\tRight: { type: \"next\" },\r\n\tLeft: { type: \"prev\" },\r\n\tPlus: { type: \"branch\", kind: \"A\" },\r\n\tMinus: { type: \"branch\", kind: \"B\" },\r\n\tHome: { type: \"branch\", kind: \"HOME\" },\r\n\tOne: { type: \"reaction\", kind: \"clap\" },\r\n\tTwo: { type: \"reaction\", kind: \"laugh\" },\r\n};\r\n\r\nexport function formatAction(a: BindingAction): string {\r\n\tswitch (a.type) {\r\n\t\tcase \"none\":\r\n\t\t\treturn \"Êú™Ââ≤ÂΩì\";\r\n\t\tcase \"next\":\r\n\t\t\treturn \"Ê¨°„Å∏\";\r\n\t\tcase \"prev\":\r\n\t\t\treturn \"Êàª„Çã\";\r\n\t\tcase \"branch\":\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"A\":\r\n\t\t\t\t\treturn \"A„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"B\":\r\n\t\t\t\t\treturn \"B„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"HOME\":\r\n\t\t\t\t\treturn \"HOME„Å∏Êàª„Çã\";\r\n\t\t\t}\r\n\t\tcase \"branchIndex\":\r\n\t\t\treturn `ÂàÜÂ≤ê ${a.index}`;\r\n\t\tcase \"reaction\":\r\n\t\t\treturn a.kind === \"clap\" ? \"ÊãçÊâã\" : \"Á¨ë„ÅÑ\";\r\n\t\tcase \"paint\":\r\n\t\t\treturn \"PAINTüé®\";\r\n\t\tcase \"sound\":\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"shot\":\r\n\t\t\t\t\treturn \"SHOTüîä\";\r\n\t\t\t\tcase \"oh\":\r\n\t\t\t\t\treturn \"Oh...üîä\";\r\n\t\t\t\tcase \"uxo\":\r\n\t\t\t\t\treturn \"Uxo~üîä\";\r\n\t\t\t}\r\n\t\tcase \"remove\":\r\n\t\t\treturn \"REMOVE\";\r\n\t}\r\n}\r\n\r\nexport function mergeBindings(bindings?: ButtonBindings): ButtonBindings {\r\n\treturn {\r\n\t\t...DEFAULT_BINDINGS,\r\n\t\t...(bindings ?? {}),\r\n\t};\r\n}\r\n\r\nexport function encodeAction(a: BindingAction): string {\r\n\treturn JSON.stringify(a);\r\n}\r\n\r\nexport function decodeAction(s: string): BindingAction {\r\n\treturn JSON.parse(s) as BindingAction;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAiBO,MAAM,mBAAmC;IAC/C,OAAO;QAAE,MAAM;IAAO;IACtB,MAAM;QAAE,MAAM;IAAO;IACrB,MAAM;QAAE,MAAM;QAAU,MAAM;IAAI;IAClC,OAAO;QAAE,MAAM;QAAU,MAAM;IAAI;IACnC,MAAM;QAAE,MAAM;QAAU,MAAM;IAAO;IACrC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAO;IACtC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAQ;AACxC;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAQ,EAAE,IAAI;QACb,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAQ,EAAE,IAAI;gBACb,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;YACT;QACD,KAAK;YACJ,OAAO,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE;QACvB,KAAK;YACJ,OAAO,EAAE,IAAI,KAAK,SAAS,OAAO;QACnC,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAQ,EAAE,IAAI;gBACb,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;YACT;QACD,KAAK;YACJ,OAAO;IACT;AACD;AAEO,SAAS,cAAc,QAAyB;IACtD,OAAO;QACN,GAAG,gBAAgB;QACnB,GAAI,YAAY,CAAC,CAAC;IACnB;AACD;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAO,KAAK,SAAS,CAAC;AACvB;AAEO,SAAS,aAAa,CAAS;IACrC,OAAO,KAAK,KAAK,CAAC;AACnB"}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/presenter/WiiDebugPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport type { WiiState } from \"@/hooks/useWiiController\";\r\nimport type { BindingAction, ButtonBindings } from \"@/lib/buttonBindings\";\r\nimport { formatAction } from \"@/lib/buttonBindings\";\r\n\r\ntype WiiDebugPanelProps = {\r\n\twiiState: WiiState | null;\r\n\tpressed: Record<string, boolean>;\r\n\teffectiveProjectBindings: ButtonBindings;\r\n};\r\n\r\nexport function WiiDebugPanel({ wiiState, pressed, effectiveProjectBindings }: WiiDebugPanelProps) {\r\n\t// Ë°®Á§∫Áî®„ÅÆÂÄ§„Çí‰øùÊåÅ\r\n\tconst [displayAccel, setDisplayAccel] = useState({ x: 0, y: 0, z: 0 });\r\n\tconst displayIrCountRef = useRef(0);\r\n\tconst displayButtonsRef = useRef(\"(none)\");\r\n\tconst displayBindingsRef = useRef<string[]>([]);\r\n\tconst lastAccelUpdateRef = useRef(0);\r\n\r\n\t// Âä†ÈÄüÂ∫¶„Çª„É≥„Çµ„Éº„ÅÆÊõ¥Êñ∞Ôºà200ms„Åî„Å®„Å´Êõ¥Êñ∞Ôºâ\r\n\tuseEffect(() => {\r\n\t\tif (!wiiState || !wiiState.accel) return;\r\n\r\n\t\tconst now = Date.now();\r\n\t\tconst timeSinceLastUpdate = now - lastAccelUpdateRef.current;\r\n\r\n\t\t// 200msÁµåÈÅé„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„ÅøÊõ¥Êñ∞\r\n\t\tif (timeSinceLastUpdate >= 200) {\r\n\t\t\tconst current = wiiState.accel;\r\n\t\t\t\r\n\t\t\t// ÂÖ®„Å¶0„ÅÆÂ†¥Âêà„ÅØÁÑ°Ë¶ñÔºàÁÑ°Âäπ„Å™„Éá„Éº„ÇøÔºâ\r\n\t\t\tif (current.x === 0 && current.y === 0 && current.z === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetDisplayAccel(prev => {\r\n\t\t\t\t// ÂÄ§„ÅåÂ§â„Çè„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„ÅøÊõ¥Êñ∞\r\n\t\t\t\tif (current.x !== prev.x || current.y !== prev.y || current.z !== prev.z) {\r\n\t\t\t\t\tlastAccelUpdateRef.current = now;\r\n\t\t\t\t\treturn { x: current.x, y: current.y, z: current.z };\r\n\t\t\t\t}\r\n\t\t\t\treturn prev;\r\n\t\t\t});\r\n\t\t}\r\n\t}, [wiiState]);\r\n\r\n\t// IR„Ç´„É°„É©„ÅÆÊõ¥Êñ∞Ôºà„É¨„É≥„ÉÄ„É™„É≥„Ç∞‰∏≠„Å´Áõ¥Êé•Êõ¥Êñ∞Ôºâ\r\n\tif (wiiState && wiiState.ir) {\r\n\t\tconst currentCount = wiiState.ir.length;\r\n\t\tconst prevCount = displayIrCountRef.current;\r\n\t\t\r\n\t\tif (currentCount !== prevCount) {\r\n\t\t\tdisplayIrCountRef.current = currentCount;\r\n\t\t}\r\n\t}\r\n\r\n\t// „Éú„Çø„É≥„ÅÆÊõ¥Êñ∞ÔºàÊäº„Åï„Çå„Å¶„ÅÑ„Çã„Éú„Çø„É≥„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅÆ„ÅøÊõ¥Êñ∞Ôºâ\r\n\tconst on: string[] = [];\r\n\tfor (const [btn, isDown] of Object.entries(pressed) as Array<[string, unknown]>) {\r\n\t\tif (isDown) on.push(btn);\r\n\t}\r\n\t// „Éú„Çø„É≥„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„ÅøÊõ¥Êñ∞Ôºà‰Ωï„ÇÇÊäº„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØÂâçÂõû„ÅÆÂÄ§„Çí‰øùÊåÅÔºâ\r\n\tif (on.length > 0) {\r\n\t\tconst currentButtons = on.join(\", \");\r\n\t\tdisplayButtonsRef.current = currentButtons;\r\n\t}\r\n\r\n\t// „Éê„Ç§„É≥„Éá„Ç£„É≥„Ç∞ÊÉÖÂ†±„ÅÆÊõ¥Êñ∞Ôºà„É¨„É≥„ÉÄ„É™„É≥„Ç∞‰∏≠„Å´Áõ¥Êé•Êõ¥Êñ∞Ôºâ\r\n\tconst entries = Object.entries(effectiveProjectBindings) as Array<[string, BindingAction | undefined]>;\r\n\tentries.sort((a, b) => a[0].localeCompare(b[0]));\r\n\tconst currentBindings = entries.map(\r\n\t\t([btn, action]) => `${btn.padEnd(8)} ‚Üí ${action ? formatAction(action) : \"(unassigned)\"}`\r\n\t);\r\n\t\r\n\tconst prevBindings = displayBindingsRef.current;\r\n\tconst hasChanged = \r\n\t\tcurrentBindings.length !== prevBindings.length ||\r\n\t\tcurrentBindings.some((line, i) => line !== prevBindings[i]);\r\n\t\r\n\tif (hasChanged) {\r\n\t\tdisplayBindingsRef.current = currentBindings;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\ttop: 20,\r\n\t\t\t\tright: 20,\r\n\t\t\t\tbackground: \"rgba(0,0,0,0.82)\",\r\n\t\t\t\tcolor: \"#d1fae5\",\r\n\t\t\t\tpadding: \"12px 14px\",\r\n\t\t\t\tborderRadius: 10,\r\n\t\t\t\tfontSize: 14,\r\n\t\t\t\tfontFamily:\r\n\t\t\t\t\t\"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace\",\r\n\t\t\t\tzIndex: 9999,\r\n\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\tminWidth: 360,\r\n\t\t\t\twhiteSpace: \"pre\",\r\n\t\t\t\tlineHeight: 1.35,\r\n\t\t\t\tborder: \"1px solid rgba(255,255,255,0.12)\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div style={{ fontWeight: 800, color: \"#a7f3d0\", marginBottom: 8 }}>Wii Debug</div>\r\n\t\t\t<div style={{ color: \"rgba(209,250,229,0.9)\" }}>\r\n\t\t\t\tAcc: X={String(displayAccel.x).padStart(3)} Y={String(displayAccel.y).padStart(3)} Z={String(\r\n\t\t\t\t\tdisplayAccel.z,\r\n\t\t\t\t).padStart(3)}\r\n\t\t\t</div>\r\n\t\t\t<div style={{ color: \"rgba(209,250,229,0.9)\" }}>IR : {displayIrCountRef.current}</div>\r\n\t\t\t<div style={{ color: \"rgba(209,250,229,0.9)\" }}>{`Btn: ${displayButtonsRef.current}`}</div>\r\n\t\t\t<div style={{ margin: \"10px 0\", borderTop: \"1px solid rgba(255,255,255,0.12)\" }} />\r\n\t\t\t<div style={{ fontWeight: 800, color: \"#a7f3d0\", marginBottom: 6 }}>Bindings (project)</div>\r\n\t\t\t{displayBindingsRef.current.map((line) => (\r\n\t\t\t\t<div key={line}>{line}</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 869, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectBindingsStorage.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\r\n\r\nfunction key(projectId: string) {\r\n    return `wiiSugeee:projectBindings:${projectId}`;\r\n}\r\n\r\nexport function loadProjectBindings(projectId: string): ButtonBindings | undefined {\r\n    try {\r\n        const raw = localStorage.getItem(key(projectId));\r\n        if (!raw) return undefined;\r\n        return JSON.parse(raw) as ButtonBindings;\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport function saveProjectBindings(projectId: string, bindings: ButtonBindings) {\r\n    try {\r\n        localStorage.setItem(key(projectId), JSON.stringify(bindings));\r\n    } catch {\r\n        // ignore\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,IAAI,SAAiB;IAC1B,OAAO,CAAC,0BAA0B,EAAE,WAAW;AACnD;AAEO,SAAS,oBAAoB,SAAiB;IACjD,IAAI;QACA,MAAM,MAAM,aAAa,OAAO,CAAC,IAAI;QACrC,IAAI,CAAC,KAAK,OAAO;QACjB,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEO,SAAS,oBAAoB,SAAiB,EAAE,QAAwB;IAC3E,IAAI;QACA,aAAa,OAAO,CAAC,IAAI,YAAY,KAAK,SAAS,CAAC;IACxD,EAAE,OAAM;IACJ,SAAS;IACb;AACJ"}},
    {"offset": {"line": 901, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/currentProjectStore.ts"],"sourcesContent":["import type { SerializedFlow } from \"@/lib/presentation\";\r\nimport type { ButtonBindings } from \"@/lib/buttonBindings\";\r\nimport { loadProjectBindings, saveProjectBindings } from \"@/lib/projectBindingsStorage\";\r\n\r\ntype Listener = () => void;\r\n\r\nlet currentFlow: SerializedFlow | null = null;\r\nlet currentProjectId = \"default\"; // ‚òÖËøΩÂä†\r\nconst listeners = new Set<Listener>();\r\n\r\nexport function setCurrentProjectId(projectId: string) {\r\n    currentProjectId = projectId || \"default\";\r\n    for (const l of listeners) l();\r\n}\r\n\r\nexport function getCurrentProjectId() {\r\n    return currentProjectId;\r\n}\r\n\r\nexport function getCurrentFlow(): SerializedFlow | null {\r\n    return currentFlow;\r\n}\r\n\r\nexport function setCurrentFlow(flow: SerializedFlow | null) {\r\n    if (flow) {\r\n        const stored = typeof window !== \"undefined\" ? loadProjectBindings(currentProjectId) : undefined;\r\n        currentFlow = stored ? { ...flow, projectBindings: stored } : flow;\r\n    } else {\r\n        currentFlow = null;\r\n    }\r\n    for (const l of listeners) l();\r\n}\r\n\r\nexport function subscribeCurrentFlow(listener: Listener) {\r\n    listeners.add(listener);\r\n    return () => listeners.delete(listener);\r\n}\r\n\r\nexport function getProjectBindings(): ButtonBindings | undefined {\r\n    // ‚òÖ‰øÆÊ≠£: currentFlow„Å´ÁÑ°„Åè„Å¶„ÇÇ localStorage „Åã„ÇâË™≠„ÇÅ„Çã„Çà„ÅÜ„Å´„Åô„Çã\r\n    if (currentFlow?.projectBindings) return currentFlow.projectBindings;\r\n    if (typeof window === \"undefined\") return undefined;\r\n    return loadProjectBindings(currentProjectId);\r\n}\r\n\r\nexport function setProjectBindings(bindings: ButtonBindings) {\r\n    // ‚òÖ‰øÆÊ≠£: currentFlow„ÅåÁÑ°„Åè„Å¶„ÇÇ‰øùÂ≠ò„ÅØ„Åß„Åç„Çã\r\n    if (currentFlow) {\r\n        currentFlow = { ...currentFlow, projectBindings: bindings };\r\n    }\r\n\r\n    if (typeof window !== \"undefined\") {\r\n        saveProjectBindings(currentProjectId, bindings);\r\n    }\r\n\r\n    for (const l of listeners) l();\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA;;AAIA,IAAI,cAAqC;AACzC,IAAI,mBAAmB,WAAW,MAAM;AACxC,MAAM,YAAY,IAAI;AAEf,SAAS,oBAAoB,SAAiB;IACjD,mBAAmB,aAAa;IAChC,KAAK,MAAM,KAAK,UAAW;AAC/B;AAEO,SAAS;IACZ,OAAO;AACX;AAEO,SAAS;IACZ,OAAO;AACX;AAEO,SAAS,eAAe,IAA2B;IACtD,IAAI,MAAM;QACN,MAAM,SAAS,uCAAgC,IAAA,kMAAmB,EAAC,oBAAoB;QACvF,cAAc,SAAS;YAAE,GAAG,IAAI;YAAE,iBAAiB;QAAO,IAAI;IAClE,OAAO;QACH,cAAc;IAClB;IACA,KAAK,MAAM,KAAK,UAAW;AAC/B;AAEO,SAAS,qBAAqB,QAAkB;IACnD,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAClC;AAEO,SAAS;IACZ,gDAAgD;IAChD,IAAI,aAAa,iBAAiB,OAAO,YAAY,eAAe;IACpE;;IACA,OAAO,IAAA,kMAAmB,EAAC;AAC/B;AAEO,SAAS,mBAAmB,QAAwB;IACvD,8BAA8B;IAC9B,IAAI,aAAa;QACb,cAAc;YAAE,GAAG,WAAW;YAAE,iBAAiB;QAAS;IAC9D;IAEA,wCAAmC;QAC/B,IAAA,kMAAmB,EAAC,kBAAkB;IAC1C;IAEA,KAAK,MAAM,KAAK,UAAW;AAC/B"}},
    {"offset": {"line": 975, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/presenter/WiiDisconnectPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Props = {\r\n    isPlaying: boolean;\r\n    /** „ÄåÂÜçÁîüÈñãÂßãÊôÇ„Å´WiiÊé•Á∂ö„Åó„Å¶„ÅÑ„Åü„Äç„Éï„É©„Ç∞ */\r\n    startedWithWii: boolean;\r\n    /** ÁèæÂú®„ÅÆÊé•Á∂öÁä∂ÊÖãÔºàË°®Á§∫ÊñáË®Ä„Å™„Å©„Å´‰Ωø„ÅÜ„Å™„ÇâÊÆã„Åó„Å¶OKÔºâ */\r\n    wiiConnected: boolean;\r\n\r\n    /** backend„Åã„ÇâÊù•„ÅüÂàáÊñ≠„Ç§„Éô„É≥„ÉàÔºàÊõ¥Êñ∞„Åï„Çå„Çã„Åü„Å≥„Å´„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó„ÇíÈñã„ÅèÔºâ */\r\n    wiiDisconnectedAt: number | null;\r\n\r\n    /** ‚òÖËøΩÂä†: ÂÜçÁîüÈñãÂßãÊôÇÂàªÔºà„Åì„Çå‰ª•Èôç„ÅÆÂàáÊñ≠„ÅÆ„Åø„Éù„ÉÉ„Éó„Ç¢„ÉÉ„ÉóÂØæË±°„Å´„Åô„ÇãÔºâ */\r\n    playingSince: number;\r\n};\r\n\r\nexport function WiiDisconnectPopup({\r\n    isPlaying,\r\n    startedWithWii,\r\n    wiiConnected,\r\n    wiiDisconnectedAt,\r\n    playingSince,\r\n}: Props) {\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // ‚òÖÂ§âÊõ¥: „ÄåÁô∫Ë°®‰∏≠„Äç„Åã„Å§„ÄåÈñãÂßãÊôÇ„Å´Êé•Á∂ö„Åó„Å¶„ÅÑ„Åü„ÄçÂ†¥Âêà„ÅÆ„Åø„ÄÅÂàáÊñ≠„Ç§„Éô„É≥„Éà„ÅßÈñã„Åè\r\n    useEffect(() => {\r\n        if (!isPlaying) return;\r\n        if (!startedWithWii) return;\r\n        if (!wiiDisconnectedAt) return;\r\n        // ‚òÖËøΩÂä†: ÂÜçÁîüÈñãÂßãÂæå„Å´Ëµ∑„Åç„ÅüÂàáÊñ≠„Å†„Åë„ÇíÂØæË±°„Å´„Åô„ÇãÔºàÈñãÂßãÂâç„ÅÆÂàáÊñ≠„Ç§„Éô„É≥„Éà„ÇíÁÑ°Ë¶ñÔºâ\r\n        if (wiiDisconnectedAt < playingSince) return;\r\n        setOpen(true);\r\n    }, [isPlaying, startedWithWii, wiiDisconnectedAt, playingSince]);\r\n\r\n    if (!open) return null;\r\n\r\n    return (\r\n        <div\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-label=\"Wii„É™„É¢„Ç≥„É≥„ÅÆÊé•Á∂ö„ÅåÂàá„Çå„Åæ„Åó„Åü\"\r\n            style={{\r\n                position: \"absolute\",\r\n                inset: 0,\r\n                zIndex: 30000,\r\n                display: \"grid\",\r\n                placeItems: \"center\",\r\n                background: \"rgba(0,0,0,0.75)\",\r\n                color: \"white\",\r\n                padding: 24,\r\n            }}\r\n            onClick={() => setOpen(false)}\r\n        >\r\n            <div\r\n                style={{\r\n                    width: \"min(720px, 92vw)\",\r\n                    borderRadius: 14,\r\n                    background: \"rgba(15,15,15,0.95)\",\r\n                    border: \"1px solid rgba(255,255,255,0.15)\",\r\n                    boxShadow: \"0 20px 80px rgba(0,0,0,0.6)\",\r\n                    padding: 24,\r\n                    textAlign: \"center\",\r\n                }}\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                <div style={{ fontSize: 30, fontWeight: 800, marginBottom: 10 }}>\r\n                    Wii„É™„É¢„Ç≥„É≥„ÅÆÊé•Á∂ö„ÅåÂàá„Çå„Åæ„Åó„Åü\r\n                </div>\r\n                <div style={{ fontSize: 16, opacity: 0.9, lineHeight: 1.6 }}>\r\n                    Êé•Á∂öÔºàBluetooth/ÈõªÊ±†Ôºâ„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ<br />\r\n                    „Ç≠„Éº„Éú„Éº„ÉâÊìç‰ΩúÔºà‚Üê/‚ÜíÔºâ„ÅØÂºï„ÅçÁ∂ö„ÅçÂà©Áî®„Åß„Åç„Åæ„Åô„ÄÇ\r\n                </div>\r\n\r\n                <div style={{ marginTop: 16, display: \"flex\", justifyContent: \"center\", gap: 12 }}>\r\n                    <button onClick={() => setOpen(false)} style={{ padding: \"10px 16px\", fontSize: 16 }}>\r\n                        Èñâ„Åò„Çã\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAkBO,SAAS,mBAAmB,EAC/B,SAAS,EACT,cAAc,EACd,YAAY,EACZ,iBAAiB,EACjB,YAAY,EACR;;IACJ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6MAAQ,EAAC;IAEjC,yCAAyC;IACzC,IAAA,8MAAS;wCAAC;YACN,IAAI,CAAC,WAAW;YAChB,IAAI,CAAC,gBAAgB;YACrB,IAAI,CAAC,mBAAmB;YACxB,0CAA0C;YAC1C,IAAI,oBAAoB,cAAc;YACtC,QAAQ;QACZ;uCAAG;QAAC;QAAW;QAAgB;QAAmB;KAAa;IAE/D,IAAI,CAAC,MAAM,OAAO;IAElB,qBACI,iOAAC;QACG,MAAK;QACL,cAAW;QACX,cAAW;QACX,OAAO;YACH,UAAU;YACV,OAAO;YACP,QAAQ;YACR,SAAS;YACT,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,SAAS;QACb;QACA,SAAS,IAAM,QAAQ;kBAEvB,cAAA,iOAAC;YACG,OAAO;gBACH,OAAO;gBACP,cAAc;gBACd,YAAY;gBACZ,QAAQ;gBACR,WAAW;gBACX,SAAS;gBACT,WAAW;YACf;YACA,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,iOAAC;oBAAI,OAAO;wBAAE,UAAU;wBAAI,YAAY;wBAAK,cAAc;oBAAG;8BAAG;;;;;;8BAGjE,iOAAC;oBAAI,OAAO;wBAAE,UAAU;wBAAI,SAAS;wBAAK,YAAY;oBAAI;;wBAAG;sCAC/B,iOAAC;;;;;wBAAK;;;;;;;8BAIpC,iOAAC;oBAAI,OAAO;wBAAE,WAAW;wBAAI,SAAS;wBAAQ,gBAAgB;wBAAU,KAAK;oBAAG;8BAC5E,cAAA,iOAAC;wBAAO,SAAS,IAAM,QAAQ;wBAAQ,OAAO;4BAAE,SAAS;4BAAa,UAAU;wBAAG;kCAAG;;;;;;;;;;;;;;;;;;;;;;AAO1G;GAlEgB;KAAA"}},
    {"offset": {"line": 1111, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/presenter/PresenterView.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { loadFromLocalStorage, type SerializedFlow } from \"@/lib/presentation\";\nimport { getAssetBlob } from \"@/lib/idbAssets\";\nimport { useWiiController, type WiiState } from \"@/hooks/useWiiController\";\nimport { ReactionOverlay } from \"@/components/presenter/ReactionOverlay\";\nimport { WiiDebugPanel } from \"@/components/presenter/WiiDebugPanel\";\nimport { formatAction, mergeBindings, type BindingAction } from \"@/lib/buttonBindings\";\nimport { getProjectBindings } from \"@/lib/currentProjectStore\";\nimport { WiiDisconnectPopup } from \"@/components/presenter/WiiDisconnectPopup\";\n\nfunction PdfSlide(props: {\n\tassetId: string;\n\tpage: number;\n\tfallbackDataUrl?: string;\n\talt: string;\n\tgetOrLoadPdfDocument: (assetId: string) => Promise<any>;\n}) {\n\tconst { assetId, page, fallbackDataUrl, alt, getOrLoadPdfDocument } = props;\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\n\tconst canvasRef = useRef<HTMLCanvasElement | null>(null);\n\tconst [size, setSize] = useState<{ w: number; h: number } | null>(null);\n\tconst [renderError, setRenderError] = useState<string | null>(null);\n\tconst renderTaskRef = useRef<any>(null); // ‚òÖËøΩÂä†: „É¨„É≥„ÉÄ„É™„É≥„Ç∞„Çø„Çπ„ÇØ„ÅÆÂèÇÁÖß„Çí‰øùÊåÅ\n\n\tuseEffect(() => {\n\t\tconst el = wrapperRef.current;\n\t\tif (!el) return;\n\t\tconst update = () => {\n\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\tsetSize({ w: Math.max(0, rect.width), h: Math.max(0, rect.height) });\n\t\t};\n\t\tupdate();\n\t\tconst ro = new ResizeObserver(() => update());\n\t\tro.observe(el);\n\t\treturn () => ro.disconnect();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet cancelled = false;\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tsetRenderError(null);\n\n\t\t\t\tconst el = wrapperRef.current;\n\t\t\t\tconst canvas = canvasRef.current;\n\t\t\t\tif (!el || !canvas || !size || size.w === 0 || size.h === 0) return;\n\n\t\t\t\t// ‚òÖËøΩÂä†: Êó¢Â≠ò„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Çí„Ç≠„É£„É≥„Çª„É´\n\t\t\t\tif (renderTaskRef.current) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\trenderTaskRef.current.cancel();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// „Ç≠„É£„É≥„Çª„É´Ê∏à„Åø„ÅÆÂ†¥Âêà„ÅØÁÑ°Ë¶ñ\n\t\t\t\t\t}\n\t\t\t\t\trenderTaskRef.current = null;\n\t\t\t\t}\n\n\t\t\t\tconst pdf = await getOrLoadPdfDocument(assetId);\n\t\t\t\tif (cancelled) return;\n\t\t\t\tconst pdfPage = await pdf.getPage(page);\n\t\t\t\tif (cancelled) return;\n\n\t\t\t\tconst viewport1 = pdfPage.getViewport({ scale: 1 });\n\t\t\t\tconst scale = Math.min(size.w / viewport1.width, size.h / viewport1.height);\n\t\t\t\tconst dpr = typeof window !== \"undefined\" ? window.devicePixelRatio || 1 : 1;\n\t\t\t\tconst renderViewport = pdfPage.getViewport({ scale: scale * dpr });\n\n\t\t\t\tcanvas.width = Math.floor(renderViewport.width);\n\t\t\t\tcanvas.height = Math.floor(renderViewport.height);\n\t\t\t\tcanvas.style.width = `${Math.floor(renderViewport.width / dpr)}px`;\n\t\t\t\tcanvas.style.height = `${Math.floor(renderViewport.height / dpr)}px`;\n\n\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\t\t\t\tif (!ctx) return;\n\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t// ‚òÖ‰øÆÊ≠£: render„Çø„Çπ„ÇØ„Çí‰øùÊåÅ„Åó„ÄÅcleanup„Åßcancel„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã\n\t\t\t\tconst task = pdfPage.render({ canvasContext: ctx, canvas, viewport: renderViewport });\n\t\t\t\trenderTaskRef.current = task;\n\n\t\t\t\tawait task.promise;\n\n\t\t\t\t// ÂÆå‰∫Ü„Åó„Åü„ÇâÂèÇÁÖß„ÇíÂ§ñ„Åô\n\t\t\t\tif (renderTaskRef.current === task) {\n\t\t\t\t\trenderTaskRef.current = null;\n\t\t\t\t}\n\t\t\t} catch (e: any) {\n\t\t\t\t// cancel„ÅØÊ≠£Â∏∏Á≥ª„Å®„Åó„Å¶ÁÑ°Ë¶ñ\n\t\t\t\tconst msg = e?.name === \"RenderingCancelledException\" ? null : (e instanceof Error ? e.message : String(e));\n\t\t\t\tif (!cancelled && msg) setRenderError(msg);\n\t\t\t}\n\t\t})();\n\n\t\treturn () => {\n\t\t\tcancelled = true;\n\t\t\t// ‚òÖËøΩÂä†: effect cleanup„ÅßÈÄ≤Ë°å‰∏≠render„ÇíÂøÖ„ÅöÊ≠¢„ÇÅ„Çã\n\t\t\tif (renderTaskRef.current) {\n\t\t\t\ttry {\n\t\t\t\t\trenderTaskRef.current.cancel();\n\t\t\t\t\trenderTaskRef.current = null;\n\t\t\t\t} catch {\n\t\t\t\t\t// Êó¢„Å´„Ç≠„É£„É≥„Çª„É´Ê∏à„Åø„ÅÆÂ†¥Âêà„ÅØÁÑ°Ë¶ñ\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}, [assetId, getOrLoadPdfDocument, page, size]);\n\n\treturn (\n\t\t<div\n\t\t\tref={wrapperRef}\n\t\t\tstyle={{ width: \"100%\", height: \"100%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}\n\t\t>\n\t\t\t{renderError && fallbackDataUrl ? (\n\t\t\t\t<img src={fallbackDataUrl} style={{ width: \"100%\", height: \"100%\", objectFit: \"contain\" }} alt={alt} />\n\t\t\t) : (\n\t\t\t\t<canvas ref={canvasRef} aria-label={alt} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction VideoSlide(props: { assetId: string; alt: string }) {\n\tconst { assetId, alt } = props;\n\tconst [src, setSrc] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\n\tuseEffect(() => {\n\t\tlet active = true;\n\t\tlet url: string | null = null;\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tsetError(null);\n\t\t\t\tsetSrc(null);\n\t\t\t\tconst blob = await getAssetBlob(assetId);\n\t\t\t\tif (!blob) throw new Error(\"ÂãïÁîª„Ç¢„Çª„ÉÉ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì (IndexedDB)\");\n\t\t\t\turl = URL.createObjectURL(blob);\n\t\t\t\tif (!active) return;\n\t\t\t\tsetSrc(url);\n\t\t\t} catch (e) {\n\t\t\t\tif (!active) return;\n\t\t\t\tsetError(e instanceof Error ? e.message : String(e));\n\t\t\t}\n\t\t})();\n\t\treturn () => {\n\t\t\tactive = false;\n\t\t\tif (url) URL.revokeObjectURL(url);\n\t\t};\n\t}, [assetId]);\n\n\tif (error) {\n\t\treturn <div style={{ color: \"white\", textAlign: \"center\" }}>ÂãïÁîª„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: {error}</div>;\n\t}\n\tif (!src) {\n\t\treturn <div style={{ color: \"white\", textAlign: \"center\" }}>ÂãïÁîª„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>;\n\t}\n\n\treturn (\n\t\t<video\n\t\t\tsrc={src}\n\t\t\tstyle={{ width: \"100%\", height: \"100%\", objectFit: \"contain\" }}\n\t\t\tcontrols\n\t\t\tautoPlay\n\t\t\tmuted\n\t\t\tplaysInline\n\t\t\taria-label={alt}\n\t\t/>\n\t);\n}\n\n// IR„Ç´„É°„É©„ÅÆÂ∫ßÊ®ô(0-1023)„ÇíÁîªÈù¢Â∫ßÊ®ô„Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞\nfunction mapIrToScreen(irX: number, irY: number, screenW: number, screenH: number) {\n\t// Wii„É™„É¢„Ç≥„É≥„ÅÆIR„ÅØË¶ñÁÇπ„ÅåÈÄÜ„Å´„Å™„Çã„Åì„Å®„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶ 1 - ... „ÇíË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ\n\tconst x = (1 - irX / 1024) * screenW;\n\tconst y = (irY / 768) * screenH;\n\treturn { x, y };\n}\n\nexport function PresenterView() {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const containerRef = useRef<HTMLDivElement | null>(null);\n    const isMouseDrawingRef = useRef(false);\n\n    const soundboardRef = useRef<{ q?: HTMLAudioElement; w?: HTMLAudioElement; e?: HTMLAudioElement }>({});\n    const playSound = useCallback((key: \"q\" | \"w\" | \"e\") => {\n        const a = soundboardRef.current[key];\n        if (!a) return;\n        try {\n            a.currentTime = 0;\n            void a.play();\n        } catch (err) {\n            console.warn(\"sound play failed\", key, err);\n        }\n    }, []);\n\n    const returnTo = useMemo(() => {\n        return searchParams.get(\"from\") === \"editor\" ? \"/editor\" : \"/\";\n    }, [searchParams]);\n\n    const returnLabel = useMemo(() => {\n        return returnTo === \"/editor\" ? \"„Ç®„Éá„Ç£„Çø„Å´Êàª„Çã\" : \"„Éõ„Éº„É†„Å´Êàª„Çã\";\n    }, [returnTo]);\n\n    const goBack = useCallback(() => {\n        router.push(returnTo);\n    }, [router, returnTo]);\n\n    // Wii„É™„É¢„Ç≥„É≥„ÅÆÁä∂ÊÖã„ÇíÂèñÂæó\n    const { wiiState, pressed, wiiConnected, wiiDisconnectedAt } = useWiiController();\n\n    const [flow, setFlow] = useState<SerializedFlow | null>(null);\n    const [error, setError] = useState<string | null>(null);\n    const [currentNodeId, setCurrentNodeId] = useState<string | null>(null);\n    const [startedWithWii, setStartedWithWii] = useState(false);\n    const [playingSince, setPlayingSince] = useState<number>(0);\n\n    const pdfDocCacheRef = useRef<Map<string, Promise<any>>>(new Map());\n\n    // ‚òÖ‰øÆÊ≠£: Â∏∏„Å´playingÁä∂ÊÖã„Å®„Åó„Å¶Êâ±„ÅÜÔºàflow/currentNodeId„Åå„ÅÇ„Çå„Å∞ÂÜçÁîü‰∏≠Ôºâ\n    const isPlaying = flow != null && currentNodeId != null;\n\n    useEffect(() => {\n\t\tconst q = new Audio(\"https://www.myinstants.com/media/sounds/nice-shot-wii-sports_DJJ0VOz.mp3\");\n\t\tconst w = new Audio(\"https://www.myinstants.com/media/sounds/crowdaw.mp3\");\n\t\tconst e = new Audio(\"https://www.myinstants.com/media/sounds/crowdoh.mp3\");\n\t\tq.preload = \"auto\";\n\t\tw.preload = \"auto\";\n\t\te.preload = \"auto\";\n\t\tsoundboardRef.current = { q, w, e };\n\t\treturn () => {\n\t\t\tfor (const a of [q, w, e]) {\n\t\t\t\ttry {\n\t\t\t\t\ta.pause();\n\t\t\t\t} catch {\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\t\t\t}\n\t\t\tsoundboardRef.current = {};\n\t\t};\n\t}, []);\n\n    const getOrLoadPdfDocument = useCallback(async (assetId: string) => {\n        const cached = pdfDocCacheRef.current.get(assetId);\n        if (cached) return await cached;\n\n        const promise = (async () => {\n            const blob = await getAssetBlob(assetId);\n            if (!blob) throw new Error(\"PDF„Ç¢„Çª„ÉÉ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì (IndexedDB)\");\n            const arrayBuffer = await blob.arrayBuffer();\n            const pdfjs = await import(\"pdfjs-dist/legacy/build/pdf.mjs\");\n            pdfjs.GlobalWorkerOptions.workerSrc = new URL(\n\t\t\t\t\"pdfjs-dist/legacy/build/pdf.worker.min.mjs\",\n\t\t\t\timport.meta.url,\n\t\t\t).toString();\n            return await pdfjs.getDocument({ data: arrayBuffer }).promise;\n        })();\n\n        pdfDocCacheRef.current.set(assetId, promise);\n        try {\n            return await promise;\n        } catch (e) {\n            pdfDocCacheRef.current.delete(assetId);\n            throw e;\n        }\n    }, []);\n\n    // „ÅäÁµµÊèè„ÅçÁî®„ÅÆÂ∫ßÊ®ô„É™„Çπ„Éà\n    const [drawingPoints, setDrawingPoints] = useState<Array<{ x: number; y: number } | null>>([]);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const wasWiiADownRef = useRef(false);\n\n    // ÈÄ£Á∂öÈÅ∑Áßª„ÇíÈò≤„Åê„Åü„ÇÅ„ÅÆ„ÇØ„Éº„É´„Çø„Ç§„É†ÁÆ°ÁêÜ\n    const lastNavTime = useRef<number>(0);\n\n    // ÁèæÂú®„ÅÆ„Éé„Éº„Éâ„Éá„Éº„Çø\n    const currentNode = useMemo(() =>\n\t\tflow?.nodes.find((n) => n.id === currentNodeId),\n\t\t[flow, currentNodeId]);\n\n    // ‚òÖ‰øÆÊ≠£: ÂàùÂõû„Éû„Ç¶„É≥„ÉàÊôÇ„Å´Ëá™ÂãïÁöÑ„Å´„Éó„É¨„Çº„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„ÇíÈñãÂßã\n    useEffect(() => {\n        const loaded = loadFromLocalStorage();\n        if (!loaded || loaded.nodes.length === 0) {\n            setError(\"„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇEditor„Åß‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\");\n            setFlow(null);\n            setCurrentNodeId(null);\n            return;\n        }\n        \n        // „Éê„Ç§„É≥„ÉâË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø\n        const storedBindings = getProjectBindings();\n        const flowWithBindings = storedBindings ? \n            { ...loaded, projectBindings: storedBindings } : loaded;\n        \n        console.log(\"PresenterView: Auto-starting presentation with bindings\", { storedBindings, flowWithBindings });\n        \n        setError(null);\n        setFlow(flowWithBindings);\n        \n        // Start„Éé„Éº„Éâ„Åã„ÇâÈñãÂßã\n        const startNode = loaded.nodes.find((n) => n.data.label === \"Start\") || loaded.nodes[0];\n        setCurrentNodeId(startNode.id);\n        \n        // WiiÊé•Á∂öÁä∂ÊÖã„ÇíË®òÈå≤\n        setStartedWithWii(!!wiiConnected);\n        setPlayingSince(Date.now());\n    }, []); // ‚òÖÁ©∫„ÅÆ‰æùÂ≠òÈÖçÂàó„ÅßÂàùÂõû„ÅÆ„ÅøÂÆüË°å\n\n    // ‚òÖ‰øÆÊ≠£: wiiConnected„ÅåÂ§âÂåñ„Åó„Åü„ÇâË®òÈå≤„ÇíÊõ¥Êñ∞\n    useEffect(() => {\n        if (wiiConnected) setStartedWithWii(true);\n    }, [wiiConnected]);\n\n    const outgoingEdges = useMemo(() => {\n        if (!flow || !currentNodeId) return [];\n        return flow.edges.filter((e) => e.source === currentNodeId);\n    }, [flow, currentNodeId]);\n\n    const branchOptions = useMemo(() => {\n        // 1-9 „ÅÆÊï∞Â≠ó„ÅßÈÅ∏„Åπ„ÇãÂàÜÂ≤ê\n\t\tconst options: Array<{ key: string; target: string }> = [];\n\t\tconst used = new Set<string>();\n\n\t\tfor (const edge of outgoingEdges) {\n\t\t\tconst label = (edge.label ?? \"\").trim();\n\t\t\tconst m = label.match(/^([1-9])(?:\\b|\\s|:|-)/);\n\t\t\tif (m) {\n\t\t\t\tconst k = m[1];\n\t\t\t\tif (!used.has(k)) {\n\t\t\t\t\toptions.push({ key: k, target: edge.target });\n\t\t\t\t\tused.add(k);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// „É©„Éô„É´„Å´Áï™Âè∑„Åå„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅÈÖçÂàóÈ†Ü„Åß 1..n „ÇíÂâ≤„ÇäÂΩì„Å¶\n\t\tfor (const edge of outgoingEdges) {\n\t\t\tif (options.length >= 9) break;\n\t\t\tconst nextKey = String(options.length + 1);\n\t\t\tif (used.has(nextKey)) continue;\n\t\t\toptions.push({ key: nextKey, target: edge.target });\n\t\t\tused.add(nextKey);\n\t\t}\n\n\t\treturn options;\n    }, [outgoingEdges]);\n\n    const hasMultipleBranches = outgoingEdges.length >= 2;\n\n    // „Éé„Éº„ÉâÁßªÂãïÂá¶ÁêÜ\n    const navigateTo = useCallback((nodeId: string) => {\n        // „ÇØ„Éº„É´„Çø„Ç§„É†„ÉÅ„Çß„ÉÉ„ÇØ (500ms‰ª•ÂÜÖ„ÅÆÈÄ£Á∂öÈÅ∑Áßª„ÅØÁÑ°Ë¶ñ)\n\t\tconst now = Date.now();\n\t\tif (now - lastNavTime.current < 500) return;\n\t\tlastNavTime.current = now;\n\n\t\tsetCurrentNodeId(nodeId);\n\t\tsetDrawingPoints([]); // „Çπ„É©„Ç§„Éâ„ÅåÂ§â„Çè„Å£„Åü„ÇâÁ∑ö„ÇíÊ∂à„Åô\n    }, []);\n\n    // Ê¨°„Å∏Ôºà„É≠„Ç∏„ÉÉ„ÇØÊîπËâØÁâàÔºâ\n    const nextSlide = useCallback(() => {\n        if (!flow || !currentNodeId) return;\n\t\t// ÂàÜÂ≤ê„ÅåË§áÊï∞„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅÊï∞Â≠óÈÅ∏Êäû„ÇíÂÑ™ÂÖà„Åô„Çã\n\t\tconst edges = flow.edges.filter((e) => e.source === currentNodeId);\n\t\tif (edges.length >= 2) return;\n\n\t\t// ÁèæÂú®„ÅÆ„Éé„Éº„Éâ„Åã„ÇâÂá∫„Å¶„ÅÑ„Çã„Ç®„ÉÉ„Ç∏„Çí„Åô„Åπ„Å¶ÂèñÂæó\n\t\t// (‰∏ä„ÅßÂèñÂæóÊ∏à„Åø)\n\n\t\tif (edges.length === 0) return;\n\n\t\t// ÂÑ™ÂÖàÈ†Ü‰Ωç‰ªò„Åë\n\t\t// 1. „É©„Éô„É´„Åå„Å™„ÅÑ„Ç®„ÉÉ„Ç∏ („Éá„Éï„Ç©„É´„Éà„É´„Éº„Éà)\n\t\t// 2. „É©„Éô„É´„Åå \"next\" „ÅÆ„Ç®„ÉÉ„Ç∏\n\t\t// 3. „Åù„Çå‰ª•Â§ñ (ÊúÄÂàù„Å´Ë¶ã„Å§„Åã„Å£„Åü„ÇÇ„ÅÆ)\n\t\tconst targetEdge =\n\t\t\tedges.find(e => !e.label || e.label.trim() === \"\") ||\n\t\t\tedges.find(e => e.label === \"next\") ||\n\t\t\tedges[0];\n\n\t\tif (targetEdge) navigateTo(targetEdge.target);\n    }, [flow, currentNodeId, navigateTo]);\n\n    const branchByNumberKey = useCallback(\n\t\t(key: string) => {\n\t\t\tif (!hasMultipleBranches) return;\n\t\t\tconst opt = branchOptions.find((o) => o.key === key);\n\t\t\tif (opt) navigateTo(opt.target);\n\t\t},\n\t\t[branchOptions, hasMultipleBranches, navigateTo],\n\t);\n\n    // Ââç„Å∏ÔºàÈÄÜÈ†ÜÊ§úÁ¥¢Ôºâ\n    const prevSlide = useCallback(() => {\n        if (!flow || !currentNodeId) return;\n\t\t// Ëá™ÂàÜ„Å´Âêë„Åã„Å£„Å¶„ÅÑ„Çã„Ç®„ÉÉ„Ç∏„ÇíÊé¢„Åó„Å¶Êàª„ÇãÔºàÁ∞°ÊòìÂÆüË£ÖÔºâ\n\t\tconst edge = flow.edges.find(e => e.target === currentNodeId);\n\t\tif (edge) navigateTo(edge.source);\n    }, [flow, currentNodeId, navigateTo]);\n\n    // ÂàÜÂ≤êÂá¶ÁêÜÔºà„Ç®„ÉÉ„Ç∏„ÅÆ„É©„Éô„É´„ÅßÊ§úÁ¥¢Ôºâ\n    const branchTo = useCallback((keywords: string[]) => {\n        if (!flow || !currentNodeId) return;\n\t\tconst edges = flow.edges.filter(e => e.source === currentNodeId);\n\t\tconst target = edges.find(e => keywords.some(k => e.label?.includes(k)));\n\t\tif (target) {\n\t\t\tconsole.log(\"ÂàÜÂ≤ê„Åó„Åæ„Åó„Åü:\", target.label);\n\t\t\tnavigateTo(target.target);\n\t\t}\n    }, [flow, currentNodeId, navigateTo]);\n\n    // ‚òÖËøΩÂä†: „É™„Ç¢„ÇØ„Ç∑„Éß„É≥„Çí„Éá„Éê„ÉÉ„Ç∞„Åô„ÇãÔºàN=One, M=TwoÔºâ\n    const [debugEmitClap, setDebugEmitClap] = useState(false);\n    const [debugEmitLaugh, setDebugEmitLaugh] = useState(false);\n\n    // „Ç≠„Éº„Éú„Éº„ÉâÊìç‰Ωú (Áü¢Âç∞„Ç≠„ÉºÂØæÂøú + ESC„ÅßÊàª„Çã)\n    useEffect(() => {\n        if (!isPlaying) return;\n\n        const handleKeyDown = (e: KeyboardEvent) => {\n            // ËøΩÂä†: Á∑ö„Çí„ÇØ„É™„Ç¢ (R)\n\t\t\tif (e.key === \"r\" || e.key === \"R\") {\n\t\t\t\tsetDrawingPoints([]);\n\t\t\t\tisMouseDrawingRef.current = false;\n\t\t\t\twasWiiADownRef.current = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (!e.repeat) {\n\t\t\t\tif (e.key === \"q\" || e.key === \"Q\") {\n\t\t\t\t\tplaySound(\"q\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.key === \"w\" || e.key === \"W\") {\n\t\t\t\t\tplaySound(\"w\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.key === \"e\" || e.key === \"E\") {\n\t\t\t\t\tplaySound(\"e\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ‚òÖËøΩÂä†: „É™„Ç¢„ÇØ„Ç∑„Éß„É≥ÔºàN / MÔºâ\n\t\t\t// Êäº„Åó„Å£„Å±„Å™„Åó„ÅßÂ¢óÊÆñ„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´ repeat „ÇíÁÑ°Ë¶ñ\n\t\t\tif (!e.repeat) {\n\t\t\t\tif (e.key === \"n\" || e.key === \"N\") {\n\t\t\t\t\tsetDebugEmitClap(true);\n\t\t\t\t\tqueueMicrotask(() => setDebugEmitClap(false)); // 1Âõû„Å†„ÅëÁô∫ÁÅ´\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.key === \"m\" || e.key === \"M\") {\n\t\t\t\t\tsetDebugEmitLaugh(true);\n\t\t\t\t\tqueueMicrotask(() => setDebugEmitLaugh(false)); // 1Âõû„Å†„ÅëÁô∫ÁÅ´\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Êó¢Â≠ò: ÂàÜÂ≤ê 1..9\n\t\t\tif (e.key >= \"1\" && e.key <= \"9\") {\n\t\t\t\tbranchByNumberKey(e.key);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.key === \"ArrowRight\") {\n\t\t\t\tif (!hasMultipleBranches) nextSlide();\n\t\t\t}\n\t\t\tif (e.key === \"ArrowLeft\") prevSlide();\n\t\t\t// ESC„Ç≠„Éº„ÅßÂÖÉ„ÅÆÁîªÈù¢„Å∏Êàª„ÇãÔºà„Ç®„Éá„Ç£„ÇøÁµåÁî±„Å™„Çâ„Ç®„Éá„Ç£„Çø„Å∏Ôºâ\n\t\t\tif (e.key === \"Escape\") goBack();\n        };\n\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return () => window.removeEventListener(\"keydown\", handleKeyDown);\n    }, [isPlaying, nextSlide, prevSlide, goBack, branchByNumberKey, hasMultipleBranches, playSound]);\n\n    const effectiveProjectBindings = useMemo(() => {\n        const merged = mergeBindings(flow?.projectBindings);\n        console.log(\"PresenterView: effectiveProjectBindings updated\", { \n            flowBindings: flow?.projectBindings, \n            merged \n        });\n        return merged;\n    }, [flow]);\n\n    // --- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÖ®‰Ωì„Éê„Ç§„É≥„Éâ„ÇíÈÅ©Áî®„Åó„Å¶„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆüË°å ---\n    const runAction = useCallback(\n        (a: BindingAction) => {\n            switch (a.type) {\n\t\t\t\tcase \"next\":\n\t\t\t\t\tnextSlide();\n\t\t\t\t\treturn;\n\t\t\t\tcase \"prev\":\n\t\t\t\t\tprevSlide();\n\t\t\t\t\treturn;\n\t\t\t\tcase \"branchIndex\":\n\t\t\t\t\t// 1..9 „Çí ‚ÄúÂàÜÂ≤êÈÅ∏ÊäûÔºàÊï∞Â≠ó„Ç≠„ÉºÔºâ‚Äù „Å®Âêå„ÅòÊåôÂãï„Å´„Åô„Çã\n\t\t\t\t\tbranchByNumberKey(String(a.index));\n\t\t\t\t\treturn;\n\t\t\t\tcase \"branch\": {\n\t\t\t\t\t// Êó¢Â≠ò‰∫íÊèõ: A/B/HOME „ÅØ 1..3 „Å´„Éû„ÉÉ„Éó\n\t\t\t\t\tif (!hasMultipleBranches) return;\n\t\t\t\t\tconst map: Record<string, string> = { A: \"1\", B: \"2\", HOME: \"3\" };\n\t\t\t\t\tconst k = map[a.kind];\n\t\t\t\t\tif (k) branchByNumberKey(k);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcase \"reaction\":\n\t\t\t\t\t// ReactionOverlay „Åå pressed.One/Two „ÇíË¶ã„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åì„Åì„Åß„ÅØ‰Ωï„ÇÇ„Åó„Å™„ÅÑ\n\t\t\t\t\treturn;\n\t\t\t\tcase \"paint\":\n\t\t\t\t\t// shouldPaint„ÅßÂà•ÈÄîÂá¶ÁêÜ„Åô„Çã„ÅÆ„Åß„ÄÅ„Åì„Åì„Åß„ÅØ‰Ωï„ÇÇ„Åó„Å™„ÅÑ\n\t\t\t\t\treturn;\n\t\t\t\tcase \"sound\":\n\t\t\t\t\t// Èü≥Â£∞ÂÜçÁîüÂá¶ÁêÜ\n\t\t\t\t\tif (a.kind === \"shot\") playSound(\"q\");\n\t\t\t\t\telse if (a.kind === \"oh\") playSound(\"e\");\n\t\t\t\t\telse if (a.kind === \"uxo\") playSound(\"w\");\n\t\t\t\t\treturn;\t\t\tcase \"remove\":\n\t\t\t\t// ÊèèÁîª„ÇíÊ∂àÂéª\n\t\t\t\tsetDrawingPoints([]);\n\t\t\t\tisMouseDrawingRef.current = false;\n\t\t\t\twasWiiADownRef.current = false;\n\t\t\t\treturn;\t\t\t\tcase \"none\":\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n            }\n        },\n        [nextSlide, prevSlide, branchByNumberKey, hasMultipleBranches, playSound],\n    );\n\n    // ‚òÖ‰øÆÊ≠£: Wii„É™„É¢„Ç≥„É≥„ÅÆ„Éú„Çø„É≥Âá¶ÁêÜÔºàisPlaying„Ååtrue„ÅÆÊôÇ„ÅÆ„ÅøÂãï‰ΩúÔºâ\n    const prevPressedRef = useRef<Record<string, boolean>>({});\n    useEffect(() => {\n        if (!isPlaying) return;\n\n        // „Åù„ÅÆ„Éï„É¨„Éº„É†„Åß„ÄåÊäº„Åï„Çå„ÅüÁû¨Èñì„Äç„ÅÆ„Éú„Çø„É≥„Å†„ÅëÂá¶ÁêÜÔºàÊäº„Åó„Å£„Å±„Å™„Åó„ÅßÈÄ£Êâì„Åó„Å™„ÅÑÔºâ\n        const prevPressed = prevPressedRef.current;\n        for (const btn of Object.keys(pressed)) {\n            const isDown = (pressed as Record<string, boolean>)[btn];\n            const wasDown = !!prevPressed[btn];\n            if (!isDown || wasDown) continue;\n\n            const act = (effectiveProjectBindings as Record<string, BindingAction | undefined>)[btn] ?? { type: \"none\" };\n            runAction(act);\n        }\n        prevPressedRef.current = { ...(pressed as Record<string, boolean>) };\n    }, [pressed, isPlaying, effectiveProjectBindings, runAction]);\n\n    // ‚òÖËøΩÂä†: „É™„Ç¢„ÇØ„Ç∑„Éß„É≥Ê§úÂá∫Ôºà„Éê„Ç§„É≥„Éâ„Éô„Éº„ÇπÔºâ\n    const shouldEmitClap = useMemo(() => {\n        if (!isPlaying) return false;\n        // Êäº„Åï„Çå„Åü„Éú„Çø„É≥„ÅÆ‰∏≠„Åß„ÄÅ\"clap\" „Å´„Éê„Ç§„É≥„Éâ„Åï„Çå„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Åå„ÅÇ„Çã„ÅãÔºü\n        for (const btn of Object.keys(pressed)) {\n            const isDown = (pressed as Record<string, boolean>)[btn];\n            if (!isDown) continue;\n            const act = (effectiveProjectBindings as Record<string, BindingAction | undefined>)[btn];\n            if (act?.type === \"reaction\" && act.kind === \"clap\") return true;\n        }\n        return false;\n    }, [pressed, effectiveProjectBindings, isPlaying]);\n\n    const shouldEmitLaugh = useMemo(() => {\n        if (!isPlaying) return false;\n        for (const btn of Object.keys(pressed)) {\n            const isDown = (pressed as Record<string, boolean>)[btn];\n            if (!isDown) continue;\n            const act = (effectiveProjectBindings as Record<string, BindingAction | undefined>)[btn];\n            if (act?.type === \"reaction\" && act.kind === \"laugh\") return true;\n        }\n        return false;\n    }, [pressed, effectiveProjectBindings, isPlaying]);\n\n    // PAINT„Éú„Çø„É≥„ÅÆÊúÄÂæå„ÅÆÂÖ•ÂäõÊôÇÂàª„ÇíË®òÈå≤\n    const lastPaintInputTimeRef = useRef<number>(0);\n    const [shouldPaint, setShouldPaint] = useState(false);\n\n    // wiiState.buttons„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÄÅÁèæÂú®PAINT„Éú„Çø„É≥„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ∂ôÁ∂öÁöÑ„Å´Áõ£Ë¶ñ\n    useEffect(() => {\n        if (!isPlaying || !wiiState) return;\n\n        // ÁèæÂú®Êäº„Åï„Çå„Å¶„ÅÑ„Çã„Éú„Çø„É≥„ÅÆ‰∏≠„Å´PAINT„Åå„ÅÇ„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ\n        let isPaintButtonPressed = false;\n        for (const btn of Object.keys(wiiState.buttons)) {\n            const isDown = (wiiState.buttons as Record<string, boolean>)[btn];\n            if (!isDown) continue;\n            const act = (effectiveProjectBindings as Record<string, BindingAction | undefined>)[btn];\n            if (act?.type === \"paint\") {\n                isPaintButtonPressed = true;\n                break;\n            }\n        }\n\n        if (isPaintButtonPressed) {\n            lastPaintInputTimeRef.current = Date.now();\n            setShouldPaint(true);\n        }\n    }, [wiiState, effectiveProjectBindings, isPlaying]);\n\n    // 200ms„Çø„Ç§„Éû„Éº„ÅßÊèèÁîªÁä∂ÊÖã„Çí„ÉÅ„Çß„ÉÉ„ÇØ\n    useEffect(() => {\n        if (!isPlaying) {\n            setShouldPaint(false);\n            return;\n        }\n\n        const interval = setInterval(() => {\n            const now = Date.now();\n            const elapsed = now - lastPaintInputTimeRef.current;\n            \n            if (elapsed > 100 && shouldPaint) {\n                setShouldPaint(false);\n                // ÊèèÁîª„ÇíÁµÇ‰∫Ü\n                if (isMouseDrawingRef.current) {\n                    isMouseDrawingRef.current = false;\n                    setDrawingPoints((prev) => (prev.length > 0 && prev[prev.length - 1] !== null ? [...prev, null] : prev));\n                }\n            }\n        }, 50); // 50ms„Åî„Å®„Å´„ÉÅ„Çß„ÉÉ„ÇØ\n\n        return () => clearInterval(interval);\n    }, [isPlaying, shouldPaint]);\n\n    // --- ÊèèÁîª„É≠„Ç∏„ÉÉ„ÇØ (IR„Çª„É≥„Çµ„Éº & PAINT„Éú„Çø„É≥) ---\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        const ctx = canvas?.getContext(\"2d\");\n        if (!canvas || !ctx) return;\n\n        // „Ç≠„É£„É≥„Éê„Çπ„Çµ„Ç§„Ç∫„Çí„Ç¶„Ç£„É≥„Éâ„Ç¶„Å´Âêà„Çè„Åõ„Çã\n        if (canvas.width !== window.innerWidth || canvas.height !== window.innerHeight) {\n            canvas.width = window.innerWidth;\n            canvas.height = window.innerHeight;\n        }\n\n        // ÁîªÈù¢„ÇØ„É™„Ç¢\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        // Êó¢Â≠ò„ÅÆÁ∑ö„ÇíÊèèÁîª\n        ctx.lineWidth = 5;\n        ctx.strokeStyle = \"red\";\n        ctx.lineCap = \"round\";\n        ctx.lineJoin = \"round\";\n\n        if (drawingPoints.length > 1) {\n            let started = false;\n            for (const p of drawingPoints) {\n                if (!p) {\n                    if (started) {\n                        ctx.stroke();\n                        started = false;\n                    }\n                    continue;\n                }\n                if (!started) {\n                    ctx.beginPath();\n                    ctx.moveTo(p.x, p.y);\n                    started = true;\n                } else {\n                    ctx.lineTo(p.x, p.y);\n                }\n            }\n            if (started) ctx.stroke();\n        }\n\n        // IR„Éù„Ç§„É≥„Çø„ÉºÂá¶ÁêÜ\n        if (wiiState && wiiState.ir.length > 0) {\n            // IR„ÅÆ1ÁÇπÁõÆ„Çí‰ΩøÁî®\n\t\t\tconst dot = wiiState.ir[0];\n\t\t\t// Â∫ßÊ®ôÂ§âÊèõ\n\t\t\tconst pos = mapIrToScreen(dot.x, dot.y, window.innerWidth, window.innerHeight);\n\n\t\t\t// „Ç´„Éº„ÇΩ„É´ÊèèÁîª\n\t\t\tctx.fillStyle = \"blue\";\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(pos.x, pos.y, 10, 0, Math.PI * 2);\n\t\t\tctx.fill();\n\n\t\t\t// PAINT„Éê„Ç§„É≥„Éâ„Åï„Çå„Åü„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„ÅÑ„ÇãÈñì„ÄÅËªåË∑°„ÇíËøΩÂä†\n\t\t\tif (shouldPaint) {\n\t\t\t\tsetDrawingPoints((prev) => {\n\t\t\t\t\tconst next = prev.slice();\n\t\t\t\t\tif (!wasWiiADownRef.current) {\n\t\t\t\t\t\t// ÂâçÂõû„ÅÆÁ∑ö„Å®Áπã„Åå„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´Âå∫Âàá„Çä„ÇíÂÖ•„Çå„Çã\n\t\t\t\t\t\tif (next.length > 0 && next[next.length - 1] !== null) next.push(null);\n\t\t\t\t\t}\n\t\t\t\t\tnext.push(pos);\n\t\t\t\t\treturn next;\n\t\t\t\t});\n\t\t\t\twasWiiADownRef.current = true;\n\t\t\t} else {\n\t\t\t\t// Èõ¢„Åó„Åü„Çø„Ç§„Éü„É≥„Ç∞„ÅßÂå∫Âàá„Çã\n\t\t\t\tif (wasWiiADownRef.current) {\n\t\t\t\t\twasWiiADownRef.current = false;\n\t\t\t\t\tsetDrawingPoints((prev) => (prev.length > 0 && prev[prev.length - 1] !== null ? [...prev, null] : prev));\n\t\t\t\t}\n\t\t\t}\n        }\n    }, [wiiState, drawingPoints, shouldPaint]);\n\n\n    return (\n        <main\n            ref={containerRef}\n            onMouseDown={(e) => {\n                if (!isPlaying) return;\n                if (e.button !== 0) return;\n                // UI(„Éú„Çø„É≥Á≠â)Êìç‰Ωú„ÅØÈÇ™È≠î„Åó„Å™„ÅÑ\n                const el = e.target as HTMLElement | null;\n                if (el && el.closest(\"button, a, input, textarea, select\")) return;\n                e.preventDefault();\n                isMouseDrawingRef.current = true;\n                setDrawingPoints((prev) => {\n                    const next = prev.slice();\n                    if (next.length > 0 && next[next.length - 1] !== null) next.push(null);\n                    next.push({ x: e.clientX, y: e.clientY });\n                    return next;\n                });\n            }}\n            onMouseMove={(e) => {\n                if (!isPlaying) return;\n                // PAINT„Éú„Çø„É≥„ÅåÊäº„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÇÇÊèèÁîª\n                const shouldDrawWithPaint = shouldPaint;\n                if (!isMouseDrawingRef.current && !shouldDrawWithPaint) return;\n                \n                // PAINT„Éú„Çø„É≥„ÅßÊèèÁîªÈñãÂßã\n                if (shouldDrawWithPaint && !isMouseDrawingRef.current) {\n                    isMouseDrawingRef.current = true;\n                    setDrawingPoints((prev) => {\n                        const next = prev.slice();\n                        if (next.length > 0 && next[next.length - 1] !== null) next.push(null);\n                        next.push({ x: e.clientX, y: e.clientY });\n                        return next;\n                    });\n                    return;\n                }\n                \n                e.preventDefault();\n                setDrawingPoints((prev) => {\n                    const last = prev[prev.length - 1];\n                    if (last && Math.abs(last.x - e.clientX) + Math.abs(last.y - e.clientY) < 2) return prev;\n                    return [...prev, { x: e.clientX, y: e.clientY }];\n                });\n            }}\n            onMouseUp={() => {\n                if (!isMouseDrawingRef.current) return;\n                isMouseDrawingRef.current = false;\n                setDrawingPoints((prev) => (prev.length > 0 && prev[prev.length - 1] !== null ? [...prev, null] : prev));\n            }}\n            onMouseLeave={() => {\n                if (!isMouseDrawingRef.current) return;\n                isMouseDrawingRef.current = false;\n                setDrawingPoints((prev) => (prev.length > 0 && prev[prev.length - 1] !== null ? [...prev, null] : prev));\n            }}\n            style={{\n                position: \"relative\",\n                width: \"100vw\",\n                height: \"100vh\",\n                overflow: \"hidden\",\n                background: \"black\",\n            }}\n        >\n            <WiiDisconnectPopup\n                isPlaying={isPlaying}\n                startedWithWii={startedWithWii}\n                wiiConnected={wiiConnected}\n                wiiDisconnectedAt={wiiDisconnectedAt}\n                playingSince={playingSince}\n            />\n\n            {/* Êàª„Çã„Éú„Çø„É≥ÔºàÂ∑¶‰∏äÔºâ */}\n            <div style={{ position: \"absolute\", top: 20, left: 20, zIndex: 10000 }}>\n                <button onClick={goBack} style={{ padding: \"10px 14px\", fontSize: 14 }}>\n                    {returnLabel}\n                </button>\n            </div>\n\n            {/* „É™„Ç¢„ÇØ„Ç∑„Éß„É≥ */}\n            <ReactionOverlay emitClap={shouldEmitClap} emitLaugh={shouldEmitLaugh} />\n\n            {/* „Çπ„É©„Ç§„ÉâË°®Á§∫„Ç®„É™„Ç¢ (ÂÖ®ÁîªÈù¢„Éª‰ΩôÁôΩ„Å™„Åó„Éª„Ç¢„Çπ„Éö„ÇØ„ÉàÊØîÁ∂≠ÊåÅ) */}\n            <div style={{ position: \"absolute\", inset: 0, display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n                {currentNode ? (\n                    <>\n                        {currentNode.data.asset?.kind === \"pdf\" ? (\n                            <PdfSlide\n                                assetId={currentNode.data.asset.assetId}\n                                page={currentNode.data.asset.page ?? 1}\n                                fallbackDataUrl={currentNode.data.asset.thumbnailDataUrl}\n                                alt={currentNode.data.label}\n                                getOrLoadPdfDocument={getOrLoadPdfDocument}\n                            />\n                        ) : currentNode.data.asset?.kind === \"video\" ? (\n                            <VideoSlide assetId={currentNode.data.asset.assetId} alt={currentNode.data.label} />\n                        ) : (\n                            <h1 style={{ fontSize: 80, color: \"white\", textAlign: \"center\", maxWidth: \"80%\" }}>\n                                {currentNode.data.label}\n                            </h1>\n                        )}\n                    </>\n                ) : (\n                    <div style={{ color: \"white\" }}>{error ?? \"„Çπ„É©„Ç§„Éâ„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì\"}</div>\n                )}\n            </div>\n\n            {/* ÊèèÁîª„É¨„Ç§„É§„Éº (ÊúÄÂâçÈù¢) */}\n            <canvas\n                ref={canvasRef}\n                style={{ position: \"absolute\", top: 0, left: 0, pointerEvents: \"none\" }}\n            />\n\n            {/* „Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†± (Âè≥‰∏ä) */}\n            <WiiDebugPanel\n                wiiState={wiiState}\n                pressed={pressed}\n                effectiveProjectBindings={effectiveProjectBindings}\n            />\n\n            {/* Êìç‰Ωú„Ç¨„Ç§„Éâ (Â∑¶‰∏ã) */}\n            <div style={{ position: \"absolute\", bottom: 20, left: 20, color: \"rgba(255,255,255,0.5)\", fontSize: 14, pointerEvents: \"none\" }}>\n                [ESC] Êàª„Çã\n            </div>\n        </main>\n    );\n}"],"names":[],"mappings":"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"}}]
}