{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/editor/nodes/SlideNode.tsx"],"sourcesContent":["\"use client\";\n\nimport { Handle, Position, type NodeProps, useStore, type Edge } from \"reactflow\";\nimport type { SlideNodeData } from \"@/lib/presentation\";\n\nfunction computeBranchKeys(nodeId: string, rfEdges: Edge[]): string[] {\n\tconst bySource = new Map<string, Edge[]>();\n\tfor (const e of rfEdges) {\n\t\tconst arr = bySource.get(e.source);\n\t\tif (arr) arr.push(e);\n\t\telse bySource.set(e.source, [e]);\n\t}\n\n\tconst keys = new Set<string>();\n\tfor (const [, outgoingEdges] of bySource.entries()) {\n\t\tif (outgoingEdges.length < 2) continue;\n\n\t\tconst options: Array<{ key: string; target: string }> = [];\n\t\tconst used = new Set<string>();\n\n\t\tfor (const edge of outgoingEdges) {\n\t\t\tconst label = String(edge.label ?? \"\").trim();\n\t\t\tconst m = label.match(/^([1-9])(?:\\b|\\s|:|-)/);\n\t\t\tif (m) {\n\t\t\t\tconst k = m[1];\n\t\t\t\tif (!used.has(k)) {\n\t\t\t\t\toptions.push({ key: k, target: edge.target });\n\t\t\t\t\tused.add(k);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const edge of outgoingEdges) {\n\t\t\tif (options.length >= 9) break;\n\t\t\tconst nextKey = String(options.length + 1);\n\t\t\tif (used.has(nextKey)) continue;\n\t\t\toptions.push({ key: nextKey, target: edge.target });\n\t\t\tused.add(nextKey);\n\t\t}\n\n\t\tconst found = options.find((o) => o.target === nodeId);\n\t\tif (found?.key) {\n\t\t\tconst numKey = parseInt(found.key, 10);\n\t\t\tif (numKey >= 1 && numKey <= 9) {\n\t\t\t\tkeys.add(String.fromCharCode(64 + numKey));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn Array.from(keys).sort();\n}\n\nfunction ThumbnailPreview({ data }: { data: SlideNodeData }) {\n\tconst previewStyle: React.CSSProperties = {\n\t\twidth: \"100%\",\n\t\theight: 160,\n\t\tobjectFit: \"cover\",\n\t\tborderRadius: 6,\n\t};\n\n\tconst placeholderStyle: React.CSSProperties = {\n\t\twidth: \"100%\",\n\t\theight: 160,\n\t\tborderRadius: 6,\n\t\tbackground: \"#f5f5f5\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tfontSize: 12,\n\t};\n\n\tif (data.asset?.thumbnailDataUrl) {\n\t\treturn <img alt={data.label} src={data.asset.thumbnailDataUrl} style={previewStyle} />;\n\t}\n\n\tif (data.asset?.kind === \"image\") {\n\t\treturn <div style={placeholderStyle}>ÁîªÂÉè: {data.asset.fileName}</div>;\n\t}\n\n\tif (data.asset?.kind === \"video\") {\n\t\treturn <div style={placeholderStyle}>ÂãïÁîª: {data.asset.fileName}</div>;\n\t}\n\n\treturn <div style={placeholderStyle}>(„Åì„Åì„Å´„Çµ„É†„Éç„Ç§„É´)</div>;\n}\n\nexport function SlideNode({ id, data, selected }: NodeProps<SlideNodeData>) {\n\tconst rfEdges = useStore((s) => s.edges);\n\tconst branchKeys = computeBranchKeys(id, rfEdges);\n\n\tconst isConnectableMedia =\n\t\tdata.asset?.kind === \"pdf\" || data.asset?.kind === \"video\" || data.asset?.kind === \"image\";\n\n\tconst handleStyle: React.CSSProperties = {\n\t\twidth: 28,\n\t\theight: 28,\n\t\tborderRadius: 999,\n\t\tbackground: \"#fff\",\n\t\tborder: \"2px solid #666\",\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tposition: \"relative\",\n\t\t\t\twidth: 260,\n\t\t\t\tborder: \"1px solid #ddd\",\n\t\t\t\tborderRadius: 8,\n\t\t\t\tpadding: 8,\n\t\t\t\tbackground: selected ? \"#fafafa\" : \"white\",\n\t\t\t}}\n\t\t>\n\t\t\t{isConnectableMedia && (\n\t\t\t\t<>\n\t\t\t\t\t<Handle\n\t\t\t\t\t\ttype=\"target\"\n\t\t\t\t\t\tposition={Position.Left}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t...handleStyle,\n\t\t\t\t\t\t\tleft: -18,\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\t\t\tfontSize: 12,\n\t\t\t\t\t\t\tfontWeight: 700,\n\t\t\t\t\t\t\tcolor: \"#111\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{branchKeys.length > 0 ? branchKeys.join(\"/\") : null}\n\t\t\t\t\t</Handle>\n\t\t\t\t\t<Handle type=\"source\" position={Position.Right} style={{ ...handleStyle, right: -18 }} />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<div style={{ fontSize: 12, fontWeight: 600, marginBottom: 6 }}>{data.label}</div>\n\t\t\t<ThumbnailPreview data={data} />\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/presentation.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\n\nexport type ProjectAsset = {\n\tid: string;\n\tkind: \"pdf\" | \"video\" | \"image\";\n\tfileName: string;\n\tstoredFileName: string; // assets/ ÈÖç‰∏ã„ÅÆ„Éï„Ç°„Ç§„É´Âêç\n};\n\nexport type AssetRef =\n\t| {\n\t\t\tkind: \"pdf\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tpage: number;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"video\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  }\n\t| {\n\t\t\tkind: \"image\";\n\t\t\tassetId: string;\n\t\t\tfileName: string;\n\t\t\tthumbnailDataUrl?: string;\n\t  };\n\nexport type SlideNodeData = {\n\tlabel: string;\n\tasset?: AssetRef;\n\tbindings?: ButtonBindings;\n};\n\nexport type SerializedFlow = {\n\tversion: 1;\n\tassets?: ProjectAsset[];\n\tviewport?: { x: number; y: number; zoom: number };\n\tprojectBindings?: ButtonBindings;\n\tnodes: Array<{\n\t\tid: string;\n\t\ttype?: string;\n\t\tposition: { x: number; y: number };\n\t\tdata: SlideNodeData;\n\t}>;\n\tedges: Array<{\n\t\tid: string;\n\t\tsource: string;\n\t\ttarget: string;\n\t\tlabel?: string;\n\t}>;\n};\n\nconst STORAGE_KEY = \"wiisugeee.editor.flow.v1\";\nconst LAST_SAVED_HASH_KEY = \"wiisugeee.editor.lastSavedHash.v1\";\n\nexport function serializeFlow(flow: SerializedFlow): string {\n\treturn JSON.stringify(flow, null, 2);\n}\n\nexport function tryParseFlowJson(text: string): SerializedFlow | null {\n\ttry {\n\t\tconst parsed = JSON.parse(text) as unknown;\n\t\tif (!parsed || typeof parsed !== \"object\") return null;\n\t\tconst maybe = parsed as Partial<SerializedFlow>;\n\t\tif (maybe.version !== 1) return null;\n\t\tif (!Array.isArray(maybe.nodes) || !Array.isArray(maybe.edges)) return null;\n\t\treturn maybe as SerializedFlow;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function saveToLocalStorage(flow: SerializedFlow): void {\n\ttry {\n\t\tlocalStorage.setItem(STORAGE_KEY, serializeFlow(flow));\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function loadFromLocalStorage(): SerializedFlow | null {\n\ttry {\n\t\tconst text = localStorage.getItem(STORAGE_KEY);\n\t\tif (!text) return null;\n\t\treturn tryParseFlowJson(text);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getLastSavedHash(): string | null {\n\ttry {\n\t\treturn localStorage.getItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function setLastSavedHash(hash: string): void {\n\ttry {\n\t\tlocalStorage.setItem(LAST_SAVED_HASH_KEY, hash);\n\t} catch {\n\t\t// ignore\n\t}\n}\n\nexport function clearEditorStorage(): void {\n\ttry {\n\t\tlocalStorage.removeItem(STORAGE_KEY);\n\t\tlocalStorage.removeItem(LAST_SAVED_HASH_KEY);\n\t} catch {\n\t\t// ignore\n\t}\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAuDA,MAAM,cAAc;AACpB,MAAM,sBAAsB;AAErB,SAAS,cAAc,IAAoB;IACjD,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;AACnC;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU,OAAO;QAClD,MAAM,QAAQ;QACd,IAAI,MAAM,OAAO,KAAK,GAAG,OAAO;QAChC,IAAI,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,OAAO,CAAC,MAAM,KAAK,GAAG,OAAO;QACvE,OAAO;IACR,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,mBAAmB,IAAoB;IACtD,IAAI;QACH,aAAa,OAAO,CAAC,aAAa,cAAc;IACjD,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,iBAAiB;IACzB,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS;IACf,IAAI;QACH,OAAO,aAAa,OAAO,CAAC;IAC7B,EAAE,OAAM;QACP,OAAO;IACR;AACD;AAEO,SAAS,iBAAiB,IAAY;IAC5C,IAAI;QACH,aAAa,OAAO,CAAC,qBAAqB;IAC3C,EAAE,OAAM;IACP,SAAS;IACV;AACD;AAEO,SAAS;IACf,IAAI;QACH,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IACzB,EAAE,OAAM;IACP,SAAS;IACV;AACD"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/idbAssets.ts"],"sourcesContent":["const DB_NAME = \"wiislide\";\nconst DB_VERSION = 1;\nconst STORE_NAME = \"assets\";\n\nfunction openDb(): Promise<IDBDatabase> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst req = indexedDB.open(DB_NAME, DB_VERSION);\n\t\treq.onupgradeneeded = () => {\n\t\t\tconst db = req.result;\n\t\t\tif (!db.objectStoreNames.contains(STORE_NAME)) {\n\t\t\t\tdb.createObjectStore(STORE_NAME);\n\t\t\t}\n\t\t};\n\t\treq.onsuccess = () => resolve(req.result);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function putAssetBlob(assetId: string, blob: Blob): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).put(blob, assetId);\n\t});\n}\n\nexport async function getAssetBlob(assetId: string): Promise<Blob | null> {\n\tconst db = await openDb();\n\treturn await new Promise<Blob | null>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readonly\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\tconst req = tx.objectStore(STORE_NAME).get(assetId);\n\t\treq.onsuccess = () => resolve((req.result as Blob | undefined) ?? null);\n\t\treq.onerror = () => reject(req.error);\n\t});\n}\n\nexport async function clearAllAssetBlobs(): Promise<void> {\n\tconst db = await openDb();\n\tawait new Promise<void>((resolve, reject) => {\n\t\tconst tx = db.transaction(STORE_NAME, \"readwrite\");\n\t\ttx.oncomplete = () => {\n\t\t\tdb.close();\n\t\t\tresolve();\n\t\t};\n\t\ttx.onerror = () => {\n\t\t\tdb.close();\n\t\t\treject(tx.error);\n\t\t};\n\t\ttx.objectStore(STORE_NAME).clear();\n\t});\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB,SAAS;IACR,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC5B,MAAM,MAAM,UAAU,IAAI,CAAC,SAAS;QACpC,IAAI,eAAe,GAAG;YACrB,MAAM,KAAK,IAAI,MAAM;YACrB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC9C,GAAG,iBAAiB,CAAC;YACtB;QACD;QACA,IAAI,SAAS,GAAG,IAAM,QAAQ,IAAI,MAAM;QACxC,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe,aAAa,OAAe,EAAE,IAAU;IAC7D,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC,MAAM;IACtC;AACD;AAEO,eAAe,aAAa,OAAe;IACjD,MAAM,KAAK,MAAM;IACjB,OAAO,MAAM,IAAI,QAAqB,CAAC,SAAS;QAC/C,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;QACT;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,MAAM,MAAM,GAAG,WAAW,CAAC,YAAY,GAAG,CAAC;QAC3C,IAAI,SAAS,GAAG,IAAM,QAAQ,AAAC,IAAI,MAAM,IAAyB;QAClE,IAAI,OAAO,GAAG,IAAM,OAAO,IAAI,KAAK;IACrC;AACD;AAEO,eAAe;IACrB,MAAM,KAAK,MAAM;IACjB,MAAM,IAAI,QAAc,CAAC,SAAS;QACjC,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,GAAG,UAAU,GAAG;YACf,GAAG,KAAK;YACR;QACD;QACA,GAAG,OAAO,GAAG;YACZ,GAAG,KAAK;YACR,OAAO,GAAG,KAAK;QAChB;QACA,GAAG,WAAW,CAAC,YAAY,KAAK;IACjC;AACD"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/buttonBindings.ts"],"sourcesContent":["import type { WiiState } from \"@/hooks/useWiiController\";\r\n\r\nexport type WiiButton = keyof WiiState[\"buttons\"];\r\n\r\nexport type BindingAction =\r\n\t| { type: \"none\"; subtype?: string }\r\n\t| { type: \"next\" }\r\n\t| { type: \"prev\" }\r\n\t| { type: \"branch\"; kind: \"A\" | \"B\" | \"HOME\" }\r\n\t| { type: \"branchIndex\"; index: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 }\r\n\t| { type: \"reaction\"; kind: \"clap\" | \"laugh\" }\r\n\t| { type: \"paint\" }\r\n\t| { type: \"eraser\" }\r\n\t| { type: \"sound\"; kind: \"shot\" | \"oh\" | \"uxo\"; outputDevice?: \"pc\" | \"wii\" }\r\n\t| { type: \"remove\" }\r\n\t| { type: \"irSens\" };\r\n\r\nexport type ButtonBindings = Partial<Record<WiiButton, BindingAction>>;\r\n\r\nexport type SoundOutputDevice = \"pc\" | \"wii\";\r\n\r\nexport interface SoundSettings {\r\n\toutputDevice: SoundOutputDevice;\r\n}\r\n\r\nexport const DEFAULT_SOUND_SETTINGS: SoundSettings = {\r\n\toutputDevice: \"pc\",\r\n};\r\n\r\nexport const DEFAULT_BINDINGS: ButtonBindings = {\r\n\tRight: { type: \"next\" },\r\n\tLeft: { type: \"prev\" },\r\n\tPlus: { type: \"branch\", kind: \"A\" },\r\n\tMinus: { type: \"branch\", kind: \"B\" },\r\n\tHome: { type: \"branch\", kind: \"HOME\" },\r\n\tOne: { type: \"reaction\", kind: \"clap\" },\r\n\tTwo: { type: \"reaction\", kind: \"laugh\" },\r\n};\r\n\r\nexport function formatAction(a: BindingAction): string {\r\n\tswitch (a.type) {\r\n\t\tcase \"none\":\r\n\t\t\treturn \"Êú™Ââ≤ÂΩì\";\r\n\t\tcase \"next\":\r\n\t\t\treturn \"Ê¨°„Å∏\";\r\n\t\tcase \"prev\":\r\n\t\t\treturn \"Êàª„Çã\";\r\n\t\tcase \"branch\":\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"A\":\r\n\t\t\t\t\treturn \"A„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"B\":\r\n\t\t\t\t\treturn \"B„É´„Éº„Éà„Å∏ÂàÜÂ≤ê\";\r\n\t\t\t\tcase \"HOME\":\r\n\t\t\t\t\treturn \"HOME„Å∏Êàª„Çã\";\r\n\t\t\t}\r\n\t\tcase \"branchIndex\":\r\n\t\t\treturn `ÂàÜÂ≤ê ${a.index}`;\r\n\t\tcase \"reaction\":\r\n\t\t\treturn a.kind === \"clap\" ? \"ÊãçÊâã\" : \"Á¨ë„ÅÑ\";\r\n\t\tcase \"paint\":\r\n\t\t\treturn \"PAINTüé®\";\r\n\t\tcase \"eraser\":\r\n\t\t\treturn \"ERASER\";\r\n\t\tcase \"sound\": {\r\n\t\t\tconst device = a.outputDevice === \"wii\" ? \"[Wii]\" : \"[PC]\";\r\n\t\t\tswitch (a.kind) {\r\n\t\t\t\tcase \"shot\":\r\n\t\t\t\t\treturn `SHOTüîä${device}`;\r\n\t\t\t\tcase \"oh\":\r\n\t\t\t\t\treturn `Oh...üîä${device}`;\r\n\t\t\t\tcase \"uxo\":\r\n\t\t\t\t\treturn `Uxo~üîä${device}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase \"remove\":\r\n\t\t\treturn \"REMOVE\";\r\n\t\tcase \"irSens\":\r\n\t\t\treturn \"IRSensÂàáÊõø\";\r\n\t}\r\n}\r\n\r\nexport function mergeBindings(bindings?: ButtonBindings): ButtonBindings {\r\n\treturn {\r\n\t\t...DEFAULT_BINDINGS,\r\n\t\t...(bindings ?? {}),\r\n\t};\r\n}\r\n\r\nexport function encodeAction(a: BindingAction): string {\r\n\treturn JSON.stringify(a);\r\n}\r\n\r\nexport function decodeAction(s: string): BindingAction {\r\n\treturn JSON.parse(s) as BindingAction;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAyBO,MAAM,yBAAwC;IACpD,cAAc;AACf;AAEO,MAAM,mBAAmC;IAC/C,OAAO;QAAE,MAAM;IAAO;IACtB,MAAM;QAAE,MAAM;IAAO;IACrB,MAAM;QAAE,MAAM;QAAU,MAAM;IAAI;IAClC,OAAO;QAAE,MAAM;QAAU,MAAM;IAAI;IACnC,MAAM;QAAE,MAAM;QAAU,MAAM;IAAO;IACrC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAO;IACtC,KAAK;QAAE,MAAM;QAAY,MAAM;IAAQ;AACxC;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAQ,EAAE,IAAI;QACb,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAQ,EAAE,IAAI;gBACb,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;gBACR,KAAK;oBACJ,OAAO;YACT;QACD,KAAK;YACJ,OAAO,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE;QACvB,KAAK;YACJ,OAAO,EAAE,IAAI,KAAK,SAAS,OAAO;QACnC,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;QACR,KAAK;YAAS;gBACb,MAAM,SAAS,EAAE,YAAY,KAAK,QAAQ,UAAU;gBACpD,OAAQ,EAAE,IAAI;oBACb,KAAK;wBACJ,OAAO,CAAC,MAAM,EAAE,QAAQ;oBACzB,KAAK;wBACJ,OAAO,CAAC,OAAO,EAAE,QAAQ;oBAC1B,KAAK;wBACJ,OAAO,CAAC,MAAM,EAAE,QAAQ;gBAC1B;YACD;QACA,KAAK;YACJ,OAAO;QACR,KAAK;YACJ,OAAO;IACT;AACD;AAEO,SAAS,cAAc,QAAyB;IACtD,OAAO;QACN,GAAG,gBAAgB;QACnB,GAAI,YAAY,CAAC,CAAC;IACnB;AACD;AAEO,SAAS,aAAa,CAAgB;IAC5C,OAAO,KAAK,SAAS,CAAC;AACvB;AAEO,SAAS,aAAa,CAAS;IACrC,OAAO,KAAK,KAAK,CAAC;AACnB"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectBindingsStorage.ts"],"sourcesContent":["import type { ButtonBindings } from \"@/lib/buttonBindings\";\r\n\r\nfunction key(projectId: string) {\r\n    return `wiiSugeee:projectBindings:${projectId}`;\r\n}\r\n\r\nexport function loadProjectBindings(projectId: string): ButtonBindings | undefined {\r\n    try {\r\n        const raw = localStorage.getItem(key(projectId));\r\n        if (!raw) return undefined;\r\n        return JSON.parse(raw) as ButtonBindings;\r\n    } catch {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nexport function saveProjectBindings(projectId: string, bindings: ButtonBindings) {\r\n    try {\r\n        localStorage.setItem(key(projectId), JSON.stringify(bindings));\r\n    } catch {\r\n        // ignore\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,IAAI,SAAiB;IAC1B,OAAO,CAAC,0BAA0B,EAAE,WAAW;AACnD;AAEO,SAAS,oBAAoB,SAAiB;IACjD,IAAI;QACA,MAAM,MAAM,aAAa,OAAO,CAAC,IAAI;QACrC,IAAI,CAAC,KAAK,OAAO;QACjB,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEO,SAAS,oBAAoB,SAAiB,EAAE,QAAwB;IAC3E,IAAI;QACA,aAAa,OAAO,CAAC,IAAI,YAAY,KAAK,SAAS,CAAC;IACxD,EAAE,OAAM;IACJ,SAAS;IACb;AACJ"}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/currentProjectStore.ts"],"sourcesContent":["import type { SerializedFlow } from \"@/lib/presentation\";\r\nimport type { ButtonBindings, SoundSettings } from \"@/lib/buttonBindings\";\r\nimport { DEFAULT_SOUND_SETTINGS } from \"@/lib/buttonBindings\";\r\nimport { loadProjectBindings, saveProjectBindings } from \"@/lib/projectBindingsStorage\";\r\n\r\ntype Listener = () => void;\r\n\r\nlet currentFlow: SerializedFlow | null = null;\r\nlet currentProjectId = \"default\";\r\nconst listeners = new Set<Listener>();\r\n\r\nexport function setCurrentProjectId(projectId: string) {\r\n\tcurrentProjectId = projectId || \"default\";\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nexport function getCurrentProjectId() {\r\n\treturn currentProjectId;\r\n}\r\n\r\nexport function getCurrentFlow(): SerializedFlow | null {\r\n\treturn currentFlow;\r\n}\r\n\r\nexport function setCurrentFlow(flow: SerializedFlow | null) {\r\n\tif (flow) {\r\n\t\tconst stored = typeof window !== \"undefined\" ? loadProjectBindings(currentProjectId) : undefined;\r\n\t\tcurrentFlow = stored ? { ...flow, projectBindings: stored } : flow;\r\n\t} else {\r\n\t\tcurrentFlow = null;\r\n\t}\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nexport function subscribeCurrentFlow(listener: Listener) {\r\n\tlisteners.add(listener);\r\n\treturn () => listeners.delete(listener);\r\n}\r\n\r\nexport function getProjectBindings(): ButtonBindings | undefined {\r\n\tif (currentFlow?.projectBindings) {\r\n\t\treturn currentFlow.projectBindings;\r\n\t}\r\n\tif (typeof window === \"undefined\") return undefined;\r\n\treturn loadProjectBindings(currentProjectId);\r\n}\r\n\r\nexport function setProjectBindings(bindings: ButtonBindings) {\r\n\tif (currentFlow) {\r\n\t\tcurrentFlow = { ...currentFlow, projectBindings: bindings };\r\n\t}\r\n\r\n\tif (typeof window !== \"undefined\") {\r\n\t\tsaveProjectBindings(currentProjectId, bindings);\r\n\t}\r\n\r\n\tfor (const l of listeners) l();\r\n}\r\n\r\nconst SOUND_SETTINGS_KEY_PREFIX = \"wiiSugeee_soundSettings_\";\r\n\r\nexport function getSoundSettings(): SoundSettings {\r\n\tif (typeof window === \"undefined\") {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n\r\n\tconst key = SOUND_SETTINGS_KEY_PREFIX + currentProjectId;\r\n\tconst stored = localStorage.getItem(key);\r\n\r\n\tif (!stored) {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n\r\n\ttry {\r\n\t\treturn JSON.parse(stored) as SoundSettings;\r\n\t} catch {\r\n\t\treturn { ...DEFAULT_SOUND_SETTINGS };\r\n\t}\r\n}\r\n\r\nexport function setSoundSettings(settings: SoundSettings) {\r\n\tif (typeof window === \"undefined\") return;\r\n\r\n\tconst key = SOUND_SETTINGS_KEY_PREFIX + currentProjectId;\r\n\tlocalStorage.setItem(key, JSON.stringify(settings));\r\n\r\n\tfor (const l of listeners) l();\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAEA;AACA;;;AAIA,IAAI,cAAqC;AACzC,IAAI,mBAAmB;AACvB,MAAM,YAAY,IAAI;AAEf,SAAS,oBAAoB,SAAiB;IACpD,mBAAmB,aAAa;IAChC,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEO,SAAS;IACf,OAAO;AACR;AAEO,SAAS;IACf,OAAO;AACR;AAEO,SAAS,eAAe,IAA2B;IACzD,IAAI,MAAM;QACT,MAAM,SAAS,uCAAgC,IAAA,kMAAmB,EAAC,oBAAoB;QACvF,cAAc,SAAS;YAAE,GAAG,IAAI;YAAE,iBAAiB;QAAO,IAAI;IAC/D,OAAO;QACN,cAAc;IACf;IACA,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEO,SAAS,qBAAqB,QAAkB;IACtD,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAC/B;AAEO,SAAS;IACf,IAAI,aAAa,iBAAiB;QACjC,OAAO,YAAY,eAAe;IACnC;IACA;;IACA,OAAO,IAAA,kMAAmB,EAAC;AAC5B;AAEO,SAAS,mBAAmB,QAAwB;IAC1D,IAAI,aAAa;QAChB,cAAc;YAAE,GAAG,WAAW;YAAE,iBAAiB;QAAS;IAC3D;IAEA,wCAAmC;QAClC,IAAA,kMAAmB,EAAC,kBAAkB;IACvC;IAEA,KAAK,MAAM,KAAK,UAAW;AAC5B;AAEA,MAAM,4BAA4B;AAE3B,SAAS;IACf;;IAIA,MAAM,MAAM,4BAA4B;IACxC,MAAM,SAAS,aAAa,OAAO,CAAC;IAEpC,IAAI,CAAC,QAAQ;QACZ,OAAO;YAAE,GAAG,6LAAsB;QAAC;IACpC;IAEA,IAAI;QACH,OAAO,KAAK,KAAK,CAAC;IACnB,EAAE,OAAM;QACP,OAAO;YAAE,GAAG,6LAAsB;QAAC;IACpC;AACD;AAEO,SAAS,iBAAiB,QAAuB;IACvD;;IAEA,MAAM,MAAM,4BAA4B;IACxC,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAEzC,KAAK,MAAM,KAAK,UAAW;AAC5B"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectArchive.ts"],"sourcesContent":["import JSZip from \"jszip\";\nimport { getAssetBlob, putAssetBlob } from \"@/lib/idbAssets\";\nimport { saveToLocalStorage, tryParseFlowJson, type SerializedFlow } from \"@/lib/presentation\";\nimport { getProjectBindings, getCurrentProjectId } from \"@/lib/currentProjectStore\";\nimport { saveProjectBindings } from \"@/lib/projectBindingsStorage\";\n\nasync function showSaveFilePickerCompat(): Promise<FileSystemFileHandle | null> {\n\tconst w = window as unknown as {\n\t\tshowSaveFilePicker?: (options?: {\n\t\t\tsuggestedName?: string;\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle>;\n\t};\n\tif (!w.showSaveFilePicker) return null;\n\ttry {\n\t\treturn await w.showSaveFilePicker({\n\t\t\tsuggestedName: \"wiislide.zip\",\n\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\tstartIn: \"desktop\",\n\t\t});\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nasync function showOpenFilePickerCompat(): Promise<File | null> {\n\tconst w = window as unknown as {\n\t\tshowOpenFilePicker?: (options?: {\n\t\t\ttypes?: Array<{ description?: string; accept: Record<string, string[]> }>;\n\t\t\tmultiple?: boolean;\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemFileHandle[]>;\n\t};\n\tif (w.showOpenFilePicker) {\n\t\ttry {\n\t\t\tconst [handle] = await w.showOpenFilePicker({\n\t\t\t\tmultiple: false,\n\t\t\t\ttypes: [{ description: \"WiiSlide Project\", accept: { \"application/zip\": [\".zip\"] } }],\n\t\t\t\tstartIn: \"desktop\",\n\t\t\t});\n\t\t\tif (!handle) return null;\n\t\t\treturn await handle.getFile();\n\t\t} catch {\n\t\t\t// fallthrough\n\t\t}\n\t}\n\n\treturn await new Promise<File | null>((resolve) => {\n\t\tconst input = document.createElement(\"input\");\n\t\tinput.type = \"file\";\n\t\tinput.accept = \".zip,application/zip\";\n\t\tinput.onchange = () => resolve(input.files?.[0] ?? null);\n\t\tinput.click();\n\t});\n}\n\nfunction downloadBlob(blob: Blob, filename: string) {\n\tconst url = URL.createObjectURL(blob);\n\tconst a = document.createElement(\"a\");\n\ta.href = url;\n\ta.download = filename;\n\ta.click();\n\tURL.revokeObjectURL(url);\n}\n\nexport async function saveProjectAsZip(flow: SerializedFlow): Promise<void> {\n\tconst latestBindings = getProjectBindings();\n\tconst flowWithBindings: SerializedFlow = latestBindings\n\t\t? { ...flow, projectBindings: latestBindings }\n\t\t: flow;\n\n\tconst zip = new JSZip();\n\tzip.file(\"project.json\", JSON.stringify(flowWithBindings, null, 2));\n\n\tconst assets = flowWithBindings.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst blob = await getAssetBlob(asset.id);\n\t\tif (!blob) throw new Error(`„Ç¢„Çª„ÉÉ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì: ${asset.fileName}`);\n\t\tzip.file(`assets/${asset.storedFileName}`, blob);\n\t}\n\n\tconst zipBlob = await zip.generateAsync({ type: \"blob\" });\n\tconst handle = await showSaveFilePickerCompat();\n\tif (!handle) {\n\t\tdownloadBlob(zipBlob, \"wiislide.zip\");\n\t\treturn;\n\t}\n\tconst writable = await handle.createWritable();\n\tawait writable.write(zipBlob);\n\tawait writable.close();\n}\n\nexport async function loadProjectFromZipFile(file: File): Promise<SerializedFlow> {\n\tconst zip = await JSZip.loadAsync(file);\n\tconst projectText = await zip.file(\"project.json\")?.async(\"string\");\n\tif (!projectText) throw new Error(\"project.json „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì\");\n\n\tconst parsed = tryParseFlowJson(projectText);\n\tif (!parsed) throw new Error(\"project.json „ÅÆÂΩ¢Âºè„Åå‰∏çÊ≠£„Åß„Åô\");\n\n\tconst assets = parsed.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst entry = zip.file(`assets/${asset.storedFileName}`);\n\t\tif (!entry) throw new Error(`assets/${asset.storedFileName} „ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`);\n\t\tconst blob = await entry.async(\"blob\");\n\t\tawait putAssetBlob(asset.id, blob);\n\t}\n\n\tif (parsed.projectBindings) {\n\t\tconst projectId = getCurrentProjectId();\n\t\tsaveProjectBindings(projectId, parsed.projectBindings);\n\t}\n\n\tsaveToLocalStorage(parsed);\n\treturn parsed;\n}\n\nexport async function loadProjectFromZip(): Promise<SerializedFlow> {\n\tconst file = await showOpenFilePickerCompat();\n\tif (!file) throw new Error(\"„Éï„Ç°„Ç§„É´„ÅåÈÅ∏Êäû„Åï„Çå„Åæ„Åõ„Çì„Åß„Åó„Åü\");\n\treturn await loadProjectFromZipFile(file);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/lib/projectFolder.ts"],"sourcesContent":["import { getAssetBlob, putAssetBlob } from \"@/lib/idbAssets\";\nimport {\n\tloadFromLocalStorage,\n\tsaveToLocalStorage,\n\ttryParseFlowJson,\n\ttype ProjectAsset,\n\ttype SerializedFlow,\n} from \"@/lib/presentation\";\n\nfunction sanitizeFileName(name: string): string {\n\treturn name.replaceAll(/[^a-zA-Z0-9._-]+/g, \"_\");\n}\n\nasync function showDirectoryPickerCompat(): Promise<FileSystemDirectoryHandle> {\n\tconst w = window as unknown as {\n\t\tshowDirectoryPicker?: (options?: {\n\t\t\tid?: string;\n\t\t\tmode?: \"read\" | \"readwrite\";\n\t\t\tstartIn?: unknown;\n\t\t}) => Promise<FileSystemDirectoryHandle>;\n\t};\n\tif (!w.showDirectoryPicker) throw new Error(\"showDirectoryPicker is not supported\");\n\treturn await w.showDirectoryPicker({ id: \"wiislide\", mode: \"readwrite\", startIn: \"desktop\" });\n}\n\nasync function ensureWiislideDir(root: FileSystemDirectoryHandle): Promise<FileSystemDirectoryHandle> {\n\tif (root.name === \"wiislide\") return root;\n\treturn await root.getDirectoryHandle(\"wiislide\", { create: true });\n}\n\nasync function ensureAssetsDir(wiislideDir: FileSystemDirectoryHandle): Promise<FileSystemDirectoryHandle> {\n\treturn await wiislideDir.getDirectoryHandle(\"assets\", { create: true });\n}\n\nasync function writeTextFile(dir: FileSystemDirectoryHandle, name: string, text: string): Promise<void> {\n\tconst fh = await dir.getFileHandle(name, { create: true });\n\tconst writable = await fh.createWritable();\n\tawait writable.write(text);\n\tawait writable.close();\n}\n\nasync function writeBlobFile(dir: FileSystemDirectoryHandle, name: string, blob: Blob): Promise<void> {\n\tconst fh = await dir.getFileHandle(name, { create: true });\n\tconst writable = await fh.createWritable();\n\tawait writable.write(blob);\n\tawait writable.close();\n}\n\nasync function readTextFile(dir: FileSystemDirectoryHandle, name: string): Promise<string> {\n\tconst fh = await dir.getFileHandle(name);\n\tconst file = await fh.getFile();\n\treturn await file.text();\n}\n\nasync function readBlobFile(dir: FileSystemDirectoryHandle, name: string): Promise<Blob> {\n\tconst fh = await dir.getFileHandle(name);\n\tconst file = await fh.getFile();\n\treturn file;\n}\n\nexport function createAssetMeta(kind: \"pdf\" | \"video\" | \"image\", originalFileName: string, assetId: string): ProjectAsset {\n\tconst safe = sanitizeFileName(originalFileName);\n\treturn {\n\t\tid: assetId,\n\t\tkind,\n\t\tfileName: originalFileName,\n\t\tstoredFileName: `${assetId}_${safe}`,\n\t};\n}\n\nexport async function saveProjectToWiislideFolder(): Promise<void> {\n\tconst flow = loadFromLocalStorage();\n\tif (!flow) throw new Error(\"„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì\");\n\n\tconst rootDir = await showDirectoryPickerCompat();\n\tconst wiislideDir = await ensureWiislideDir(rootDir);\n\tconst assetsDir = await ensureAssetsDir(wiislideDir);\n\n\tconst assets = flow.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst blob = await getAssetBlob(asset.id);\n\t\tif (!blob) {\n\t\t\tthrow new Error(`„Ç¢„Çª„ÉÉ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì: ${asset.fileName}`);\n\t\t}\n\t\tawait writeBlobFile(assetsDir, asset.storedFileName, blob);\n\t}\n\n\tawait writeTextFile(wiislideDir, \"project.json\", JSON.stringify(flow, null, 2));\n}\n\nexport async function loadProjectFromWiislideFolder(): Promise<SerializedFlow> {\n\tconst rootDir = await showDirectoryPickerCompat();\n\tconst wiislideDir = rootDir.name === \"wiislide\" ? rootDir : await rootDir.getDirectoryHandle(\"wiislide\");\n\tlet assetsDir: FileSystemDirectoryHandle;\n\ttry {\n\t\tassetsDir = await wiislideDir.getDirectoryHandle(\"assets\");\n\t} catch {\n\t\tassetsDir = await wiislideDir.getDirectoryHandle(\"assets\", { create: false });\n\t}\n\n\tconst text = await readTextFile(wiislideDir, \"project.json\");\n\tconst parsed = tryParseFlowJson(text);\n\tif (!parsed) throw new Error(\"project.json „ÅÆÂΩ¢Âºè„Åå‰∏çÊ≠£„Åß„Åô\");\n\n\tconst assets = parsed.assets ?? [];\n\tfor (const asset of assets) {\n\t\tconst blob = await readBlobFile(assetsDir, asset.storedFileName);\n\t\tawait putAssetBlob(asset.id, blob);\n\t}\n\n\tsaveToLocalStorage(parsed);\n\treturn parsed;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 880, "column": 0}, "map": {"version":3,"sources":["file:///Users/yamamototakuma/Desktop/WiiSugeee/frontend/src/components/editor/EditorCanvas.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport ReactFlow, {\n\tControls,\n\tMiniMap,\n\tReactFlowProvider,\n\tPanOnScrollMode,\n\taddEdge,\n\tuseEdgesState,\n\tuseNodesState,\n\tuseReactFlow,\n\tuseStore,\n\ttype Connection,\n\ttype Edge,\n\ttype Node,\n} from \"reactflow\";\nimport { nanoid } from \"nanoid\";\nimport { SlideNode } from \"@/components/editor/nodes/SlideNode\";\nimport {\n\tclearEditorStorage,\n\tgetLastSavedHash,\n\tloadFromLocalStorage,\n\tsaveToLocalStorage,\n\tsetLastSavedHash,\n\ttype ProjectAsset,\n\ttype SerializedFlow,\n\ttype SlideNodeData,\n} from \"@/lib/presentation\";\nimport { clearAllAssetBlobs, putAssetBlob } from \"@/lib/idbAssets\";\nimport { saveProjectAsZip, loadProjectFromZip, loadProjectFromZipFile } from \"@/lib/projectArchive\";\nimport { createAssetMeta } from \"@/lib/projectFolder\";\nimport { setCurrentFlow } from \"@/lib/currentProjectStore\";\n\nfunction hashString(input: string): string {\n\t// djb2\n\tlet hash = 5381;\n\tfor (let i = 0; i < input.length; i++) {\n\t\thash = (hash * 33) ^ input.charCodeAt(i);\n\t}\n\treturn (hash >>> 0).toString(16);\n}\n\nfunction computeFlowHash(flow: SerializedFlow): string {\n\t// viewport „ÅØ‰øùÂ≠òÂØæË±°Â§ñ„Å™„ÅÆ„Åß hash „Åã„ÇâÈô§Â§ñ\n\tconst minimal = {\n\t\tversion: flow.version,\n\t\tassets: flow.assets ?? [],\n\t\tnodes: flow.nodes,\n\t\tedges: flow.edges,\n\t};\n\treturn hashString(JSON.stringify(minimal));\n}\n\nconst EMPTY_FLOW_HASH = computeFlowHash({ version: 1, assets: [], nodes: [], edges: [] });\n\nfunction StarBackground() {\n\t// ReactFlow„ÅÆ„Éë„É≥/„Ç∫„Éº„É†„Å´ËøΩÂæì\n\tconst [tx, ty, zoom] = useStore((s) => s.transform);\n\n\t// „ÇÇ„Å®„ÇÇ„Å®„ÅÆ <Background /> „ÅÆ„Éá„Éï„Ç©„É´„ÉàÊÑü„Å´Âêà„Çè„Åõ„Çã\n\tconst gap = 25;\n\tconst outer = 1.2;\n\tconst inner = 0.6;\n\tconst cx = gap / 2;\n\tconst cy = gap / 2;\n\t// 4„Å§„ÅÆÂ∞ñ„Çä„ÅØouter„ÄÅËæ∫„ÅØÂÜÖÂÅ¥(inner)„Å∏ÊπæÊõ≤\n\tconst starPath = `M ${cx} ${cy - outer} Q ${cx + inner} ${cy - inner} ${cx + outer} ${cy} Q ${cx + inner} ${cy + inner} ${cx} ${cy + outer} Q ${cx - inner} ${cy + inner} ${cx - outer} ${cy} Q ${cx - inner} ${cy - inner} ${cx} ${cy - outer} Z`;\n\n\treturn (\n\t\t<svg\n\t\t\tclassName=\"react-flow__background\"\n\t\t\taria-hidden=\"true\"\n\t\t\tstyle={{ width: \"100%\", height: \"100%\", position: \"absolute\", inset: 0, pointerEvents: \"none\" }}\n\t\t>\n\t\t\t<defs>\n\t\t\t\t<pattern\n\t\t\t\t\tid=\"rf-star-bg\"\n\t\t\t\t\tpatternUnits=\"userSpaceOnUse\"\n\t\t\t\t\twidth={gap}\n\t\t\t\t\theight={gap}\n\t\t\t\t\tpatternTransform={`translate(${tx} ${ty}) scale(${zoom})`}\n\t\t\t\t>\n\t\t\t\t\t<path d={starPath} fill=\"#aaa\" />\n\t\t\t\t</pattern>\n\t\t\t</defs>\n\t\t\t<rect width=\"100%\" height=\"100%\" fill=\"url(#rf-star-bg)\" />\n\t\t</svg>\n\t);\n}\n\nasync function pdfToThumbnails(file: File): Promise<Array<{ page: number; dataUrl?: string }>> {\n\tconst arrayBuffer = await file.arrayBuffer();\n\tconst pdfjs = await import(\"pdfjs-dist/legacy/build/pdf.mjs\");\n\tpdfjs.GlobalWorkerOptions.workerSrc = new URL(\n\t\t\"pdfjs-dist/legacy/build/pdf.worker.min.mjs\",\n\t\timport.meta.url,\n\t).toString();\n\n\tconst loadingTask = pdfjs.getDocument({ data: arrayBuffer });\n\tconst pdf = await loadingTask.promise;\n\tconst results: Array<{ page: number; dataUrl?: string }> = [];\n\n\tfor (let pageIndex = 1; pageIndex <= pdf.numPages; pageIndex++) {\n\t\tconst page = await pdf.getPage(pageIndex);\n\t\tconst viewport = page.getViewport({ scale: 1 });\n\t\tconst targetWidth = 240;\n\t\tconst scale = targetWidth / viewport.width;\n\t\tconst scaledViewport = page.getViewport({ scale });\n\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = Math.floor(scaledViewport.width);\n\t\tcanvas.height = Math.floor(scaledViewport.height);\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tif (!ctx) {\n\t\t\tresults.push({ page: pageIndex });\n\t\t\tcontinue;\n\t\t}\n\t\tawait page.render({ canvasContext: ctx, canvas, viewport: scaledViewport }).promise;\n\t\tresults.push({ page: pageIndex, dataUrl: canvas.toDataURL(\"image/png\") });\n\t}\n\n\treturn results;\n}\n\nasync function videoToThumbnailDataUrl(file: File): Promise<string | undefined> {\n\tconst url = URL.createObjectURL(file);\n\ttry {\n\t\tconst video = document.createElement(\"video\");\n\t\tvideo.src = url;\n\t\tvideo.muted = true;\n\t\tvideo.playsInline = true;\n\t\tvideo.preload = \"metadata\";\n\n\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\tvideo.onloadedmetadata = () => resolve();\n\t\t\tvideo.onerror = () => reject(new Error(\"ÂãïÁîª„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\"));\n\t\t});\n\n\t\tconst duration = Number.isFinite(video.duration) ? video.duration : 0;\n\t\tconst targetTime = duration > 0 ? Math.min(0.1, Math.max(0, duration - 0.01)) : 0;\n\t\tif (targetTime > 0) {\n\t\t\tvideo.currentTime = targetTime;\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\tvideo.onseeked = () => resolve();\n\t\t\t\tvideo.onerror = () => reject(new Error(\"ÂãïÁîª„ÅÆ„Ç∑„Éº„ÇØ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\"));\n\t\t\t});\n\t\t}\n\n\t\tconst vw = video.videoWidth;\n\t\tconst vh = video.videoHeight;\n\t\tif (!vw || !vh) return undefined;\n\n\t\tconst targetWidth = 240;\n\t\tconst scale = targetWidth / vw;\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = targetWidth;\n\t\tcanvas.height = Math.max(1, Math.floor(vh * scale));\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tif (!ctx) return undefined;\n\t\tctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n\t\treturn canvas.toDataURL(\"image/jpeg\", 0.5);\n\t} finally {\n\t\tURL.revokeObjectURL(url);\n\t}\n}\n\nasync function imageToThumbnailDataUrl(file: File): Promise<string | undefined> {\n\tconst url = URL.createObjectURL(file);\n\ttry {\n\t\tconst img = document.createElement(\"img\");\n\t\timg.decoding = \"async\";\n\t\timg.src = url;\n\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\timg.onload = () => resolve();\n\t\t\timg.onerror = () => reject(new Error(\"ÁîªÂÉè„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\"));\n\t\t});\n\n\t\tconst iw = img.naturalWidth;\n\t\tconst ih = img.naturalHeight;\n\t\tif (!iw || !ih) return undefined;\n\n\t\tconst targetWidth = 240;\n\t\tconst scale = targetWidth / iw;\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = targetWidth;\n\t\tcanvas.height = Math.max(1, Math.floor(ih * scale));\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tif (!ctx) return undefined;\n\t\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n\t\treturn canvas.toDataURL(\"image/jpeg\", 0.6);\n\t} finally {\n\t\tURL.revokeObjectURL(url);\n\t}\n}\n\nfunction flowFromState(nodes: Node<SlideNodeData>[], edges: Edge[], assets: ProjectAsset[]): SerializedFlow {\n\tconst flow: SerializedFlow = {\n\t\tversion: 1,\n\t\tassets,\n\t\tnodes: nodes.map((node) => ({\n\t\t\tid: node.id,\n\t\t\ttype: node.type,\n\t\t\tposition: node.position,\n\t\t\tdata: node.data,\n\t\t})),\n\t\tedges: edges.map((edge) => ({\n\t\t\tid: edge.id,\n\t\t\tsource: edge.source,\n\t\t\ttarget: edge.target,\n\t\t\tlabel: typeof edge.label === \"string\" ? edge.label : undefined,\n\t\t})),\n\t};\n\n\tsetCurrentFlow(flow);\n\n\treturn flow;\n}\n\nfunction stateFromFlow(flow: SerializedFlow): { nodes: Node<SlideNodeData>[]; edges: Edge[] } {\n\treturn {\n\t\tnodes: flow.nodes.map((node) => ({\n\t\t\tid: node.id,\n\t\t\ttype: node.type,\n\t\t\tposition: node.position,\n\t\t\tdata: node.data,\n\t\t})),\n\t\tedges: flow.edges.map((edge) => ({\n\t\t\tid: edge.id,\n\t\t\tsource: edge.source,\n\t\t\ttarget: edge.target,\n\t\t\tlabel: edge.label,\n\t\t})),\n\t};\n}\n\nfunction InnerEditor() {\n\tconst router = useRouter();\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\n\tconst { setViewport, getViewport, setCenter } = useReactFlow();\n\tconst [nodes, setNodes, onNodesChange] = useNodesState<SlideNodeData>([]);\n\tconst [edges, setEdges, onEdgesChange] = useEdgesState([]);\n\tconst [assets, setAssets] = useState<ProjectAsset[]>([]);\n\tconst [isHydrated, setIsHydrated] = useState(false);\n\tconst [isImporting, setIsImporting] = useState(false);\n\tconst [selectedNodeIds, setSelectedNodeIds] = useState<string[]>([]);\n\tconst [selectedEdgeIds, setSelectedEdgeIds] = useState<string[]>([]);\n\tconst [showLeaveWarning, setShowLeaveWarning] = useState(false);\n\tconst [lastSavedHash, setLastSavedHashState] = useState<string | null>(null);\n\n\tconst nodeTypes = useMemo(() => ({ slide: SlideNode }), []);\n\n\tuseEffect(() => {\n\t\tconst persistedLastSavedHash = getLastSavedHash();\n\t\tsetLastSavedHashState(persistedLastSavedHash);\n\n\t\tconst saved = loadFromLocalStorage();\n\t\tif (!saved) {\n\t\t\tsetAssets([]);\n\t\t\tsetNodes([]);\n\t\t\tsetEdges([]);\n\t\t\tsetIsHydrated(true);\n\t\t\treturn;\n\t\t}\n\n\t\t// ÈÅéÂéª„Éê„Éº„Ç∏„Éß„É≥„Åß„ÄåStart„Äç„Çπ„É©„Ç§„Éâ„ÅåËá™ÂãïÁîüÊàê„Åï„Çå„Å¶„ÅÑ„ÅüÂ†¥Âêà„ÄÅÊú™‰øùÂ≠ò„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß„ÅÇ„Çå„Å∞\n\t\t// „Åù„Çå„Çí‚ÄúÁ©∫„Ç≠„É£„É≥„Éê„Çπ‚Äù„Å®„Åó„Å¶Êâ±„Å£„Å¶„ÄÅ„Ç®„Éá„Ç£„ÇøÁ™ÅÂÖ•ÊôÇ„Å´ Start „ÅåÂá∫„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã„ÄÇ\n\t\tconst looksLikeLegacyAutoStart =\n\t\t\t!persistedLastSavedHash &&\n\t\t\t(saved.assets?.length ?? 0) === 0 &&\n\t\t\tsaved.nodes.length === 1 &&\n\t\t\tsaved.edges.length === 0 &&\n\t\t\tsaved.nodes[0]?.type === \"slide\" &&\n\t\t\tsaved.nodes[0]?.data?.label === \"Start\";\n\t\tif (looksLikeLegacyAutoStart) {\n\t\t\tsetAssets([]);\n\t\t\tsetNodes([]);\n\t\t\tsetEdges([]);\n\t\t\tif (saved.viewport) {\n\t\t\t\tsetViewport(saved.viewport);\n\t\t\t}\n\t\t\tsetIsHydrated(true);\n\t\t\treturn;\n\t\t}\n\n\t\tsetAssets(saved.assets ?? []);\n\t\tconst { nodes: restoredNodes, edges: restoredEdges } = stateFromFlow(saved);\n\t\tsetNodes(restoredNodes);\n\t\tsetEdges(restoredEdges);\n\n\t\tif (saved.viewport) {\n\t\t\tsetViewport(saved.viewport);\n\t\t}\n\t\tsetIsHydrated(true);\n\t}, [setEdges, setNodes, setViewport]);\n\n\tconst currentFlowHash = useMemo(() => {\n\t\tconst flow = flowFromState(nodes, edges, assets);\n\t\treturn computeFlowHash(flow);\n\t}, [assets, edges, nodes]);\n\n\tconst isDirty = useMemo(() => {\n\t\tif (!isHydrated) return false;\n\t\tif (lastSavedHash) return currentFlowHash !== lastSavedHash;\n\t\treturn currentFlowHash !== EMPTY_FLOW_HASH;\n\t}, [currentFlowHash, isHydrated, lastSavedHash]);\n\n\tuseEffect(() => {\n\t\tif (!isHydrated) return;\n\t\tconst flow = flowFromState(nodes, edges, assets);\n\t\tconst currentViewport = getViewport();\n\n\t\tsaveToLocalStorage({\n\t\t\t...flow,\n\t\t\tviewport: currentViewport,\n\t\t});\n\t}, [nodes, edges, assets, getViewport, isHydrated]);\n\n\tconst onConnect = useCallback(\n\t\t(connection: Connection) => {\n\t\t\tsetEdges((eds) => addEdge({ ...connection, label: \"\" }, eds));\n\t\t},\n\t\t[setEdges],\n\t);\n\n\tconst onSelectionChange = useCallback(\n\t\t(params: { nodes: Node<SlideNodeData>[]; edges: Edge[] }) => {\n\t\t\tsetSelectedNodeIds(params.nodes.map((n) => n.id));\n\t\t\tsetSelectedEdgeIds(params.edges.map((e) => e.id));\n\t\t},\n\t\t[],\n\t);\n\n\tconst addSlideNode = useCallback(() => {\n\t\tsetNodes((prev) => {\n\t\t\tconst maxY = prev.reduce((acc, n) => Math.max(acc, n.position.y), 0);\n\t\t\treturn [\n\t\t\t\t...prev,\n\t\t\t\t{\n\t\t\t\t\tid: nanoid(),\n\t\t\t\t\ttype: \"slide\",\n\t\t\t\t\tposition: { x: 420, y: maxY + 220 },\n\t\t\t\t\tdata: { label: \"Slide\" },\n\t\t\t\t},\n\t\t\t];\n\t\t});\n\t}, [setNodes]);\n\n\tconst deleteSelected = useCallback(() => {\n\t\tif (selectedNodeIds.length === 0 && selectedEdgeIds.length === 0) return;\n\t\tsetEdges((prevEdges) => {\n\t\t\tconst nodeIdSet = new Set(selectedNodeIds);\n\t\t\tconst edgeIdSet = new Set(selectedEdgeIds);\n\t\t\treturn prevEdges.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\t!edgeIdSet.has(e.id) && !nodeIdSet.has(e.source) && !nodeIdSet.has(e.target),\n\t\t\t);\n\t\t});\n\t\tsetNodes((prevNodes) => prevNodes.filter((n) => !selectedNodeIds.includes(n.id)));\n\t\tsetSelectedNodeIds([]);\n\t\tsetSelectedEdgeIds([]);\n\t}, [selectedEdgeIds, selectedNodeIds, setEdges, setNodes]);\n\n\tconst selectedNode = useMemo(() => {\n\t\tif (selectedNodeIds.length !== 1) return null;\n\t\treturn nodes.find((n) => n.id === selectedNodeIds[0]) ?? null;\n\t}, [nodes, selectedNodeIds]);\n\n\tconst selectedEdge = useMemo(() => {\n\t\tif (selectedEdgeIds.length !== 1) return null;\n\t\treturn edges.find((e) => e.id === selectedEdgeIds[0]) ?? null;\n\t}, [edges, selectedEdgeIds]);\n\n\tconst updateSelectedNodeLabel = useCallback(\n\t\t(nextLabel: string) => {\n\t\t\tif (!selectedNode) return;\n\t\t\tsetNodes((prev) =>\n\t\t\t\tprev.map((n) => (n.id === selectedNode.id ? { ...n, data: { ...n.data, label: nextLabel } } : n)),\n\t\t\t);\n\t\t},\n\t\t[selectedNode, setNodes],\n\t);\n\n\tconst updateSelectedEdgeLabel = useCallback(\n\t\t(nextLabel: string) => {\n\t\t\tif (!selectedEdge) return;\n\t\t\tsetEdges((prev) => prev.map((e) => (e.id === selectedEdge.id ? { ...e, label: nextLabel } : e)));\n\t\t},\n\t\t[selectedEdge, setEdges],\n\t);\n\n\tconst importFiles = useCallback(\n\t\tasync (files: FileList | File[]) => {\n\t\t\tconst fileArray = Array.from(files);\n\t\t\tif (fileArray.length === 0) return;\n\t\t\tsetIsImporting(true);\n\t\t\ttry {\n\t\t\t\tconst baseX = 80;\n\t\t\t\tconst xStep = 320;\n\t\t\t\tconst maxExistingY = nodes.reduce((acc, n) => Math.max(acc, n.position.y), 0);\n\t\t\t\tlet rowY = nodes.length > 0 ? maxExistingY + 220 : 80;\n\t\t\t\tconst newlyAddedAssets: ProjectAsset[] = [];\n\t\t\t\tconst newlyAddedNodes: Node<SlideNodeData>[] = [];\n\t\t\t\tconst newlyAddedEdges: Edge[] = [];\n\n\t\t\t\tfor (const file of fileArray) {\n\t\t\t\t\tconst name = file.name;\n\t\t\t\t\tconst lower = name.toLowerCase();\n\t\t\t\t\tif (lower.endsWith(\".pdf\")) {\n\t\t\t\t\t\tconst assetId = nanoid();\n\t\t\t\t\t\tawait putAssetBlob(assetId, file);\n\t\t\t\t\t\tnewlyAddedAssets.push(createAssetMeta(\"pdf\", name, assetId));\n\n\t\t\t\t\t\tconst thumbs = await pdfToThumbnails(file);\n\t\t\t\t\t\tconst pdfNodes: Node<SlideNodeData>[] = thumbs.map((thumb, index) => {\n\t\t\t\t\t\t\tconst nodeId = nanoid();\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: nodeId,\n\t\t\t\t\t\t\t\ttype: \"slide\",\n\t\t\t\t\t\t\t\tposition: { x: baseX + index * xStep, y: rowY },\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tlabel: `PDF: ${name} / p${thumb.page}`,\n\t\t\t\t\t\t\t\t\tasset: {\n\t\t\t\t\t\t\t\t\t\tkind: \"pdf\",\n\t\t\t\t\t\t\t\t\t\tassetId,\n\t\t\t\t\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\t\t\t\t\tpage: thumb.page,\n\t\t\t\t\t\t\t\t\t\tthumbnailDataUrl: thumb.dataUrl,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfor (let i = 0; i < pdfNodes.length - 1; i++) {\n\t\t\t\t\t\t\tnewlyAddedEdges.push({\n\t\t\t\t\t\t\t\tid: nanoid(),\n\t\t\t\t\t\t\t\tsource: pdfNodes[i].id,\n\t\t\t\t\t\t\t\ttarget: pdfNodes[i + 1].id,\n\t\t\t\t\t\t\t\tlabel: \"\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewlyAddedNodes.push(...pdfNodes);\n\t\t\t\t\t\trowY += 220;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lower.endsWith(\".png\") || lower.endsWith(\".jpg\") || lower.endsWith(\".jpeg\")) {\n\t\t\t\t\t\tconst assetId = nanoid();\n\t\t\t\t\t\tawait putAssetBlob(assetId, file);\n\t\t\t\t\t\tnewlyAddedAssets.push(createAssetMeta(\"image\", name, assetId));\n\n\t\t\t\t\t\tlet thumbnailDataUrl: string | undefined;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthumbnailDataUrl = await imageToThumbnailDataUrl(file);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tthumbnailDataUrl = undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewlyAddedNodes.push({\n\t\t\t\t\t\t\tid: nanoid(),\n\t\t\t\t\t\t\ttype: \"slide\",\n\t\t\t\t\t\t\tposition: { x: baseX, y: rowY },\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tlabel: `IMG: ${name}`,\n\t\t\t\t\t\t\t\tasset: { kind: \"image\", assetId, fileName: name, thumbnailDataUrl },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\trowY += 220;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lower.endsWith(\".mp4\")) {\n\t\t\t\t\t\tconst assetId = nanoid();\n\t\t\t\t\t\tawait putAssetBlob(assetId, file);\n\t\t\t\t\t\tnewlyAddedAssets.push(createAssetMeta(\"video\", name, assetId));\n\n\t\t\t\t\t\tlet thumbnailDataUrl: string | undefined;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthumbnailDataUrl = await videoToThumbnailDataUrl(file);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tthumbnailDataUrl = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewlyAddedNodes.push({\n\t\t\t\t\t\t\tid: nanoid(),\n\t\t\t\t\t\t\ttype: \"slide\",\n\t\t\t\t\t\t\tposition: { x: baseX, y: rowY },\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tlabel: `VIDEO: ${name}`,\n\t\t\t\t\t\t\t\tasset: { kind: \"video\", assetId, fileName: name, thumbnailDataUrl },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\trowY += 220;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (newlyAddedNodes.length > 0) {\n\t\t\t\t\tsetNodes((prev) => [...prev, ...newlyAddedNodes]);\n\t\t\t\t}\n\t\t\t\tif (newlyAddedEdges.length > 0) {\n\t\t\t\t\tsetEdges((prev) => [...prev, ...newlyAddedEdges]);\n\t\t\t\t}\n\n\t\t\t\tif (newlyAddedAssets.length > 0) {\n\t\t\t\t\tsetAssets((prev) => [...prev, ...newlyAddedAssets]);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tsetIsImporting(false);\n\t\t\t}\n\t\t},\n\t\t[nodes, setEdges, setNodes],\n\t);\n\n\tconst onDrop = useCallback(\n\t\tasync (event: React.DragEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst files = event.dataTransfer?.files;\n\t\t\tif (!files?.length) return;\n\n\t\t\tif (files.length === 1) {\n\t\t\t\tconst file = files[0];\n\t\t\t\tif (file && file.name.toLowerCase().endsWith(\".zip\")) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst loaded = await loadProjectFromZipFile(file);\n\t\t\t\t\t\tconst loadedHash = computeFlowHash(loaded);\n\t\t\t\t\t\tsetLastSavedHash(loadedHash);\n\t\t\t\t\t\tsetLastSavedHashState(loadedHash);\n\t\t\t\t\t\tsetAssets(loaded.assets ?? []);\n\t\t\t\t\t\tconst { nodes: restoredNodes, edges: restoredEdges } = stateFromFlow(loaded);\n\t\t\t\t\t\tsetNodes(restoredNodes);\n\t\t\t\t\t\tsetEdges(restoredEdges);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert(`Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${e instanceof Error ? e.message : String(e)}`);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait importFiles(files);\n\t\t},\n\t\t[importFiles, setEdges, setNodes],\n\t);\n\n\tconst onDragOver = useCallback((event: React.DragEvent) => {\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = \"copy\";\n\t}, []);\n\n\tconst onSaveProject = useCallback(async () => {\n\t\ttry {\n\t\t\tconst flow = flowFromState(nodes, edges, assets);\n\t\t\tsaveToLocalStorage(flow);\n\t\t\tawait saveProjectAsZip(flow);\n\t\t\tconst savedHash = computeFlowHash(flow);\n\t\t\tsetLastSavedHash(savedHash);\n\t\t\tsetLastSavedHashState(savedHash);\n\t\t\talert(\"wiislide.zip „Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü\");\n\t\t} catch (e) {\n\t\t\talert(`‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${e instanceof Error ? e.message : String(e)}`);\n\t\t}\n\t}, [assets, edges, nodes]);\n\n\tconst onLoadProject = useCallback(async () => {\n\t\ttry {\n\t\t\tconst loaded = await loadProjectFromZip();\n\t\t\tconst loadedHash = computeFlowHash(loaded);\n\t\t\tsetLastSavedHash(loadedHash);\n\t\t\tsetLastSavedHashState(loadedHash);\n\t\t\tsetAssets(loaded.assets ?? []);\n\t\t\tconst { nodes: restoredNodes, edges: restoredEdges } = stateFromFlow(loaded);\n\t\t\tsetNodes(restoredNodes);\n\t\t\tsetEdges(restoredEdges);\n\t\t} catch (e) {\n\t\t\talert(`Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${e instanceof Error ? e.message : String(e)}`);\n\t\t}\n\t}, [setEdges, setNodes]);\n\n\tconst onImportClick = useCallback(async () => {\n\t\tconst input = document.createElement(\"input\");\n\t\tinput.type = \"file\";\n\t\tinput.accept = \".pdf,.mp4,.png,.jpg,.jpeg\";\n\t\tinput.multiple = true;\n\t\tinput.onchange = async () => {\n\t\t\tif (!input.files?.length) return;\n\t\t\tawait importFiles(input.files);\n\t\t};\n\t\tinput.click();\n\t}, [importFiles]);\n\n\tconst clearAndGoHome = useCallback(async () => {\n\t\ttry {\n\t\t\tclearEditorStorage();\n\t\t\tawait clearAllAssetBlobs();\n\t\t} finally {\n\t\t\trouter.push(\"/\");\n\t\t}\n\t}, [router]);\n\n\tconst onHomeClick = useCallback(() => {\n\t\tif (isDirty) {\n\t\t\tsetShowLeaveWarning(true);\n\t\t\treturn;\n\t\t}\n\t\tvoid clearAndGoHome();\n\t}, [clearAndGoHome, isDirty]);\n\n\tconst goPresent = useCallback(() => {\n\t\trouter.push(\"/present?from=editor\");\n\t}, [router]);\n\n\tconst goSettings = useCallback(() => {\n\t\trouter.push(\"/settings\");\n\t}, [router]);\n\n\tconst iconStyle: React.CSSProperties = {\n\t\twidth: 16,\n\t\theight: 16,\n\t\tdisplay: \"inline-block\",\n\t\tflex: \"0 0 auto\",\n\t};\n\n\tconst buttonStyle: React.CSSProperties = {\n\t\tdisplay: \"inline-flex\",\n\t\talignItems: \"center\",\n\t\tgap: 6,\n\t\theight: 32,\n\t\tpadding: \"0 10px\",\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tref={wrapperRef}\n\t\t\tonDrop={onDrop}\n\t\t\tonDragOver={onDragOver}\n\t\t\tstyle={{ width: \"100%\", height: \"100vh\", display: \"flex\", flexDirection: \"column\" }}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\tgap: 8,\n\t\t\t\t\tpadding: 8,\n\t\t\t\t\tborderBottom: \"1px solid #eee\",\n\t\t\t\t\talignItems: \"center\",\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<button onClick={onHomeClick} style={buttonStyle} aria-label=\"„Éõ„Éº„É†„Å´Êàª„Çã\">\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M3 10.5L12 3l9 7.5\" />\n\t\t\t\t\t\t<path d=\"M5 10v10h14V10\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t„Éõ„Éº„É†\n\t\t\t\t</button>\n\t\t\t\t<button onClick={goPresent} style={buttonStyle} aria-label=\"ÂÜçÁîü\">\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"currentColor\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M8 5v14l11-7z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\tÂÜçÁîü\n\t\t\t\t</button>\n\t\t\t\t<button onClick={goSettings} style={buttonStyle} aria-label=\"Ë®≠ÂÆö\">\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z\" />\n\t\t\t\t\t\t<path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-1.41 3.41h-.2a2 2 0 0 1-1.41-.59l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 0 1 3 18.07v-.2a2 2 0 0 1 .59-1.41l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2.4a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 5.02 3h.2a2 2 0 0 1 1.41.59l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 10 2.49V2.4a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06A2 2 0 0 1 20.41 5.02v.2a2 2 0 0 1-.59 1.41l-.06.06a1.65 1.65 0 0 0-.33 1.82v0a1.65 1.65 0 0 0 1.51 1h.09a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\tË®≠ÂÆö\n\t\t\t\t</button>\n\t\t\t\t<button onClick={onImportClick} disabled={isImporting} style={buttonStyle} aria-label=\"Á¥†ÊùêÂèñ„ÇäËæº„Åø\">\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M12 21V9\" />\n\t\t\t\t\t\t<path d=\"M7 14l5-5 5 5\" />\n\t\t\t\t\t\t<path d=\"M5 3h14v6H5z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t{isImporting ? \"ÂèñËæº‰∏≠...\" : \"Á¥†ÊùêÂèñ„ÇäËæº„Åø (D&DÂèØ)\"}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={deleteSelected}\n\t\t\t\t\tdisabled={selectedNodeIds.length + selectedEdgeIds.length === 0}\n\t\t\t\t\tstyle={buttonStyle}\n\t\t\t\t\taria-label=\"ÈÅ∏ÊäûÂâäÈô§\"\n\t\t\t\t>\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M3 6h18\" />\n\t\t\t\t\t\t<path d=\"M8 6V4h8v2\" />\n\t\t\t\t\t\t<path d=\"M6 6l1 16h10l1-16\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\tÈÅ∏ÊäûÂâäÈô§\n\t\t\t\t</button>\n\t\t\t\t<button onClick={onSaveProject} style={buttonStyle} aria-label=\"„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰øùÂ≠ò\">\n\t\t\t\t\t<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={iconStyle}>\n\t\t\t\t\t\t<path d=\"M12 3v12\" />\n\t\t\t\t\t\t<path d=\"M7 10l5 5 5-5\" />\n\t\t\t\t\t\t<path d=\"M5 21h14\" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t‰øùÂ≠ò\n\t\t\t\t</button>\n\t\t\t\t{isDirty ? (\n\t\t\t\t\t<div style={{ fontSize: 12, color: \"#b45309\" }}>Êú™‰øùÂ≠ò</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div style={{ fontSize: 12, color: \"#16a34a\" }}>‰øùÂ≠òÊ∏à„Åø</div>\n\t\t\t\t)}\n\t\t\t\t<div style={{ marginLeft: \"auto\", fontSize: 12, color: \"#666\" }}>\n\t\t\t\t\t„É≠„Éº„Ç´„É´Ëá™Âãï‰øùÂ≠ò: ON\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{showLeaveWarning ? (\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpadding: 12,\n\t\t\t\t\t\tborderBottom: \"1px solid #eee\",\n\t\t\t\t\t\tbackground: \"#fff7ed\",\n\t\t\t\t\t\tcolor: \"#7c2d12\",\n\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\tgap: 8,\n\t\t\t\t\t\tflexWrap: \"wrap\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div style={{ fontSize: 13, fontWeight: 600 }}>\n\t\t\t\t\t\tÊú™‰øùÂ≠ò„ÅÆÂ§âÊõ¥„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆ„Åæ„Åæ„Éõ„Éº„É†„Å´Êàª„Çã„Å®„Ç®„Éá„Ç£„Çø„ÅØ„ÇØ„É™„Éº„É≥„Å´„Å™„Çä„Åæ„Åô„ÄÇ\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ display: \"flex\", gap: 8, marginLeft: \"auto\" }}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait onSaveProject();\n\t\t\t\t\t\t\t\tsetShowLeaveWarning(false);\n\t\t\t\t\t\t\t\tawait clearAndGoHome();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t‰øùÂ≠ò„Åó„Å¶„Éõ„Éº„É†„Å∏\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tsetShowLeaveWarning(false);\n\t\t\t\t\t\t\t\tawait clearAndGoHome();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tÁ†¥Ê£Ñ„Åó„Å¶„Éõ„Éº„É†„Å∏\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button onClick={() => setShowLeaveWarning(false)}>„Ç≠„É£„É≥„Çª„É´</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<div style={{ flex: 1, display: \"flex\", minHeight: 0 }}>\n\t\t\t\t<div style={{ flex: 1 }}>\n\t\t\t\t\t<ReactFlow\n\t\t\t\t\t\tnodes={nodes}\n\t\t\t\t\t\tedges={edges}\n\t\t\t\t\t\tonNodesChange={onNodesChange}\n\t\t\t\t\t\tonEdgesChange={onEdgesChange}\n\t\t\t\t\t\tonConnect={onConnect}\n\t\t\t\t\t\tonSelectionChange={onSelectionChange}\n\t\t\t\t\t\tnodeTypes={nodeTypes}\n\t\t\t\t\t\tminZoom={0.05}\n\t\t\t\t\t\tpanOnScroll\n\t\t\t\t\t\tpanOnScrollMode={PanOnScrollMode.Free}\n\t\t\t\t\t\tzoomOnScroll={false}\n\t\t\t\t\t\tselectionOnDrag\n\t\t\t\t\t\tpanOnDrag={[1, 2]}\n\t\t\t\t\t\tfitView\n\t\t\t\t\t>\n\t\t\t\t\t\t<StarBackground />\n\t\t\t\t\t\t<MiniMap\n\t\t\t\t\t\t\tposition=\"bottom-right\"\n\t\t\t\t\t\t\tonClick={(_, pos) => {\n\t\t\t\t\t\t\t\tconst vp = getViewport();\n\t\t\t\t\t\t\t\tsetCenter(pos.x, pos.y, { zoom: vp.zoom });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Controls />\n\t\t\t\t\t</ReactFlow>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: 320,\n\t\t\t\t\t\tborderLeft: \"1px solid #eee\",\n\t\t\t\t\t\tpadding: 12,\n\t\t\t\t\t\toverflow: \"auto\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div style={{ fontSize: 12, fontWeight: 700, marginBottom: 8 }}>Inspector</div>\n\t\t\t\t\t<div style={{ fontSize: 12, color: \"#666\", marginBottom: 12 }}>\n\t\t\t\t\t\tÈÅ∏Êäû: „Éé„Éº„Éâ {selectedNodeIds.length} / „Ç®„ÉÉ„Ç∏ {selectedEdgeIds.length}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{selectedNode ? (\n\t\t\t\t\t\t<div style={{ marginBottom: 16 }}>\n\t\t\t\t\t\t\t<div style={{ fontSize: 12, fontWeight: 600, marginBottom: 6 }}>Node</div>\n\t\t\t\t\t\t\t<label style={{ display: \"block\", fontSize: 12, marginBottom: 4 }}>„É©„Éô„É´</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tvalue={selectedNode.data.label}\n\t\t\t\t\t\t\t\tonChange={(e) => updateSelectedNodeLabel(e.target.value)}\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{selectedEdge ? (\n\t\t\t\t\t\t<div style={{ marginBottom: 16 }}>\n\t\t\t\t\t\t\t<div style={{ fontSize: 12, fontWeight: 600, marginBottom: 6 }}>Edge</div>\n\t\t\t\t\t\t\t<label style={{ display: \"block\", fontSize: 12, marginBottom: 4 }}>„É©„Éô„É´</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tvalue={typeof selectedEdge.label === \"string\" ? selectedEdge.label : \"\"}\n\t\t\t\t\t\t\t\tonChange={(e) => updateSelectedEdgeLabel(e.target.value)}\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div style={{ fontSize: 12, color: \"#666\", marginTop: 6 }}>\n\t\t\t\t\t\t\t\t‰æã: next / a / b / timeout\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{!selectedNode && !selectedEdge ? (\n\t\t\t\t\t\t<div style={{ fontSize: 12, color: \"#666\" }}>\n\t\t\t\t\t\t\t„Éé„Éº„Éâ„ÇíÈÅ∏Êäû„Åó„Å¶„É©„Éô„É´Á∑®ÈõÜ„ÄÅ„Ç®„ÉÉ„Ç∏„ÇíÈÅ∏Êäû„Åó„Å¶ÂàÜÂ≤êÂêç„Çí‰ªò„Åë„Çâ„Çå„Åæ„Åô„ÄÇ\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport function EditorCanvas() {\n\treturn (\n\t\t<ReactFlowProvider>\n\t\t\t<InnerEditor />\n\t\t</ReactFlowProvider>\n\t);\n}"],"names":[],"mappings":"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"}}]
}